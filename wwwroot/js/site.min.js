function reloadJQGrid(e,t){$.ajax({url:e,method:"POST",datatype:"json",contentType:"application/json; charset=utf-8",async:!0,success:function(e){$(t).jqGrid("clearGridData"),$(t).jqGrid("setGridParam",{datatype:"local",data:JSON.parse(e)}).trigger("reloadGrid")},error:function(){console.log("reload error")}})}function deleteItem(e,t,a,n){delUserMessage="User deleted successfully!",delFeedbackMessage="Feedback deleted successfully!",$.ajax({url:t,data:{id:e},contentType:"application/json; charset=utf-8",type:"GET",success:function(){"#feedbacksList"==a?($(".popup").html(delFeedbackMessage),$(".popup").dialog("open")):"#usersList"==a&&($(".popup").html(delUserMessage),$(".popup").dialog("open")),$(".ui-dialog.ui-widget").fadeOut(2500),$(".popup").dialog("close"),reloadJQGrid(n,a)}})}function popup(){$(".clear").click(function(){$("#choiceColor label").text(""),$("input#inputColorName").val(""),$("input#inputColorRGB").val(""),$("input#inputColorHex").val("")})}function draw(){var e=new Image;e.crossOrigin="anonymous",e.src="./img/imagePalette.png",$(e).load(function(){canvas.drawImage(e,0,0)})}function rgbToHex(e,t,a){return toHex(e)+toHex(t)+toHex(a)}function toHex(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16))}function drawCross(e,t){var a=new Image;a.src="./img/cross.png";var n=new Image;n.src="./img/imagePalette.png",a.onload=function(){canvas.drawImage(n,0,0),canvas.drawImage(a,e-10,t-10)}}function getPixelColor(){$("#canvas_picker").click(function(e){var t=e.pageX-$("#colorPalette").offset().left+10-this.offsetLeft,a=e.pageY-$("#colorPalette").offset().top+10-this.offsetTop;console.log(t+"-----"+a),drawCross(t,a);var n=canvas.getImageData(t,a,1,1).data,o=n[0],r=n[1],i=n[2],s=o+","+r+","+i,l=rgbToHex(o,r,i);$("input#inputColorRGB").val(s),$("input#inputColorHex").val("#"+l)})}function createPDF(){var e={};$(document).on("click",".savePattern",function(){html2canvas($("#patternImgCanvas"),{onrendered:function(){var t={patternImage:$("#patternImgCanvas").get(0),originalImage:$("#srcImgCanvas").get(0),colorsReport:$("#colorsReportForPDF").get(0)};e=createDOC(t),e.save("sample-file.pdf")}})})}function getInMm(e){var t=.264583;return"number"==typeof e?e*t:"Value is not a number"}function createDOC(e){var t={},a=210,n={patternImage:e.patternImage.toDataURL("image/jpg"),originalImage:e.originalImage.toDataURL("image/jpg"),colorsList:e.colorsReport.toDataURL("image/jpg")},o={width:e.patternImage.width,height:e.patternImage.height},r={width:e.originalImage.width,height:e.originalImage.height},i={height:e.colorsReport.height,width:e.colorsReport.width,context:e.colorsReport.getContext("2d")};return t=getInMm(o.width)<a&&getInMm(r.width)<a?writeInA4Format(o,r,n,i):writeInSizebleFormat(o,r,n,i)}function cutColorReport(e,t,a){$(".uploadedSection").append("<canvas id = 'hiddenCanvas' style=\"display:none\" width="+t.width+" height="+e.height+"></canvas>");var n=$("#hiddenCanvas").get(0);hiddenContext=n.getContext("2d"),space=5,reportCount=Math.trunc(e.width/t.width),reportCount=Math.trunc(e.width/(t.width+space*reportCount)),reportOnPage=0,a.setFontSize(12),a.text(5,7,"Colors list:");for(var o=0;o<t.height;o+=e.height)hiddenData=t.context.getImageData(0,o,t.width,o+e.height),hiddenContext.putImageData(hiddenData,0,0),reportOnPage<=reportCount?(a.addImage(n.toDataURL("image/png"),"PNG",getInMm(t.width+space)*reportOnPage+5,8),reportOnPage++):(a.addPage(),a.text(5,7,"Colors list:"),reportOnPage=0,a.addImage(n.toDataURL("image/png"),"PNG",getInMm(t.width+space)*reportOnPage+5,8),reportOnPage++);return $("#hiddenCanvas").remove(),a}function addPatternAndOriginal(e,t){return t.addImage(e.patternImage,"JPEG",5,5),t.addPage(),t.setFontSize(14),t.text(5,7,"Original image"),t.addImage(e.originalImage,"JPEG",5,10),t.addPage(),t}function writeInA4Format(e,t,a,n){var o={},r=0,i={width:793.7017,height:1122.521},s={width:603,height:1040};return o=new jsPDF("p","mm","a4"),r=(getInMm(i.width)-getInMm(e.width))/2,o.addImage(a.patternImage,"JPEG",r,10),o.addPage(),o.setFontSize(14),o.text(5,7,"Original image"),o.addImage(a.originalImage,"JPEG",5,10),o.addPage(),o=cutColorReport(s,n,o)}function writeInSizebleFormat(e,t,a,n){var o={},r=e.width>=e.height?"l":"p";if(e.width>t.width){for(o=new jsPDF(r,"mm",[getInMm(e.width)+10,getInMm(e.height)+10]),o=addPatternAndOriginal(a,o),i=0;i<=100;i++)e.height%80!=0&&e.height--;o=cutColorReport(e,n,o)}else{for(o=new jsPDF(r,"mm",[getInMm(t.width)+10,getInMm(t.height)+20]),i=0;i<=100;i++)t.height%80!=0&&t.height--;o=addPatternAndOriginal(a,o),o=cutColorReport(t,n,o)}return o}function ValidateRegistrationForm(){var e=!0;return needlework.validations.nameIsValid($("#registrationFirstName").prop("value"))||($("#registrationFirstName").after('<div class="validationError">'+Localization.Validations.name+"</div>"),e=!1),needlework.validations.nameIsValid($("#registrationLastName").prop("value"))||($("#registrationLastName").after('<div class="validationError">'+Localization.Validations.name+"</div>"),e=!1),needlework.validations.emailIsValid($("#registrationEmail").prop("value"))||($("#registrationEmail").after('<div class="validationError">'+Localization.Validations.email+"</div>"),e=!1),needlework.validations.passwordIsValid($("#registrationPassword").prop("value"))||($("#registrationPassword").after('<div class="validationError">'+Localization.Validations.password+"</div>"),e=!1),needlework.validations.passwordIsConfirm($("#registrationPassword").prop("value"),$("#registrationConfirmPassword").prop("value"))||($("#registrationConfirmPassword").after('<div class="validationError">'+Localization.Validations.passwordConfirm+"</div>"),e=!1),e}function ValidateResetPasswordForm(){var e=!0;return needlework.validations.emailIsValid($("#resetPasswordEmail").prop("value"))||($("#resetPasswordEmail").after('<div class="validationError">'+Localization.Validations.email+"</div>"),e=!1),needlework.validations.passwordIsValid($("#resetPasswordNewPassword").prop("value"))||($("#resetPasswordNewPassword").after('<div class="validationError">'+Localization.Validations.password+"</div>"),e=!1),needlework.validations.passwordIsConfirm($("#resetPasswordNewPassword").prop("value"),$("#resetPasswordNewPasswordConfirm").prop("value"))||($("#resetPasswordNewPasswordConfirm").after('<div class="validationError">'+Localization.Validations.passwordConfirm+"</div>"),e=!1),e}function ValidateChangePasswordForm(){var e=!0;return needlework.validations.passwordIsValid($("#changePasswordOldPassword").prop("value"))||($("#changePasswordOldPassword").after('<div class="validationError">'+Localization.Validations.password+"</div>"),e=!1),needlework.validations.passwordIsValid($("#changePasswordNewPassword").prop("value"))||($("#changePasswordNewPassword").after('<div class="validationError">'+Localization.Validations.password+"</div>"),e=!1),needlework.validations.passwordIsConfirm($("#changePasswordNewPassword").prop("value"),$("#changePasswordNewPasswordConfirm").prop("value"))||($("#changePasswordNewPasswordConfirm").after('<div class="validationError">'+Localization.Validations.passwordConfirm+"</div>"),e=!1),e}function ValidateForgotPasswordForm(){return needlework.validations.emailIsValid($("#forgotPasswordEmail").prop("value"))?!0:($("#forgotPasswordEmail").after('<div class="validationError">'+Localization.Validations.email+"</div>"),!1)}var Localization={Messages:{666:{Status:"Error",Name:"Undefined error",Definition:"Unknown error."},1e3:{Status:"Error",Name:"Registration was failed",Definition:"When creating a user error has occurred."},1001:{Status:"Error",Name:"CAPTCHA is invalid",Definition:"User has not passed CAPTCHA."},1002:{Status:"Error",Name:"Email unconfirmed",Definition:"You need to go on the mail and confirm the registration."},1003:{Status:"Error",Name:"The data was not entered",Definition:"Please enter your login details."},1004:{Status:"Error",Name:"Wrong password",Definition:"Please enter correct password."},1005:{Status:"Error",Name:"Not registered",Definition:"You are not registered, please register."},1006:{Status:"Error",Name:"Wrong email code or userId",Definition:"Your email identity code or userId are wrong."},1007:{Status:"Error",Name:"Data was not enter",Definition:"Please enter first name and last name."},1008:{Status:"Error",Name:"Email was not enter",Definition:"Please enter your email."},1009:{Status:"Error",Name:"Is registered",Definition:"User with the same name already exists."},1010:{Status:"Error",Name:"User was not found",Definition:"User with this id was not found."},1011:{Status:"Error",Name:"Password is too short",Definition:"Passwords must be at least 6 characters."},1012:{Status:"Error",Name:"Password without non digit character",Definition:"Passwords must have at least one non letter and non digit character."},1013:{Status:"Error",Name:"Password without one lowercase",Definition:'Passwords must have at least one lowercase ("a"-"z").'},1014:{Status:"Error",Name:"Password without one uppercase",Definition:'Passwords must have at least one uppercase ("A"-"Z").'},1015:{Status:"Error",Name:"Password is rquired",Definition:"Passwords is required field."},1016:{Status:"Error",Name:"Incorrect e-mail",Definition:"Please enter correct e-mail."},1017:{Status:"Error",Name:"E-mail was not entered",Definition:"E-mail is required field."},1018:{Status:"Error",Name:"Incorrect first name",Definition:"Please enter correct first name."},1019:{Status:"Error",Name:"Incorrect last name",Definition:"Please enter correct last name."},1020:{Status:"Error",Name:"Database connection",Definition:"Database connection is missing."},1050:{Status:"Error",Name:"User is not logged in",Definition:"Please login first to get access to this function"},1051:{Status:"Error",Name:"Cannot get access to the palette",Definition:"It seems that you are trying to get access to palette which is not exist"},1052:{Status:"Error",Name:"Cannot get access to the color",Definition:"It seems that you are trying to get access to color which is not exist"},1053:{Status:"Error",Name:"Returned object format is not valid",Definition:"Please check all data fields and try again"},2e3:{Status:"Success",Name:"Success",Definition:"Successful operation."},2001:{Status:"Success",Name:"Success LogIn",Definition:"You have successfully LogIn."},2002:{Status:"Success",Name:"Registration was successful",Definition:"For 20 minutes on your mail will get a message to confirm your registration."},2003:{Status:"Success",Name:"Success E-mail confirm",Definition:"You e-mail successfully confirmed."},2006:{Status:"Success",Name:"Reset password was successful",Definition:"For 20 minutes on your mail will get a message to change your password."},2007:{Status:"Success",Name:"Password is changed",Definition:"Successful operation. Set new password."},2008:{Status:"Success",Name:"Feedback sent",Definition:"Your feedback successfully sent."},2009:{Status:"Success",Name:"Successful editing",Definition:"Editing was successful."},2010:{Status:"Success",Name:"Successful language change",Definition:"Language was successfully changed."}},Validations:{name:"name is incorrect",password:"password is incorrect",email:"email is incorrect",captcha:"captcha is invalid",passwordConfirm:"please, confirm your password"},InformationPage:{IPTitle:"Welcome to our site",IPFirstBlockName:"Step One",IPFirstBlockText:["Embroidery is the handicraft of decorating fabric or other materials with needle and thread or yarn. Embroidery may also incorporate other materials such as metal strips, pearls, beads, quills, and sequins. Embroidery is most often used on caps, hats, coats, blankets, dress shirts, denim, stockings, and golf shirts. Embroidery is available with a wide variety of thread or yarn color.","Our site helps to make amazing embroidery patterns.","gsdgdfgdf"],IPSecondBlockName:"Step Twovdfsdf",IPSecondBlockText:["You can:","- upload your picture from PC or via URL","- input count of stitches in width","- select palette","- finaly create embroidery pattern"],IPThirdBlockName:"Step Third",IPThirdBlockText:["Also you can make your personal custom palettes. To do it you must be loggeed in. So, please login or register to make your custom paletts or give your feedback.","Thanks for using our system."]},PopUps:{PopUpLogin:{PULoginTitle:"Login",loginEmail:"email",loginPassword:"password",loginRemember:"Remember me",loginSubmit:"submit",forgotPassword:"forgot password",registration:"registration"},PopUpRegistration:{PURegistrationTitle:"Registration",registrationFirstName:"first name",registrationLastName:"last name",registrationEmail:"email",registrationPassword:"password",registrationConfirmPassword:"confirm password",registrationSubmit:"submit",login:"login"},PopFeedback:{writeFeedback:"Write your feedback",feedBackSubmit:"submit"},PopChangePassword:{titleChangePassword:"Change password",changePasswordOldPassword:"old password",changePasswordNewPassword:"new password",changePasswordNewPasswordConfirm:"confirm new password",changePasswordSubmit:"submit"},PopForgotPassword:{titleForgotPassword:"Forgot password",forgotPasswordEmail:"email",forgotPasswordSubmit:"submit"},PopResetPassword:{titleResetPassword:"Reset password",resetPasswordEmail:"email",resetPasswordNewPassword:"new password",resetPasswordNewPasswordConfirm:"confirm new password",resetPasswordSubmit:"submit"}},Layout:{homePage:"Home page",editPalettes:"Edit palettes",aboutUs:"About Us",adminPage:"Admin Page",signIn:"Sign In",signOut:"Sign Out",feedback:"Feedback",language:"Language",fcM:"© 2016 All rights reserved",ourContacts:"Our contacts:",phone:"Phone: +44 (0) 20 7229 64 12",email:"Email: needlework2016@gmail.com",changePassword:"Change password",helloUser:"Hello, "},HomePage:{homePageTop:"Home page",editPalettesTop:"Edit palettes",aboutUsTop:"About Us",adminPageTop:"Admin Page",signInTop:"Sign In",signOutTop:"Sign Out",dragBoxText1:"Drag ",dragBoxText2:" over here",imageSpan:"image",status:"File API & FileReader API not supported",imageURL:"Enter image url: ",imgUrl:"Enter image url",uplImgByUrl:"Upload",chooseSpan:"Choose file",patternCreation:"Pattern creation",imageAdjustment:"Image adjustment",imageDraw:"Draw on image",imageCropTab:"Crop image",numberStitches:"Enter number of stitches: ",countColors:"Enter colors count: ",paletteSkin:"Enter pattern scale: ",selectedPalette:"Select palette: ",selectedAlg:"Select algorithm: ",stitchesCount:"Enter number of stitches",colorsCount:"Enter number of colors",firstPalette:"First palette",secondPalette:"Second palette",avgColors:"Average colors",contrastColor:"Contrast colors",crtPattern:"Create pattern",fullResetBtn:"Full reset",userColors:"Used colors:",countUsersColors:"Count of used colors:  ",colorsCountRep:"Colors count will be shown here",savePatternFromServer:"Save pattern as PDF",savePDFPattern:"Save pattern as PDF",contrasts:"Contrast: ",hue:"Hue: ",saturation:"Saturation: ",vibrance:"Vibrance: ",denoise:"Denoise: ",unsharp:"Unsharp mask: ",noise:"Noise: ",sepia:"Sepia: ",vignette:"Vignette: ",resetAdjButton:"Reset",cropButton:"Crop image",cropButtonReset:"Reset image",brightnessTitle:"Brightness: "},EditPage:{makeNew:"Make new ",palette:"palette",yourWork:" for your work",paletteText1:"In computer graphics, a palette is either a given, finite ",paletteText2:"set of colors for the management of digital images, ",paletteText3:"or a small on-screen graphical element for choosing ",paletteText4:" from a limited set of choices, not necessarily colors. ",nameOfPalette:"Enter Palette Name",sentPaletteName:"Submit",cancel:"Cancel",AddPalette:"Add Palette",lisOfPalette:"Palette List",makeNew1:"Make new ",yourWork1:" for your work",colorNew:"color",colorText1:"In color reproduction, including computer graphics and photography, ",colorText2:" the gamut, or color gamut, is a certain complete subset of colors.",colorText3:"The most common usage refers to the subset of colors ",colorText4:"which can be accurately represented in a given circumstance.",backToPaletteText:"Back to Palette",listOfColors:"Color List",AddColorText:"Add Color",EditColor:"Edit",RemoveColor:"Remove",nameOfColor:"Name:",submitColor:"Submit",clearColor:"Clear",RemovePalettes:"Remove",EditPalettes:"Edit name",saveNames:"Save",acceptRemoveColor:"Accept",cancelRemoveColor:"Cancel",acceptRemovePalette:"Accept",cancelRemovepalette:"Cancel",paletteDo:"Do you want remove ",paletteQuestion:" palette?",colorDo:"Do you want remove ",colorQuestion:" color?"}},Localization={Messages:{666:{Status:"Error",Name:"Неизвестная ошибка",Definition:"Произошла неизвестная ошибка."},1000:{Status:"Error",Name:"Неудачная регистрация",Definition:"При регистрации пользователя произошла ошибка."},1001:{Status:"Error",Name:"CAPTCHA не прошла валидацию",Definition:"Пользователь не прошел CAPTCHA."},1002:{Status:"Error",Name:"Email не подтверджен",Definition:"Вы должны перейти на свою почту для подтверждения регистрации."},1003:{Status:"Error",Name:"Не введены данные",Definition:"Пожалуйста, введите данные."},1004:{Status:"Error",Name:"Неправильный пароль",Definition:"Пожалуйтса, введите корректный пароль."},1005:{Status:"Error",Name:"Вы не зарегестрированы",Definition:"Пожалуйста, зарегестрируйтесь."},1006:{Status:"Error",Name:"Неправильный код пользователя",Definition:"Ваш идентификационный код пользователя неправильный."},1007:{Status:"Error",Name:"Не введены данные регистрации",Definition:"Пожалуйста, введите Ваши имя и вамилию."},1008:{Status:"Error",Name:"Не введен Email",Definition:"Пожалуйтса, введите корректный Email."},1009:{Status:"Error",Name:"Зарегестрирован",Definition:"Пользователь с таким именем уже существует."},1010:{Status:"Error",Name:"Не найден пользователь",Definition:"Пользователь с таким кодом не найден."},1011:{Status:"Error",Name:"Короткий пароль",Definition:"Пароль должен содержать не менее 6 символов."},1012:{Status:"Error",Name:"В пароле отсутсвует специальный символ",Definition:"Пароль должен содержать хотя бы один специальный символ и число."},1013:{Status:"Error",Name:"Пароль без маленькой буквы",Definition:'Пароль должен содержать хотя бы одну маленькую букву ("а"-"я").'},1014:{Status:"Error",Name:"Пароль без большой буквы",Definition:'Пароль должен содержать хотя бы одну большую букву ("А"-"Я").'},1015:{Status:"Error",Name:"Необходимо ввести пароль",Definition:"Пароль является обязательным полем."},1016:{Status:"Error",Name:"Некоректный E-mail",Definition:"Пожалуйтса, введите корректный e-mail."},1017:{Status:"Error",Name:"Необходимо ввести E-mail",Definition:"E-mail является обязательным полем."},1018:{Status:"Error",Name:"Некоректное имя",Definition:"Пожалуйтса, введите корректное имя."},1019:{Status:"Error",Name:"Некоректная фамилия",Definition:"Пожалуйтса, введите корректную фамилию."},1020:{Status:"Error",Name:"Соединение с базой данных",Definition:"Соединение с базой данных отсутсвует."},1050:{Status:"Error",Name:"Пользователь не авторизирован",Definition:"Пожалуйста, зайдите на сайт, чтобы получить доступ к этой функции"},1051:{Status:"Error",Name:"Палитра не доступна",Definition:"Похоже, вы пытаетесь обратиться к несуществующей палитре"},1052:{Status:"Error",Name:"Цвет не доступен",Definition:"Похоже, вы пытаетесь обратиться к несуществующему цвету"},1053:{Status:"Error",Name:"Неверный формат возвращаемого объекта",Definition:"Пожалуйста, проверьте все поля и попробуйте снова"},2000:{Status:"Success",Name:"Успешно",Definition:"Операция прошла успешно."},2001:{Status:"Success",Name:"Успешный вход в систему",Definition:"Вы успешно вошли в систему."},2002:{Status:"Success",Name:"Регистрация прошла успешно",Definition:"В течении 20 минут на вашу почту придет сообщение с подтверждением регистарции."},2003:{Status:"Success",Name:"Успешное подтверждение E-mail",Definition:"Ваш E-mail успешно подтвержден."},2006:{Status:"Success",Name:"Сброс пароля прошел успешно",Definition:"В течении 20 минут на вашу почту придет сообщение для смены пароля."},2007:{Status:"Success",Name:"Пароль изменен",Definition:"Процесс сброса пароля прошел удачно."},2008:{Status:"Success",Name:"Отзыв отправлен",Definition:"Ваш отзыв удачно отправлен."},2009:{Status:"Success",Name:"Успешное редактирование",Definition:"Редактировение прошло успешно."},2010:{Status:"Success",Name:"Успешное изменение языка",Definition:"Язык был успешно изменен."}},Validations:{name:"некоректное имя",password:"некоректный пароль",email:"некоректная почта",captcha:"captcha не пройдена",passwordConfirm:"пожалуйста, подтвердите пароль"},InformationPage:{IPTitle:"Приветствуем на нашем сайте",IPFirstBlockName:"Шаг второй ааааа",IPFirstBlockText:["Текст о том, что такое вышивка, и как это клево))","Наш сайт помогает вам делать удивительные шаблоны для вышивки."],IPSecondBlockName:"Шаг второй авыаыв",IPSecondBlockText:["Вы можете:","- загрузить свое изображение с ПК или по URL ссылке","- ввести количество стежков для шаблона","- выбрать палитру","- в итоге создать шаблон для вышивки"],IPThirdBlockName:"Шаг третий",IPThirdBlockText:["Также вы можете создавать пользовательские палитры. Чтобы сделать это, вы должны быть авторизированы. Поэтому, пожалуйста, войдите в систему или зарегестрируйтесь, чтобы создать свои персональные палитры или оставить свой отзыв.","Спасибо за использование нашей системы."]},PopUps:{PopUpLogin:{PULoginTitle:"Вход",loginEmail:"почта",loginPassword:"пароль",loginRemember:"Запомнить меня",loginSubmit:"принять",forgotPassword:"забыл пароль",registration:"регистрация"},PopUpRegistration:{PURegistrationTitle:"Регистрация",registrationFirstName:"имя",registrationLastName:"фамилия",registrationEmail:"почта",registrationPassword:"пароль",registrationConfirmPassword:"подтверждение пароля",registrationSubmit:"принять",login:"вход"},PopFeedback:{writeFeedback:"Оставьте здесь свой отзыв",feedBackSubmit:"Отправить"},PopChangePassword:{titleChangePassword:"Изменение пароля",changePasswordOldPassword:"старый пароль",changePasswordNewPassword:"новый пароль",changePasswordNewPasswordConfirm:"подтверждение нового пароля",changePasswordSubmit:"принять"},PopForgotPassword:{titleForgotPassword:"Забыли пароль",forgotPasswordEmail:"почта",forgotPasswordSubmit:"принять"},PopResetPassword:{titleResetPassword:"Сброс пароля",resetPasswordEmail:"почта",resetPasswordNewPassword:"новый пароль",resetPasswordNewPasswordConfirm:"подтверждение нового пароля",resetPasswordSubmit:"принять"}},Layout:{homePage:"Главная",editPalettes:"Редактирование палитр",aboutUs:"Про нас",adminPage:"Страница администратора",signIn:"Вход",signOut:"Выход",feedback:"Отзыв",language:"Язык",fcM:"© 2016 Все права защищены",ourContacts:"Контакты:",phone:"Телефон: +55-444-33-11",email:"Почта: needlework2016@gmail.com",changePassword:"Сменить пароль",helloUser:"Здравствуйте, "},EmailMessages:{hello:"Здравствуйте, ",helloDefinition:", Вы перешли на почту для подтверждения регистрации.",textBeforeLink:"Пожалуйста, перейдите по данной ссылке для подтверждения регистрации: ",linkText:"Подтверждение регистрации"},HomePage:{homePageTop:"Главная",editPalettesTop:"Редактирование палитр",aboutUsTop:"О нас",adminPageTop:"Страница администратора",signInTop:"Вход",signOutTop:"Выход",dragBoxText1:"Перетащите ",dragBoxText2:" прямо сюда",imageSpan:"изображение",status:"Файл API & FileReader API не поддерживается",imageURL:"Введите URL изображения: ",imgUrl:"Введите URL изображения",uplImgByUrl:"Загрузить",chooseSpan:"Выбрать файл",patternCreation:"Создание шаблона",imageAdjustment:"Настройка изображения",imageDraw:"Рисовать на изображении",imageCropTab:"Обрезать изображение",numberStitches:"Введите количество стежков: ",countColors:"Введите количество цветов: ",paletteSkin:"Введите шасштаб: ",selectedPalette:"Выбрать палитру: ",selectedAlg:"Выбрать алгоритм: ",stitchesCount:"Введите количество стежков",colorsCount:"Введите количество цветов",firstPalette:"Первая палитра",secondPalette:"Вторая палитра",avgColors:"Средние цвета",contrastColor:"Контрастные цвета",crtPattern:"Создать шаблон",fullResetBtn:"Полный сброс",userColors:"Используемые цвета:",countUsersColors:"Количество используемых цветов:  ",colorsCountRep:"Количество цветов будет отображено здесь",savePatternFromServer:"Сохранить шаблон как PDF",savePDFPattern:"Сохранить шаблон как PDF",contrasts:"Контраст: ",hue:"Оттенок: ",saturation:"Насыщение: ",vibrance:"Резонанс: ",denoise:"Шум: ",unsharp:"Контур: ",noise:"Шум: ",sepia:"Сепия: ",vignette:"Виньетка: ",resetAdjButton:"Сбросить",cropButton:"Обрезать изображение",cropButtonReset:"Сбросить изображение",brightnessTitle:"Яркость: "},EditPage:{makeNew:"Создать новую ",palette:"палитру",yourWork:" для Вашей работы",paletteText1:"В компьютерной графике, палитра является данным, конченым ",paletteText2:"множеством цветов для управления цветными изображениями, ",paletteText3:"или небольшим графическим элементом на экране для выбора ",paletteText4:" из ограниченногонабора вариантов, но не обязательно цветов.",nameOfPalette:"Введите название палитры",sentPaletteName:"Принять",cancel:"Отменить",AddPalette:"Добавить палитру",lisOfPalette:"Список палитр",makeNew1:"Создать новый ",yourWork1:" для Вашей работы",colorNew:"цвет",colorText1:"В цветопередаче, в том числе компьютерной графике и фотографии,",colorText2:" гамме, или цветовая гамму, определенно полное подмножество цветов.",colorText3:"Наиболее распространенное использование относится к подгруппе цветов,",colorText4:" которые могут быть точно представлено в данном обстоятельстве.",backToPaletteText:"Вернутся к палитрам",listOfColors:"Список цветов",AddColorText:"Добавить цвет",EditColor:"Редактировать",RemoveColor:"Удалить",nameOfColor:"Имя:",submitColor:"Принять",clearColor:"Очистить",RemovePalettes:"Удалить",EditPalettes:"Изменить",saveNames:"Сохранить",acceptRemoveColor:"Принять",cancelRemoveColor:"Отменить",acceptRemovePalette:"Принять",cancelRemovepalette:"Отменить",paletteDo:"Хотите ли Вы удалить ",paletteQuestion:" палитру?",colorDo:"Хотите ли Вы удалить ",colorQuestion:" цвет?"}},mydata=[{id:"0",FirstName:"Test name",LastName:"Test surname",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"1",FirstName:"Test name",LastName:"Test surname",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"2",FirstName:"Ivan",LastName:"Pupkin",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"3",FirstName:"Petr",LastName:"Ivanov",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"4",FirstName:"German",LastName:"Nikolaev",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"5",FirstName:"Test name",LastName:"Test surname",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"6",FirstName:"Ivan",LastName:"Pupkin",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"7",FirstName:"Petr",LastName:"Ivanov",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"8",FirstName:"German",LastName:"Nikolaev",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"9",FirstName:"Test name",LastName:"Test surname",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"10",FirstName:"Ivan",LastName:"Pupkin",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"11",FirstName:"Petr",LastName:"Ivanov",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"12",FirstName:"German",LastName:"Nikolaev",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"13",FirstName:"Test name",LastName:"Test surname",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"14",FirstName:"Ivan",LastName:"Pupkin",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"15",FirstName:"Petr",LastName:"Ivanov",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"16",FirstName:"German",LastName:"Nikolaev",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"17",FirstName:"Ivan",LastName:"Pupkin",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"18",FirstName:"Petr",LastName:"Ivanov",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"19",FirstName:"German",LastName:"Nikolaev",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"20",FirstName:"Ivan",LastName:"Pupkin",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"21",FirstName:"Petr",LastName:"Ivanov",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"},{id:"22",FirstName:"Vetal",LastName:"Nikolaev",Email:"mail@example.com",Remove:"<input type='button' value='Remove'>"}];!function(e){function t(){e("#selectLanguage").on("change",function(){var t={lang:e(this).prop("value")};e.ajax({type:"post",dataType:"json",url:"/Home/ChangeCulture",data:t,success:function(e){location.reload()},error:function(e){console.log("Change language error.")}})})}function a(){var t=(e("#localizationForm").serializeArray(),[]),a=[],n=[],o=Localization;e("#updateBtn").click(function(r){r.preventDefault(),e(".multiple input[name=IPFirstBlockText]").each(function(){t.push(e(this).val())}),e(".multiple input[name=IPSecondBlockText]").each(function(){a.push(e(this).val())}),e(".multiple input[name=IPThirdBlockText]").each(function(){n.push(e(this).val())}),o.InformationPage={IPTitle:e("#title").val(),IPFirstBlockName:e("#FirstBlockName").val(),IPFirstBlockText:t,IPSecondBlockName:e("#SecondBlockName").val(),IPSecondBlockText:a,IPThirdBlockName:e("#ThirdBlockName").val(),IPThirdBlockText:n},e.ajax({url:"Localization/Update",type:"POST",data:{name:"IP",json:JSON.stringify(o)},success:function(e){},error:function(e,t,a){alert(a)}})})}function n(){var t=[Localization.InformationPage.IPFirstBlockText.length,Localization.InformationPage.IPSecondBlockText.length,Localization.InformationPage.IPThirdBlockText.length],a=["IPFirstBlockText","IPSecondBlockText","IPThirdBlockText"];appendElement="",o=0;for(var n=0;n<a.length;n++){appendElement="<span id='item' class='minus'><input type='type' name='"+a[n]+"'/><i class='fa fa-minus-circle'></i></span>";for(var o=0;o<t[n]-2;o++)e(".second-level."+a[n]+" > .multiple").append(appendElement);o=0,e(".multiple input[name="+a[n]+"]").each(function(){e(this).val(Localization.InformationPage[a[n]][o]),o++})}e(".first-level input[name=IPFirstBlockName]").val(Localization.InformationPage.IPSecondBlockName),e(".first-level input[name=IPSecondBlockName]").val(Localization.InformationPage.IPSecondBlockName),e(".first-level input[name=IPThirdBlockName]").val(Localization.InformationPage.IPThirdBlockName),e(".first-level input[name=IPtitle]").val(Localization.InformationPage.IPTitle)}function o(){var t="second-level IPFirstBlock",a="second-level IPSecondBlock",n="second-level IPThirdBlock",o="",r="";e("i.fa.fa-plus-circle").click(function(){getCurrentBlock=e(this).parents().eq(2).attr("class"),getCurrentBlock==t?r="IPFirstBlockText":getCurrentBlock==a?r="IPSecondBlockText":getCurrentBlock==n&&(r="IPThirdBlockText"),o="<span id='item' class='minus'><input type='type' name='"+r+"'/><i class='fa fa-minus-circle'></i></span>",e(this).parent().parent().append(o)})}function r(){e(document).on("click","i.fa.fa-minus-circle",function(){e(this).parent().remove()})}function i(t){var a={height:500,width:e("#tabs").width()+12};return e(window).bind("resize",function(){a.width=e(".admin-page > .wrap").width()-4,e(t).setGridWidth(a.width,!0)}),a}function s(){var t="/Feedbacks/DeleteFeedbackData/",a="#feedbacksList",n="/Feedbacks/GetFeedbackData/",o=i(a);e.ajax({url:n,datatype:"json",data:"{}",contentType:"application/json; charset=utf-8",method:"POST",success:function(r){e("#feedbacksList").jqGrid({datatype:"local",colNames:["Id","First name","Last name","Text","Email","Delete feedback"],colModel:[{name:"Id",index:"Id",key:!0,hidden:!0,sortable:!1},{name:"FirstName",
index:"FirstName",width:80,search:!0,sortable:!1,editable:!0},{name:"LastName",index:"LastName",width:80,search:!0,sortable:!1,editable:!0},{name:"Text",index:"Text",width:100,sortable:!0,sorttype:"text",search:!0,sortable:!1,editable:!0},{name:"Email",index:"Email",width:100,sortable:!0,sorttype:"text",search:!0,sortable:!1,editable:!0},{name:"Remove",index:"Remove",formatter:function(e,o,r){return"<button class='deleteBtn' onclick='deleteItem(\""+r.Id+'","'+t+'","'+a+'","'+n+"\")' ><i class='fa fa-trash'></i></button>"},search:!1,align:"center"}],data:JSON.parse(r),rowNum:15,pager:"#gridPagerFeedback",width:o.width,height:o.height,rowList:[15,30,45,60],caption:"Feedback list"}).navGrid("#gridPagerFeedback",{edit:!1,add:!1,del:!1,search:!1,refresh:!1}),e("#feedbacksList").jqGrid("filterToolbar",{searchOnEnter:!1})}})}function l(){var t="/AdminUser/GetUserData/",a="/AdminUser/DeleteUserData/",n="#usersList",o=i(n),r=-1,s=function(e){return!0};e.ajax({url:t,datatype:"json",data:"{}",contentType:"application/json; charset=utf-8",method:"POST",success:function(i){e("#usersList").jqGrid({datatype:"local",colNames:["Id","First name","Last name","Email","Status","Delete user"],colModel:[{name:"Id",index:"Id",key:!0,hidden:!0,sortable:!1},{name:"FirstName",index:"FirstName",width:80,search:!0,sortable:!1,editable:!0},{name:"LastName",index:"LastName",width:80,search:!0,sortable:!1,editable:!0},{name:"Email",index:"Email",width:80,sortable:!0,sorttype:"text",search:!0,sortable:!1,editable:!0},{name:"EmailConfirmed",index:"EmailConfirmed",width:80,search:!0,sortable:!1,editable:!1},{name:"Remove",index:"Remove",formatter:function(e,o,r){return"<button class='deleteBtn' onclick='deleteItem(\""+r.Id+'","'+a+'","'+n+'","'+t+"\")' ><i class='fa fa-trash'></i></button>"},search:!1,align:"center"}],data:JSON.parse(i),rowNum:15,pager:"#gridPager",width:o.width,height:o.height,rowList:[15,30,45,60],viewrecords:!0,search:!0,caption:"User list",editurl:"/AdminUser/GridSave/",ondblClickRow:function(t){s(t)&&e("#usersList").jqGrid("editRow",t,{keys:!0,oneditfunc:function(){},successfunc:function(t){var a,n=JSON.parse(t.responseText);a=Localization.Messages[n.Code],e(".popup").html(a.Definition),e(".popup").dialog("open"),e(".ui-dialog.ui-widget").fadeOut(2500),e(".popup").dialog("close"),reloadJQGrid("/AdminUser/GetUserData/","#usersList")}})},onSelectRow:function(t){t&&t!==r&&(e("#usersList").jqGrid("restoreRow",r),r=t)}}).navGrid("#gridPager",{edit:!1,add:!1,del:!1,search:!1,refresh:!1},{beforeShowForm:function(t){var a={width:e("#gbox_usersList").width(),height:e("#gbox_usersList").height()};e("#editmodusersList").css({top:a.height/2+"px",left:a.width/2-175+"px"})}}),e("#usersList").jqGrid("filterToolbar",{searchOnEnter:!1})}})}function c(){var t="#paletteList",a=i(t),n="/AdminPalette/GetData",o="/AdminPalette/Delete/",r=-1,s=function(e){return!0};e("#paletteList").jqGrid({url:"/AdminPalette/GetData",datatype:"json",mtype:"POST",colNames:["Id","Name","Remove feedback"],colModel:[{key:!0,hidden:!0,name:"Id",index:"Id",editable:!0},{key:!1,name:"Name",index:"Name",editable:!0},{key:!1,name:"Remove feedback",index:"Remove feedback",align:"center",editable:!1,formatter:function(e,a,r){return"<button class='deleteBtn' onclick='deleteItem(\""+r.Id+'","'+o+'","'+t+'","'+n+"\")' ><i class='fa fa-trash'></i></button>"}}],pager:"#palettePager",rowNum:10,rowList:[10,20,30,40],viewrecords:!0,width:500,caption:"Palette List",emptyrecords:"No records to display",jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,Id:"0"},width:a.width,height:a.height,multiselect:!1,editurl:"/AdminPalette/Edit/",ondblClickRow:function(t){s(t)&&e("#paletteList").jqGrid("editRow",t,{keys:!0,oneditfunc:function(){},successfunc:function(t){console.log(t.responseText),e(".popup").html(t.responseText),e(".popup").dialog("open"),e(".ui-dialog.ui-widget").fadeOut(2500),e(".popup").dialog("close"),reloadJQGrid("/AdminPalette/GetData","#paletteList")}})},onSelectRow:function(t){t&&t!==r&&(e("#paletteList").jqGrid("restoreRow",r),r=t)}}).navGrid("#palettePager",{edit:!1,add:!0,del:!1,search:!1,refresh:!1},{zIndex:100,url:"/AdminPalette/Create",closeOnEscape:!0,closeAfterAdd:!0,afterComplete:function(e){}},{beforeShowForm:function(t){var a={width:e("#gbox_paletteList").width(),height:e("#gbox_paletteList").height()};e("#editmodpaletteList").css({top:a.height/2+"px",left:a.width/2-175+"px"})}})}e(document).ready(function(){l(),s(),c(),o(),n(),r(),a(),t(),e(".popup").dialog({autoOpen:!1}),e(".ui-dialog-titlebar").hide(),e("#tabs").tabs(),e(".admin-page").css({height:e(window).height()-e("footer").height()+"px"})})}(jQuery),function(e){"use strict";function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function a(e,t){var a=n(e,t)?r:o;a(e,t)}var n,o,r;"classList"in document.documentElement?(n=function(e,t){return e.classList.contains(t)},o=function(e,t){e.classList.add(t)},r=function(e,t){e.classList.remove(t)}):(n=function(e,a){return t(a).test(e.className)},o=function(e,t){n(e,t)||(e.className=e.className+" "+t)},r=function(e,a){e.className=e.className.replace(t(a)," ")});var i={hasClass:n,addClass:o,removeClass:r,toggleClass:a,has:n,add:o,remove:r,toggle:a};"function"==typeof define&&define.amd?define(i):e.classie=i}(window);var canvas=document.getElementById("canvas_picker").getContext("2d");popup(),draw(),getPixelColor(),createPDF(),$(document).ready(function(){needlework.editPage.init(),needlework.localization.localizatePage("EditPage")}),needlework.editPage={selectedPalette:"",addNotEditColor:!0,changedColor:"",changedPalette:" ",removePaletteButton:"<input type='button' name='Remove' value='"+Localization.EditPage.RemovePalettes+"' class='RemovePalette'>",editPaletteButton:"<input type='button' name='EditPalette' value='"+Localization.EditPage.EditPalettes+"' class='EditPalette'>",createPaletteElements:function(e,t,a){$("#containerMiddle").append("<div class='Palettes' id='Palettes_"+a+"'></div>"),$("#Palettes_"+a).append("<div class='PaletteName' id='"+e+"'>"+t+"</div>"),$("#Palettes_"+a).append(needlework.editPage.editPaletteButton),$("#Palettes_"+a).append(needlework.editPage.removePaletteButton)},createColorElements:function(e,t,a){$("#colorList").append("<div class='color' id='"+e+"'><div class='Thumbnail'></div><div class='colorName'>"+t+"</div><div class='colorCode'>"+a+"</div></div>"),$("#colorList div:last-child").children(".Thumbnail").css({backgroundColor:a})},init:function(){needlework.editPage.bindActions()},bindActions:function(){$("#AddPalette").click(function(){$("#hidePalette").slideUp(500)}),$("#cancel").click(function(){$("#containerLeft label[for=PaletteName]").text(""),$("#inputPaletteName").val("")}),$("#backToPalette").click(function(){$(window).width()>1100?$("#colorList").animate({left:"-5%"},500):$("#colorList").animate({left:"-105%"},500)}),$("#AddColor").click(function(){needlework.editPage.addNotEditColor=!0,$(window).width()>1100?($("#hideColor").animate({left:"100%"},500),$("#choiceColor").animate({top:"15%"},500)):($("#containerRight").animate({left:"0%"},500),$("#hideColor").animate({left:"100%"},0),$("#choiceColor").animate({top:"10%"},0))}),$("body").on("click",".EditColor",function(e){e.stopPropagation(),needlework.editPage.addNotEditColor=!1,needlework.editPage.changedColor=$(this).parent().parent().prop("id"),$(window).width()>1100?($("#hideColor").animate({left:"100%"},500),$("#choiceColor").animate({top:"15%"},500)):($("#containerRight").animate({left:"0%"},500),$("#hideColor").animate({left:"100%"},0),$("#choiceColor").animate({top:"10%"},0))}),$(".ChangeColor").slideUp(),$("body").on("click",".color",function(){0==$(this).children(".ChangeColor").length&&($(this).append("<div class='ChangeColor'><input type='button' name='EditColor' value='"+Localization.EditPage.EditColor+"' class='EditColor'><input type='button' name='RemoveColor' value='"+Localization.EditPage.RemoveColor+"' class='RemoveColor'></div>"),$(this).children(".ChangeColor").slideUp(0)),$(".color").not(this).children(".ChangeColor").slideUp(500),$(this).children(".ChangeColor").slideToggle(500)}),$(window).keydown(function(e){27==e.which&&($(".ChangeColor").slideUp(),$(".popUpBack").click())})},createNewColor:function(){var e={color:{idpalette:needlework.editPage.selectedPalette,hex:needlework.validation.checkHEX(),name:needlework.validation.checkName("#inputColorName")}};$.ajax({type:"post",dataType:"json",url:"/Palettes/CreateColor",data:e,success:function(e){return"Exception"==e.Result.Status?void $("#inputColorName").next().text("Already exist").css({color:"red"}):(needlework.editPage.createColorElements(e.Id,e.Name,e.Hex),console.log(e),void($(window).width()>1100?($("#hideColor").animate({left:"10%"},500),$("#choiceColor").animate({top:"-100%"},500)):$("#containerRight").animate({left:"105%"},500)))},error:function(e){console.log("Error of add new color")}})},editColor:function(){var e={color:{id:needlework.editPage.changedColor,name:needlework.validation.checkName("#inputColorName"),hex:needlework.validation.checkHEX(),idpalette:needlework.editPage.selectedPalette}};$.ajax({type:"post",dataType:"json",url:"/Palettes/EditColor",data:e,success:function(e){console.log("Color was changed!!!"),console.log(e),$(".color#"+needlework.editPage.changedColor).children(".Thumbnail").css({backgroundColor:needlework.validation.checkHEX()}),$(".color#"+needlework.editPage.changedColor).children(".colorName").text(needlework.validation.checkName("#inputColorName")),$(".color#"+needlework.editPage.changedColor).children(".colorCode").text(needlework.validation.checkHEX()),$(window).width()>1100?($("#hideColor").animate({left:"10%"},500),$("#choiceColor").animate({top:"-100%"},500)):$("#containerRight").animate({left:"105%"},500)},error:function(e){console.log(e)}}),$(".ChangeColor").slideUp()}},$(document).ready(function(){function e(e){$.ajax({type:"get",dataType:"json",url:"/Palettes/GetUserPalettes",data:e,success:function(e){console.log("success123");for(var t=0;t<e.Palettes.length;t++)needlework.editPage.createPaletteElements(e.Palettes[t].Id,e.Palettes[t].Name,t)},error:function(e){console.log(e)}})}$("#choiceColor").css({left:$("#choiceColor").parent().width()/2-$("#choiceColor").width()/2+"px"}),e(),$("#sentPaletteName").on("click",function(){if(needlework.validation.checkName("#inputPaletteName")){var e={name:$("#inputPaletteName").val()};$.ajax({type:"post",dataType:"json",url:"/Palettes/CreatePalette",data:e,success:function(e){return"Exception"==e.Result.Status?void $("#inputPaletteName").next().text("Already exist").css({color:"red"}):(console.log("New Palette was created !"),needlework.editPage.createPaletteElements(e.Id,e.Name),void console.log(e))},error:function(e){console.log(e)}})}else console.log("Oooops");return!1}),$("body").on("click",".PaletteName",function(e){$(".color").remove(),$(window).width()>1100?($("#colorList").animate({left:"33.33%"},500),$("#colorList h2").text($(this).text())):($("#colorList").animate({left:"0%"},500),$("#colorList h2").text($(this).text())),needlework.editPage.selectedPalette=this.id;var t={paletteId:needlework.editPage.selectedPalette};return $.ajax({type:"get",dataType:"json",url:"/Palettes/GetColors",data:t,success:function(e){for(var t=0;t<e.Colors.length;t++)needlework.editPage.createColorElements(e.Colors[t].Id,e.Colors[t].Name,e.Colors[t].Hex);console.log(e)},error:function(e){console.log(e),alert("fail")}}),!1});var t="";$("body").on("click",".RemovePalette",function(e){t=$(e.target).prev().prev().prop("id"),needlework.popups.popUpShow($("#confirmRemovePalette")),$("#confirmRemovePalette label").text(Localization.EditPage.paletteDo+$(".PaletteName#"+t).text()+Localization.EditPage.paletteQuestion)}),$("body").on("click","#cancelRemovepalette",function(){needlework.popups.popUpHide($("#confirmRemovePalette"))}),$("body").on("click","#acceptRemovePalette",function(){console.log(t);var e={id:t};return $.ajax({type:"delete",dataType:"json",url:"/Palettes/RemovePalette",data:e,success:function(e){$(".PaletteName#"+t).parent().remove(),console.log("Yep yep, Removed!"),console.log(e),needlework.popups.popUpHide($("#confirmRemovePalette")),t=""},error:function(e){console.log(e),alert("fail Remove")}}),!1});var a="";$("body").on("click",".RemoveColor",function(e){event.stopPropagation(),a=$(event.target).parent().parent().prop("id"),needlework.popups.popUpShow($("#confirmRemoveColor")),$("#confirmRemoveColor label").text(Localization.EditPage.colorDo+$(".color#"+a).children(".colorName").text()+Localization.EditPage.colorQuestion)}),$("body").on("click","#cancelRemoveColor",function(){needlework.popups.popUpHide($("#confirmRemoveColor"))}),$("body").on("click","#acceptRemoveColor",function(){var e={id:a};$.ajax({type:"delete",dataType:"json",url:"/Palettes/RemoveColor",data:e,success:function(e){$(".color#"+a).remove(),console.log("Yep yep, delete!"),console.log(e),needlework.popups.popUpHide($("#confirmRemoveColor"))},error:function(e){console.log(e),alert("fail")}})});var n=!1;$("body").on("click",".EditPalette",function(e){var t=$(this).prev().children(".ChangePaletteName").val();if(console.log(t),n){if(null==t)return $(".EditPalette").val("Edit name").css({backgroundColor:"#00baff"}),$(".EditPalette").prev().children(".ChangePaletteName").remove(),void(n=!1);var a={palette:{id:$(this).prev().prop("id"),name:t}};$.ajax({type:"post",dataType:"json",url:"/Palettes/EditPalette",data:a,success:function(a){console.log("Yep yep, palette name changed!"),console.log(a),$(e.target).val(Localization.EditPage.EditPalettes).css({backgroundColor:"#00baff"}),$(e.target).prev().text(t),$(e.target).prev().children(".ChangePaletteName").remove(),n=!1},error:function(e){console.log(e),alert("fail")}})}else{needlework.editPage.changedPalette=$(e.target);var o=$(this).prev().text();$(e.target).val(Localization.EditPage.saveNames).css({backgroundColor:"rgb(52, 196, 90)"}),$(e.target).prev().append("<input type='text' class='ChangePaletteName' value='"+o+"' name='"+o+"'>"),n=!0}}),$(window).click(function(e){var t=$(e.target);t.is(needlework.editPage.changedPalette)||($(".EditPalette").val(Localization.EditPage.EditPalettes).css({backgroundColor:"#00baff"}),$(".EditPalette").prev().children(".ChangePaletteName").remove(),n=!1)}),$("body").on("click",".ChangePaletteName",function(e){e.stopPropagation()}),$(window).on("resize",function(){$("#containerRight").css($(window).width()>1100?{top:"0px",left:"66.66%",right:"0px"}:{"float":"left",top:"100%",left:"105%"})}),$("#containerRight input[type=submit]").click(function(e){return needlework.validation.checkRGB()&&needlework.validation.checkHEX()&&needlework.validation.checkName("#inputColorName")&&(console.log("All inputs are correct!"),needlework.editPage.addNotEditColor?needlework.editPage.createNewColor():needlework.editPage.editColor()),!1})}),jQuery.download=function(e,t,a){if(e&&t){t="string"==typeof t?t:JSON.stringify(t),console.log(t);var n="";jQuery.each(t.split("&"),function(){var e=this.split("=");n+='<input type="hidden" name="'+e[0]+'" value="'+e[1]+'" />'}),jQuery('<form action="'+e+'" method="'+(a||"post")+'">'+n+"</form>").appendTo("body").submit().remove()}},$(document).ready(function(){function e(e,t){var a=0,n=$("#tabs ul li:eq("+e+") a").text();$("#tabs ul li:eq("+e+") a").text("");for(var a=0;a<n.length;a++)$("#tabs ul li:eq("+e+") a").append(a%2==0?" "==n[a]?"<div class='myspan3'>s</div>":"<div class='"+t+"1'>"+n[a]+"</div>":" "==n[a]?"<div class='myspan3'>s</div>":"<div class='"+t+"2'>"+n[a]+"</div>")}needlework.localization.localizatePage("HomePage"),e("1","myspan"),e("2","myspanDraw"),$("#top ul li:eq(0)").click(function(){$("body").animate({scrollTop:$(".homePage").offset().top},600)}),$("#crtPattern").click(function(){$("#rightPatternCreation").css({display:"block"}),$("body").animate({scrollTop:$("#rightPatternCreation").offset().top-70},600)}),$(window).resize(function(){$("#editSrcImgDiv").css({width:.65*$(window).width()-$("#tableAndReset").width()+"px"})}),$("#top").css({height:$(window).height()+"px"}),$("#srcImgCanvasDiv").css({height:.7*$(window).height()+"px"}),$("#patternImgCanvasDiv").css({height:.5*$(window).height()+"px"}),$("#editSrcImgDiv").css({width:.8*$(window).width()-$("#tableAndReset").width()+"px"});var t=!1;$("#hamburger").click(function(){t?($("body").animate({left:"0px"},500),$("#leftMenu").animate({left:"-405px"},500),$("html").css({overflowX:"auto"},500),t=!1):($("html").css({overflowX:"hidden"}),$("body").animate({left:"400px"},500),$("#leftMenu").animate({left:"0px"},500),t=!0)});var a=$("#top ul").offset().top;$(window).scroll(function(){$(window).scrollTop()>a&&$("#topMenu").css({display:"block"}),$(window).scrollTop()<=a&&$("#topMenu").css({display:"none"})})}),needlework.admin=needlework.admin||{},needlework.admin.bindActins={click:function(){var e=needlework.admin.utils;$("#updateBtn").click(function(t){e.updateLocalizationData()}),$("i.fa.fa-plus-circle").click(function(){e.addField(this)}),$(document).on("click","i.fa.fa-minus-circle",function(){e.deleteField(this)})},change:function(){var e=needlework.admin.utils;$("#selectLanguage").on("change",function(){e.chooseLanguage()})},resize:function(){$(window).on("resize",function(){var e={height:500,width:$("#tabs").width()-1};$("#usersList").setGridWidth(e.width,!0),$("#paletteList").setGridWidth(e.width,!0),$("#feedbacksList").setGridWidth(e.width,!0)})}},$(document).ready(function(){needlework.localization.localizatePage("AdminPage"),needlework.admin.init()}),needlework.admin={init:function(){var e=this,t=needlework.admin.bindActins;e.load(),t.click(),t.change(),t.resize()},load:function(){var e=this;e.loadTableFeedbacks(),e.loadTableCustomers(),e.loadTablePalettes(),e.loadInformtaionForm(),e.initComponents()},loadTableFeedbacks:function(){var e="/Feedbacks/DeleteFeedbackData/",t="#feedbacksList",a="/Feedbacks/GetFeedbackData/",n=needlework.admin.utils.getGridSize(t);$.ajax({url:a,datatype:"json",data:"{}",contentType:"application/json; charset=utf-8",method:"POST",success:function(o){$("#feedbacksList").jqGrid({datatype:"local",colNames:["Id","First name","Last name","Text","Email","Delete feedback"],colModel:[{name:"Id",index:"Id",key:!0,hidden:!0,sortable:!1},{name:"FirstName",index:"FirstName",width:80,search:!0,sortable:!1,editable:!0},{name:"LastName",index:"LastName",width:80,search:!0,sortable:!1,editable:!0},{name:"Text",index:"Text",width:100,sortable:!0,sorttype:"text",search:!0,sortable:!1,editable:!0},{name:"Email",index:"Email",width:100,sortable:!0,sorttype:"text",search:!0,sortable:!1,editable:!0},{name:"Remove",index:"Remove",formatter:function(n,o,r){return"<button class='deleteBtn' onclick=\"needlework.admin.utils.deleteItem('"+r.Id+"','"+e+"','"+t+"', '"+a+"')\"><i class='fa fa-trash'></i></button>"},search:!1,align:"center"}],data:JSON.parse(o),rowNum:15,pager:"#gridPagerFeedback",width:n.width,height:n.height,rowList:[15,30,45,60],caption:"Feedback list"}).navGrid("#gridPagerFeedback",{edit:!1,add:!1,del:!1,search:!1,refresh:!1}),$("#feedbacksList").jqGrid("filterToolbar",{searchOnEnter:!1})}})},loadTableCustomers:function(){var e="/AdminUser/GetUserData/",t="/AdminUser/DeleteUserData/",a="#usersList",n={},o=-1,r=needlework.admin.utils;n=r.getGridSize(a),$.ajax({url:e,datatype:"json",data:"{}",contentType:"application/json; charset=utf-8",method:"POST",success:function(i){$("#usersList").jqGrid({datatype:"local",colNames:["Id","First name","Last name","Email","Status","Delete user"],colModel:[{name:"Id",index:"Id",key:!0,hidden:!0,sortable:!1},{name:"FirstName",index:"FirstName",width:80,search:!0,sortable:!1,editable:!0},{name:"LastName",index:"LastName",width:80,search:!0,sortable:!1,editable:!0},{name:"Email",index:"Email",width:80,sortable:!0,sorttype:"text",search:!0,sortable:!1,editable:!0},{name:"EmailConfirmed",index:"EmailConfirmed",width:80,search:!0,sortable:!1,editable:!1,formatter:function(e){return e===!1?"�mail not confirmed":"Email confirmed"}},{name:"Remove",index:"Remove",formatter:function(n,o,r){return"<button class='deleteBtn' onclick=\"needlework.admin.utils.deleteItem('"+r.Id+"','"+t+"','"+a+"', '"+e+"')\"><i class='fa fa-trash'></i></button>"},search:!1,align:"center"}],data:JSON.parse(i),rowNum:15,pager:"#gridPager",width:n.width,height:n.height,rowList:[15,30,45,60],viewrecords:!0,search:!0,caption:"User list",editurl:"/AdminUser/GridSave/",ondblClickRow:function(t){$("#usersList").jqGrid("editRow",t,{keys:!0,oneditfunc:function(){},successfunc:function(t){r.reloadJQGrid(a,e)}})},onSelectRow:function(e){e&&e!==o&&($("#usersList").jqGrid("restoreRow",o),o=e)}}).navGrid("#gridPager",{edit:!1,add:!1,del:!1,search:!1,refresh:!1},{beforeShowForm:function(e){var t={width:$("#gbox_usersList").width(),height:$("#gbox_usersList").height()};$("#editmodusersList").css({top:t.height/2+"px",left:t.width/2-175+"px"})}}),$("#usersList").jqGrid("filterToolbar",{searchOnEnter:!1})}})},loadTablePalettes:function(){var e="#paletteList",t=needlework.admin.utils,a=t.getGridSize(e),n="/AdminPalette/GetData",o="/Palettes/RemovePalette",r=-1;$("#paletteList").jqGrid({url:n,datatype:"json",mtype:"post",colNames:["Id","Name","Remove palette"],colModel:[{key:!0,hidden:!0,name:"Id",index:"Id",editable:!0},{key:!1,name:"Name",index:"Name",editable:!0},{name:"Remove",index:"Remove",formatter:function(t,a,r){return"<button class='deleteBtn' onclick=\"needlework.admin.utils.deleteItem('"+r.Id+"','"+o+"','"+e+"', '"+n+"')\"><i class='fa fa-trash'></i></button>"},search:!1,align:"center"}],pager:"#palettePager",rowNum:10,rowList:[10,20,30,40],viewrecords:!0,width:500,caption:"Palette List",emptyrecords:"No records to display",jsonReader:{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,Id:"0"},width:a.width,height:a.height,multiselect:!1,editurl:"/Palettes/EditPalette",ondblClickRow:function(a){$("#paletteList").jqGrid("editRow",a,{keys:!0,oneditfunc:function(){},successfunc:function(a){t.reloadJQGrid(e,n)}})},onSelectRow:function(e){e&&e!==r&&($("#paletteList").jqGrid("restoreRow",r),r=e)},subGrid:!0,subGridRowExpanded:function(e,t){var n;$.ajax({url:"/Palettes/GetColors/",datatype:"json",data:{paletteId:t},contentType:"application/json; charset=utf-8",method:"GET",success:function(t){n=e+"_t",$("#"+e).html("<table id='"+n+"' class='scroll'></table>"),$("#"+n).jqGrid({datatype:"local",data:t.Colors,colNames:["id","Name","Hex","Thubnail"],colModel:[{name:"Id",index:"Id",width:80,key:!0,hidden:!0},{name:"Name",index:"Name",width:130},{name:"Hex",index:"Hex",width:130},{name:"Hex",index:"Hex",width:130,formatter:function(e,t,a){return'<span style="width:10px;margin: 0 auto; height:10px;display:block;background:'+e+'"></span>'},align:"center"}],width:a.width-50,rowNum:10,sortname:"num",sortorder:"asc"})}})}}).navGrid("#palettePager",{edit:!1,add:!0,del:!1,search:!1,refresh:!1},{zIndex:100,url:"/Palettes/CreatePalette",closeOnEscape:!0,closeAfterAdd:!0,afterComplete:function(e){}},{beforeShowForm:function(e){var t={width:$("#gbox_paletteList").width(),height:$("#gbox_paletteList").height()};$("#editmodpaletteList").css({top:t.height/2+"px",left:t.width/2-175+"px"})}})},loadInformtaionForm:function(){for(var e=[Localization.InformationPage.IPFirstBlockText.length,Localization.InformationPage.IPSecondBlockText.length,Localization.InformationPage.IPThirdBlockText.length],t=["IPFirstBlockText","IPSecondBlockText","IPThirdBlockText"],a="",n=0,o=0;o<t.length;o++){a="<span id='item' class='minus'><input type='type' name='"+t[o]+"'/><i class='fa fa-minus-circle'></i></span>";for(var n=0;n<e[o]-2;n++)$(".second-level."+t[o]+" > .multiple").append(a);n=0,$(".multiple input[name="+t[o]+"]").each(function(){$(this).val(Localization.InformationPage[t[o]][n]),n++})}$(".first-level input[name=IPFirstBlockName]").val(Localization.InformationPage.IPSecondBlockName),$(".first-level input[name=IPSecondBlockName]").val(Localization.InformationPage.IPSecondBlockName),$(".first-level input[name=IPThirdBlockName]").val(Localization.InformationPage.IPThirdBlockName),$(".first-level input[name=IPtitle]").val(Localization.InformationPage.IPTitle)},initComponents:function(){$(".popup").dialog({autoOpen:!1}),$("#tabs").tabs(),$(".admin-page").css({height:$(window).height()-$("footer").height()+"px"})}},needlework.admin=needlework.admin||{},needlework.admin.utils={getGridSize:function(e){return tableSize={height:500,width:$("#tabs").width()-20}},reloadJQGrid:function(e,t){$.ajax({url:t,method:"POST",datatype:"json",contentType:"application/json; charset=utf-8",async:!0,success:function(t){$(e).jqGrid("clearGridData"),$(e).jqGrid("setGridParam",{datatype:"local",data:JSON.parse(t)}).trigger("reloadGrid")},error:function(){}})},deleteItem:function(e,t,a,n){var o=this;$.ajax({url:t,data:{id:e},type:"delete",success:function(){o.reloadJQGrid(a,n)}})},chooseLanguage:function(){var e={lang:$("#selectLanguage").prop("value")};$.ajax({type:"post",dataType:"json",url:"/Home/ChangeCulture",data:e,success:function(e){location.reload()},error:function(e){console.log("Change language error.")}})},updateLocalizationData:function(){var e,t=($("#localizationForm").serializeArray(),[]),a=[],n=[],o=Localization;e=function(){var e=document.cookie.match("(^|;) ?lang=([^;]*)(;|$)");return e?unescape(e[2]):null},event.preventDefault(),$(".multiple input[name=IPFirstBlockText]").each(function(){t.push($(this).val())}),$(".multiple input[name=IPSecondBlockText]").each(function(){a.push($(this).val())}),$(".multiple input[name=IPThirdBlockText]").each(function(){n.push($(this).val())}),o.InformationPage={IPTitle:$("input[name=IPtitle]").val(),IPFirstBlockName:$("input[name=IPFirstBlockName]").val(),IPFirstBlockText:t,IPSecondBlockName:$("input[name=IPSecondBlockName]").val(),IPSecondBlockText:a,IPThirdBlockName:$("input[name=IPThirdBlockName]").val(),IPThirdBlockText:n},$.ajax({url:"Localization/Update",type:"POST",data:{language:e(),json:JSON.stringify(o)},success:function(e){},error:function(e,t,a){}})},addField:function(e){var t="second-level IPFirstBlock",a="second-level IPSecondBlock",n="second-level IPThirdBlock",o="",r="";getCurrentBlock=$(e).parents().eq(2).attr("class"),getCurrentBlock==t?r="IPFirstBlockText":getCurrentBlock==a?r="IPSecondBlockText":getCurrentBlock==n&&(r="IPThirdBlockText"),o="<span id='item' class='minus'><input type='type' name='"+r+"'/><i class='fa fa-minus-circle'></i></span>",$(e).parent().parent().append(o)},deleteField:function(e){$(e).parent().remove()}},needlework.createPDFJs={createPDF:function(){var e={},t=this;html2canvas($("#patternImgCanvas"),{onrendered:function(){var a={patternImage:$("#patternImgCanvas").get(0),originalImage:$("#srcImgCanvas").get(0),colorsReport:$("#colorsReport").get(0)};e=t.createDOC(a),e.save("sample-file.pdf")}})},getInMm:function(e){var t=.264583;return"number"==typeof e?e*t:"Value is not a number"},createDOC:function(e){var t={},a=210,n=this,o={pattern:{width:e.patternImage.width,height:e.patternImage.height,data:e.patternImage.toDataURL("image/jpg")},image:{width:e.originalImage.width,height:e.originalImage.height,data:e.originalImage.toDataURL("image/jpg")},colorsList:{height:e.colorsReport.height,width:e.colorsReport.width,context:e.colorsReport.getContext("2d"),data:e.colorsReport.toDataURL("image/jpg")}};return t=n.getInMm(o.pattern.width)<a&&n.getInMm(o.image.width)<a?n.writeInA4Format(o):n.writeInSizebleFormat(o)},cutColorReport:function(e){var t=e.value,a=e.colorsList,n=e.doc;$(".uploadedSection").append("<canvas id = 'hiddenCanvas' style=\"display:none\" width="+a.width+" height="+t.height+"></canvas>");var o=$("#hiddenCanvas").get(0);hiddenContext=o.getContext("2d"),space=5,self=this,reportCount=Math.trunc(t.width/a.width),reportCount=Math.trunc(t.width/(a.width+space*reportCount)),reportOnPage=0,n.setFontSize(12),n.text(5,7,"Colors list:");for(var r=0;r<a.height;r+=t.height)hiddenData=a.context.getImageData(0,r,a.width,r+t.height),hiddenContext.putImageData(hiddenData,0,0),reportOnPage<=reportCount?(n.addImage(o.toDataURL("image/png"),"PNG",self.getInMm(a.width+space)*reportOnPage+5,8),reportOnPage++):(n.addPage(),n.text(5,7,"Colors list:"),reportOnPage=0,n.addImage(o.toDataURL("image/png"),"PNG",self.getInMm(a.width+space)*reportOnPage+5,8),reportOnPage++);return $("#hiddenCanvas").remove(),n},addPatternAndOriginal:function(e,t){return t.addImage(e.patternImage,"JPEG",5,5),t.addPage(),t.setFontSize(14),t.text(5,7,"Original image"),t.addImage(e.originalImage,"JPEG",5,10),t.addPage(),t},writeInA4Format:function(e){var t={},a=0,n={width:793.7017,height:1122.521},o={width:603,height:1040},r=this,i=e.pattern,s=e.image,l=e.colorsList,c={patternImage:i.data,originalImage:s.data};return t=new jsPDF("p","mm","a4"),a=(r.getInMm(n.width)-r.getInMm(i.width))/2,t.addImage(c.patternImage,"JPEG",a,10),t.addPage(),t.setFontSize(14),t.text(5,7,"Original image"),t.addImage(c.originalImage,"JPEG",5,10),t.addPage(),t=r.cutColorReport(o,l,t)},writeInSizebleFormat:function(e){var t={},a=e.pattern,n=e.image,o=e.colorsList,r={patternImage:a.data,originalImage:n.data},s={value:{},colorsList:o,doc:{}},l=this,c=a.width>=a.height?"l":"p";if(a.width>n.width){for(t=new jsPDF(c,"mm",[l.getInMm(a.width)+10,l.getInMm(a.height)+10]),t=l.addPatternAndOriginal(r,t),i=0;i<=100;i++)a.height%80!=0&&a.height--;s.doc=t,s.value=a,t=l.cutColorReport(s)}else{for(t=new jsPDF(c,"mm",[l.getInMm(n.width)+10,l.getInMm(n.height)+20]),i=0;i<=100;i++)n.height%80!=0&&n.height--;s.doc=t,s.value=n,t=l.addPatternAndOriginal(r,t),t=l.cutColorReport(s)}return t}},needlework.createPDFJs.bindActions={savePDF:function(){$(".savePattern").click(function(){needlework.createPDFJs.createPDF()})}},needlework.createPDFJs.bindActions.savePDF(),$(document).ready(function(){needlework.editPage.init(),needlework.localization.localizatePage("EditPage")}),needlework.editPage={selectedPalette:"",addNotEditColor:!0,changedColor:"",changedPalette:" ",removePaletteButton:"<input type='button' name='Remove' value='"+Localization.EditPage.RemovePalettes+"' class='RemovePalette'>",editPaletteButton:"<input type='button' name='EditPalette' value='"+Localization.EditPage.EditPalettes+"' class='EditPalette'>",removedPalette:"",removedColor:"",editPaletteName:!1,createPaletteElements:function(e,t,a){$("#containerMiddle").append("<div class='Palettes' id='Palettes_"+a+"'></div>"),$("#Palettes_"+a).append("<div class='PaletteName' id='"+e+"'>"+t+"</div>"),$("#Palettes_"+a).append(needlework.editPage.editPaletteButton),$("#Palettes_"+a).append(needlework.editPage.removePaletteButton)},createColorElements:function(e,t,a){$("#colorList").append("<div class='color' id='"+e+"'><div class='Thumbnail'></div><div class='colorName'>"+t+"</div><div class='colorCode'>"+a+"</div></div>"),$("#colorList div:last-child").children(".Thumbnail").css({backgroundColor:a})},init:function(){needlework.editPage.bindActions()},bindActions:function(){function e(e){$.ajax({type:"get",dataType:"json",url:"/Palettes/GetUserPalettes",data:e,success:function(e){for(var t=0;t<e.Palettes.length;t++)needlework.editPage.createPaletteElements(e.Palettes[t].Id,e.Palettes[t].Name,t)},error:function(e){}})}$("#AddPalette").click(function(){$("#hidePalette").slideUp(500)}),$("#cancel").click(function(){$("#containerLeft label[for=PaletteName]").text(""),$("#inputPaletteName").val("")}),$("#backToPalette").click(function(){$(window).width()>1100?$("#colorList").animate({left:"-5%"},500):$("#colorList").animate({left:"-105%"},500)}),$("#AddColor").click(function(){needlework.editPage.addNotEditColor=!0,$(window).width()>1100?($("#hideColor").animate({left:"100%"},500),$("#choiceColor").animate({top:"15%"},500)):($("#containerRight").animate({left:"0%"},500),$("#hideColor").animate({left:"100%"},0),$("#choiceColor").animate({top:"10%"},0))}),$("body").on("click",".EditColor",function(e){e.stopPropagation(),needlework.editPage.addNotEditColor=!1,needlework.editPage.changedColor=$(this).parent().parent().prop("id"),
$(window).width()>1100?($("#hideColor").animate({left:"100%"},500),$("#choiceColor").animate({top:"15%"},500)):($("#containerRight").animate({left:"0%"},500),$("#hideColor").animate({left:"100%"},0),$("#choiceColor").animate({top:"10%"},0))}),$(".ChangeColor").slideUp(),$("body").on("click",".color",function(){0==$(this).children(".ChangeColor").length&&($(this).append("<div class='ChangeColor'><input type='button' name='EditColor' value='"+Localization.EditPage.EditColor+"' class='EditColor'><input type='button' name='RemoveColor' value='"+Localization.EditPage.RemoveColor+"' class='RemoveColor'></div>"),$(this).children(".ChangeColor").slideUp(0)),$(".color").not(this).children(".ChangeColor").slideUp(500),$(this).children(".ChangeColor").slideToggle(500)}),$(window).keydown(function(e){27==e.which&&($(".ChangeColor").slideUp(),$(".popUpBack").click())}),e(),$("#sentPaletteName").on("click",function(){if(needlework.validations.checkName("#inputPaletteName")){var e={name:$("#inputPaletteName").val()};$.ajax({type:"post",dataType:"json",url:"/Palettes/CreatePalette",data:e,success:function(e){return"Exception"==e.Result.Status?void $("#inputPaletteName").next().text("Already exist").css({color:"red"}):void needlework.editPage.createPaletteElements(e.Id,e.Name)},error:function(e){}})}return!1}),$("body").on("click",".PaletteName",function(e){$(".color").remove(),$(window).width()>1100?($("#colorList").animate({left:"33.33%"},500),$("#colorList h2").text($(this).text())):($("#colorList").animate({left:"0%"},500),$("#colorList h2").text($(this).text())),needlework.editPage.selectedPalette=this.id;var t={paletteId:needlework.editPage.selectedPalette};return $.ajax({type:"get",dataType:"json",url:"/Palettes/GetColors",data:t,success:function(e){for(var t=0;t<e.Colors.length;t++)needlework.editPage.createColorElements(e.Colors[t].Id,e.Colors[t].Name,e.Colors[t].Hex)},error:function(e){}}),!1}),$("body").on("click",".RemovePalette",function(e){needlework.editPage.removedPalette=$(e.target).prev().prev().prop("id"),needlework.popups.popUpShow($("#confirmRemovePalette")),$("#confirmRemovePalette label").text(Localization.EditPage.paletteDo+$(".PaletteName#"+needlework.editPage.removedPalette).text()+Localization.EditPage.paletteQuestion)}),$("body").on("click","#cancelRemovepalette",function(){needlework.popups.popUpHide($("#confirmRemovePalette"))}),$("body").on("click","#acceptRemovePalette",function(){var e={id:needlework.editPage.removedPalette};return $.ajax({type:"delete",dataType:"json",url:"/Palettes/RemovePalette",data:e,success:function(e){$(".PaletteName#"+needlework.editPage.removedPalette).parent().remove(),needlework.popups.popUpHide($("#confirmRemovePalette")),needlework.editPage.removedPalette=""},error:function(e){}}),!1}),$("body").on("click",".RemoveColor",function(e){event.stopPropagation(),needlework.editPage.removedColor=$(event.target).parent().parent().prop("id"),needlework.popups.popUpShow($("#confirmRemoveColor")),$("#confirmRemoveColor label").text(Localization.EditPage.colorDo+$(".color#"+needlework.editPage.removedColor).children(".colorName").text()+Localization.EditPage.colorQuestion)}),$("body").on("click","#cancelRemoveColor",function(){needlework.popups.popUpHide($("#confirmRemoveColor"))}),$("body").on("click","#acceptRemoveColor",function(){var e={id:needlework.editPage.removedColor};$.ajax({type:"delete",dataType:"json",url:"/Palettes/RemoveColor",data:e,success:function(e){$(".color#"+needlework.editPage.removedColor).remove(),needlework.popups.popUpHide($("#confirmRemoveColor"))},error:function(e){}})}),$("body").on("click",".EditPalette",function(e){var t=$(this).prev().children(".ChangePaletteName").val();if(needlework.editPage.editPaletteName){if(null==t)return $(".EditPalette").val("Edit name").css({backgroundColor:"#00baff"}),$(".EditPalette").prev().children(".ChangePaletteName").remove(),void(needlework.editPage.editPaletteName=!1);var a={palette:{id:$(this).prev().prop("id"),name:t}};$.ajax({type:"post",dataType:"json",url:"/Palettes/EditPalette",data:a,success:function(a){needlework.validations.checkName(".ChangePaletteName")&&($(e.target).val(Localization.EditPage.EditPalettes).css({backgroundColor:"#00baff"}),$(e.target).prev().text(t),$(e.target).prev().children(".ChangePaletteName").remove(),needlework.editPage.editPaletteName=!1)},error:function(e){}})}else{needlework.editPage.changedPalette=$(e.target);var n=$(this).prev().text();$(e.target).val(Localization.EditPage.saveNames).css({backgroundColor:"rgb(52, 196, 90)"}),$(e.target).prev().append("<input type='text' class='ChangePaletteName' value='"+n+"' name='"+n+"'>"),needlework.editPage.editPaletteName=!0}}),$(window).click(function(e){var t=$(e.target);t.is(needlework.editPage.changedPalette)||($(".EditPalette").val(Localization.EditPage.EditPalettes).css({backgroundColor:"#00baff"}),$(".EditPalette").prev().children(".ChangePaletteName").remove(),needlework.editPage.editPaletteName=!1)}),$("body").on("click",".ChangePaletteName",function(e){e.stopPropagation()}),$("#containerRight input[type=submit]").click(function(e){return needlework.validations.checkRGB()&&needlework.validations.checkHEX()&&needlework.validations.checkName("#inputColorName")&&(needlework.editPage.addNotEditColor?needlework.editPage.createNewColor():needlework.editPage.editColor()),!1}),$("#choiceColor").css({left:$("#choiceColor").parent().width()/2-$("#choiceColor").width()/2+"px"}),$(window).on("resize",function(){$("#containerRight").css($(window).width()>1100?{top:"0px",left:"66.66%",right:"0px"}:{"float":"left",top:"100%",left:"105%"})})},createNewColor:function(){var e={color:{idpalette:needlework.editPage.selectedPalette,hex:needlework.validations.checkHEX(),name:needlework.validations.checkName("#inputColorName")}};$.ajax({type:"post",dataType:"json",url:"/Palettes/CreateColor",data:e,success:function(e){return"Exception"==e.Result.Status?void $("#inputColorName").next().text("Already exist").css({color:"red"}):(needlework.editPage.createColorElements(e.Id,e.Name,e.Hex),void($(window).width()>1100?($("#hideColor").animate({left:"10%"},500),$("#choiceColor").animate({top:"-100%"},500)):$("#containerRight").animate({left:"105%"},500)))},error:function(e){}})},editColor:function(){var e={color:{id:needlework.editPage.changedColor,name:needlework.validations.checkName("#inputColorName"),hex:needlework.validations.checkHEX(),idpalette:needlework.editPage.selectedPalette}};$.ajax({type:"post",dataType:"json",url:"/Palettes/EditColor",data:e,success:function(e){$(".color#"+needlework.editPage.changedColor).children(".Thumbnail").css({backgroundColor:needlework.validations.checkHEX()}),$(".color#"+needlework.editPage.changedColor).children(".colorName").text(needlework.validations.checkName("#inputColorName")),$(".color#"+needlework.editPage.changedColor).children(".colorCode").text(needlework.validations.checkHEX()),$(window).width()>1100?($("#hideColor").animate({left:"10%"},500),$("#choiceColor").animate({top:"-100%"},500)):$("#containerRight").animate({left:"105%"},500)},error:function(e){}}),$(".ChangeColor").slideUp()}},$(document).ready(function(){needlework.hamburgermenu.init()}),needlework.hamburgermenu={init:function(){var e=!1;$("#hamburger").click(function(){e?($("body").animate({left:"0px"},500),$("#leftMenu").animate({left:"-405px"},500),$("#hamburger").animate({left:"100px"},500),$("html").css({overflowX:"auto"},500),e=!1):($("html").css({overflowX:"hidden"}),$("body").animate({left:"400px"},500),$("#leftMenu").animate({left:"0px"},500),$("#hamburger").animate({left:"500px"},500),e=!0)}),function(){function e(e,t){this.el=e,this.init()}e.prototype.init=function(){this.shapeEl=this.el.querySelector("span.morph-shape");var e=Snap(this.shapeEl.querySelector("svg"));this.pathEl1=e.select("path:nth-of-type(1)"),this.pathEl2=e.select("path:nth-of-type(2)"),this.paths={reset:{path1:this.pathEl1.attr("d"),path2:this.pathEl2.attr("d")},open:this.shapeEl.getAttribute("data-morph-open").split(";"),close:this.shapeEl.getAttribute("data-morph-close").split(";")},this.isOpen=!1,this.initEvents()},e.prototype.initEvents=function(){this.el.addEventListener("click",this.toggle.bind(this))},e.prototype.toggle=function(){var e=this,t=this.isOpen?this.paths.close:this.paths.open;e.isOpen?setTimeout(function(){classie.remove(e.el,"menu-button--open")},200):setTimeout(function(){classie.add(e.el,"menu-button--open")},200),this.pathEl1.stop().animate({path:t[0]},300,mina.easeout,function(){e.pathEl1.stop().animate({path:e.paths.reset.path1},800,mina.elastic)}),this.pathEl2.stop().animate({path:t[1]},300,mina.easeout,function(){e.pathEl2.stop().animate({path:e.paths.reset.path2},800,mina.elastic)}),this.isOpen=!this.isOpen},new e(document.getElementById("hamburger"))}()}},needlework.homepage=needlework.homepage||{},needlework.homepage.algorithm={globals:needlework.homepage.globals,getContrastPattern:function(e){var t,a,n,o,r,i,s,l=this,c=e.colCount,d=e.pallete,u=e.scale;return t=l.getAvgColors(),"AllCol"==$("#palletteSel").val()&&(d=l.getPalleteOfMatrix({srcMatrix:t})),a=l.transSrcToPallet({srcImage:t,pallete:d}),c=c>d.length?d.length:c,c=c>a.data.length/4?a.data.length/4:c,n=l.getPalleteOfMatrixAndPal({srcMatrix:a,pallete:d}),o=l.getMostContrastCol({pallete:n}),r=l.getFirstNumPallete({palletByPattern:n,contrList:o,colCount:c}),i=l.transSrcToPallet({srcImage:t,pallete:r}),s=l.getColCountInSrcByPal({pattern:i,pallete:r}),i=l.drawPattern({imgData:i,scale:u}),{pattern:i,colReport:s,usedPallete:r}},getAvgPattern:function(e){var t,a,n,o,r,i,s,l=this,c=e.colCount,d=e.pallete,u=e.scale;return t=l.getAvgColors(),"AllCol"==$("#palletteSel").val()&&(d=l.getPalleteOfMatrix({srcMatrix:t})),a=l.transSrcToPallet({srcImage:t,pallete:e.pallete}),n=l.getPalleteOfMatrixAndPal({srcMatrix:a,pallete:d}),c=c>d.length?d.length:c,c=c>a.data.length/4?a.data.length/4:c,o=l.getColCountInSrcByPal({pattern:a,pallete:d}),r=l.getPalleteByColCount({colCount:c,pallete:d,order:o}),i=l.transSrcToPallet({srcImage:t,pallete:r}),s=l.getColCountInSrcByPal({pattern:i,pallete:r}),i=l.drawPattern({imgData:i,scale:u}),{pattern:i,colReport:s,usedPallete:r}},getAvgColors:function(){var e,t=document.getElementById("srcImgCanvas"),a=t.getContext("2d"),n=needlework.homepage.utils.getStitchSize(),o=a.getImageData(0,0,t.width,t.height),r=new ImageData(Math.trunc(t.width/n),Math.trunc(t.height/n)),i=G=B=0,s=n*n,l=j=k=0;for(l=0;l<o.height;l+=n)for(j=0;j<o.width;j+=n){for(i=G=B=0,k=0;k<s;k++)e=(l+Math.trunc(k/n))*o.width*4+4*(j+k%n),i+=o.data[e],G+=o.data[e+1],B+=o.data[e+2];i=Math.trunc(i/s),G=Math.trunc(G/s),B=Math.trunc(B/s),r.data[Math.trunc(l/n)*r.width*4+4*Math.trunc(j/n)]=i,r.data[Math.trunc(l/n)*r.width*4+4*Math.trunc(j/n)+1]=G,r.data[Math.trunc(l/n)*r.width*4+4*Math.trunc(j/n)+2]=B,r.data[Math.trunc(l/n)*r.width*4+4*Math.trunc(j/n)+3]=255}return r},transSrcToPallet:function(e){var t=this,a=e.srcImage,n=e.pallete;for(i=0,rgb=void 0,i=0;i<a.data.length;i+=4)rgb=[a.data[i],a.data[i+1],a.data[i+2]],rgb=t.getSimilarColor({srcColor:rgb,pallete:n}),a.data[i]=rgb[0],a.data[i+1]=rgb[1],a.data[i+2]=rgb[2];return a},getSimilarColor:function(e){var t,a,n=this,o=e.srcColor,r=e.pallete;return t=n.getSimilarColorsArr({srcColorRGB:o,pallete:r}),a=n.findSimilarColor({srcColor:o,similarColors:t})},getSimilarColorsArr:function(e){var t=minG=minB=255,a=[],n=e.pallete,o=e.srcColorRGB,r=0,i=0;for(r=0;r<n.length;r++)Math.abs(n[r][0]-o[0])<t&&(t=Math.abs(n[r][0]-o[0])),Math.abs(n[r][1]-o[1])<minG&&(minG=Math.abs(n[r][1]-o[1])),Math.abs(n[r][2]-o[2])<minB&&(minB=Math.abs(n[r][2]-o[2]));for(r=0;r<n.length;r++)Math.abs(n[r][0]-o[0])==t&&(i=a.length,a[i]=[],a[i][0]=n[r][0],a[i][1]=n[r][1],a[i][2]=n[r][2]),Math.abs(n[r][1]-o[1])==minG&&(i=a.length,a[i]=[],a[i][0]=n[r][0],a[i][1]=n[r][1],a[i][2]=n[r][2]),Math.abs(n[r][2]-o[2])==minB&&(i=a.length,a[i]=[],a[i][0]=n[r][0],a[i][1]=n[r][1],a[i][2]=n[r][2]);return a},findSimilarColor:function(e){var t=76500,a=e.similarColors,n=e.srcColor,o=-1,r=0,i=0;for(r=0;r<a.length;r++)i=.3*Math.abs(a[r][0]-n[0])+.59*Math.abs(a[r][1]-n[1])+.11*Math.abs(a[r][2]-n[2]),t>i&&(t=i,o=r);return a[o]},getPalleteOfMatrixAndPal:function(e){var t,a,n=this,o=[],r=[],i=e.srcMatrix,s=e.pallete,l=0,c=0;for(l=0;l<i.data.length;l+=4)o[l]=[],o[l][0]=l,t=[i.data[l],i.data[l+1],i.data[l+2]],a=n.isColInPallete({colRGB:t,pallete:s}),n.isColInPallete({colRGB:t,pallete:s})&&n.isColNotInPallete({colRGB:t,pallete:r})&&(c=r.length,r[c]=[],r[c][0]=a[1][0],r[c][1]=a[1][1],r[c][2]=a[1][2],r[c][3]=a[1][3]);return r},getPalleteOfMatrix:function(e){var t,a=this,n=[],o=e.srcMatrix,r=0,i=0;for(r=0;r<o.data.length;r+=4)t=[o.data[r],o.data[r+1],o.data[r+2]],a.isColNotInPallete({colRGB:t,pallete:n})&&(i=n.length,n[i]=[],n[i][0]=t[0],n[i][1]=t[1],n[i][2]=t[2],n[i][3]="R: "+t[0]+"  G: "+t[1]+"  B: "+t[2]);return n},isColInPallete:function(e){var t=e.pallete,a=e.colRGB,t=e.pallete,n=0;for(n=0;n<t.length;n++)if(t[n][0]==a[0]&&t[n][1]==a[1]&&t[n][2]==a[2])return[!0,t[n]];return[!1,a]},isColNotInPallete:function(e){var t=e.pallete,a=e.colRGB,n=0;for(n=0;n<t.length;n++)if(t[n][0]==a[0]&&t[n][1]==a[1]&&t[n][2]==a[2])return!1;return!0},getMostContrastCol:function(e){function t(e,t){return e[0]===t[0]?0:e[0]<t[0]?1:-1}var a,n=[],o=e.pallete,r=0;for(r=0;r<o.length;r++)n[r]=[],a=[o[r][0],o[r][1],o[r][2]],n[r][0]=needlework.homepage.utils.getColDiff({colRGB:a,pallete:o}),n[r][1]=r;return n.sort(t),n},getFirstNumPallete:function(e){var t=[],a=e.colCount,n=e.palletByPattern,o=e.contrList,r=0;for(a=a>o.length?o.length:a,r=0;a>r;r++)t[r]=[],t[r][0]=n[o[r][1]][0],t[r][1]=n[o[r][1]][1],t[r][2]=n[o[r][1]][2],t[r][3]=n[o[r][1]][3];return t},drawPattern:function(e){var t=e.imgData.width*e.scale,a=e.imgData.height*e.scale,n=Math.pow(e.scale,2),o=new ImageData(t,a),r=e.imgData,i=e.scale,s=j=k=0,l=0,c=0;for(s=0;s<r.height;s++)for(j=0;j<r.width;j++)for(c=s*r.width*4+4*j,k=0;k<n;k++)l=s*i*t*4+j*i*4+Math.trunc(k/i)*t*4+k%i*4,o.data[l]=r.data[c],o.data[l+1]=r.data[c+1],o.data[l+2]=r.data[c+2],o.data[l+3]=255;for(s=1;s<r.height;s++)for(j=0;j<o.width;j++)o.data[s*i*t*4+4*j]=0,o.data[s*i*t*4+4*j+1]=0,o.data[s*i*t*4+4*j+2]=66,o.data[s*i*t*4+4*j+3]=255;for(s=0;s<r.width;s++)for(j=0;j<2*o.height;j++)o.data[s*i*t*4+j*i*4]=0,o.data[s*i*t*4+j*i*4+1]=0,o.data[s*i*t*4+j*i*4+2]=66,o.data[s*i*t*4+j*i*4+3]=255;return o},getColCountInSrcByPal:function(e){function t(e,t){return e[0]===t[0]?0:e[0]<t[0]?1:-1}for(var a,n,o=this,r=[],i=e.pallete,s=e.pattern,l=0,l=0;l<i.length;l++)r[l]=[],r[l][0]=0,r[l][1]=l;for(l=0;l<s.data.length;l+=4)a=[s.data[l],s.data[l+1],s.data[l+2]],n=o.checkColInPal({colRGB:a,pallete:i}),-1!=n&&(r[n][0]+=1);return r.sort(t),r},checkColInPal:function(e){var t=this,a=e.colRGB,n=e.pallete,o=0;for(o=0;o<n.length;o++)if(t.compareTwoCol({col1:a,col2:n[o]}))return o;return-1},compareTwoCol:function(e){var t=e.col1,a=e.col2;return t[0]==a[0]&&t[1]==a[1]&&t[2]==a[2]?!0:!1},getPalleteByColCount:function(e){var t=[],a=e.colCount,n=e.pallete,o=e.order,r=0;for(r=0;a>r;r++)t[r]=[],t[r][0]=n[o[r][1]][0],t[r][1]=n[o[r][1]][1],t[r][2]=n[o[r][1]][2],t[r][3]=n[o[r][1]][3];return t},testAlert:function(){alert("asdasd")}},needlework.homepage=needlework.homepage||{},needlework.homepage.drawing={fillCanvasWImg:function(e,t){var a=$("#"+e).get(0),n=a.getContext("2d"),o=this,r=new Image,i=needlework.homepage.globals,s=needlework.homepage.utils;n.clearRect(0,0,a.width,a.height),r.onload=function(){a.width=r.width,a.height=r.height,n.drawImage(this,0,0,r.width,r.height),o.fillBuffers(),0!=i.prevTab&&s.updateTab()},r.src=t,s.showBlocks(e),$("body").animate({scrollTop:$("#tabs").offset().top-70},600)},fillBuffers:function(){var e=this;e.fillSourceImgBuffer(),e.fillDrawImgBuffer()},fillSourceImgBuffer:function(){var e=$("#srcImgCanvasBuffer").get(0),t=$("#srcImgCanvas").get(0),a=new Image;a.src=t.toDataURL(),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(a,0,0),e.style.display="none"},fillDrawImgBuffer:function(){var e=$("#drawImgCanvasBuffer").get(0),t=$("#srcImgCanvasBuffer").get(0),a=new Image;a.src=t.toDataURL(),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(a,0,0),e.style.display="none"},fillAdjImgFromBuffer:function(){var e=$("#adjImgCanvasBuffer").get(0),t=$("#drawImgCanvasBuffer").get(0),a=new Image;a.src=t.toDataURL(),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(a,0,0),e.style.display="none"},loadEditCanvas:function(){var e=$("#adjImgCanvasBuffer").get(0),t=new Image,a=$("#editImgCanvas").get(0);t.src=e.toDataURL(),a.width=e.width,a.height=e.height,a.getContext("2d").drawImage(t,0,0)},fillCanvasWImgFromUrl:function(e){var t,a,n=$("#imgUrl").val(),o=new Image;o.onload=function(){t=document.createElement("canvas"),t.width=this.width,t.height=this.height,t.getContext("2d").drawImage(o,0,0),a=t.toDataURL(),needlework.homepage.drawing.fillCanvasWImg("srcImgCanvas",a)},o.setAttribute("crossOrigin","anonymous"),o.src=n},fillCanvasWImgFromFile:function(e){$("#srcImgCanvas").get(0).getContext("2d");img=new Image,self=this,img.onload=function(){needlework.homepage.drawing.fillCanvasWImg("srcImgCanvas",img.src)},img.src=URL.createObjectURL(e.target.files[0])},fillCanvasText:function(e,t){var a=$("#"+e).get(0),n=a.getContext("2d");n.font="32px Arial",n.fillText(t,a.width/2,a.height/2)},createReportByCol:function(e){var t,a,n=$("#colorsReport").get(0),o=n.getContext("2d"),r=$("#colorsReportForPDF").get(0),i=r.getContext("2d"),s=(e.colCount,e.order),l=e.pallete,c=0;for(n.width=200,n.height=80+40*s.length,r.width=200,r.height=80+40*s.length,c=0;void 0!=s[c]&&0!=s[c][0];c++)o.fillStyle="rgba("+l[s[c][1]][0]+", "+l[s[c][1]][1]+", "+l[s[c][1]][2]+", 255)",o.fillRect(20,40+40*c,20,20),i.fillStyle="rgba("+l[s[c][1]][0]+", "+l[s[c][1]][1]+", "+l[s[c][1]][2]+", 255)",i.fillRect(20,40+40*c,20,20),t="x"+s[c][0]+"	 "+l[s[c][1]][3],o.fillStyle="rgba(255, 255, 255, 255)",i.fillStyle="rgba(0, 0, 0, 255)",o.fillText(t,45,40+40*c+12),i.fillText(t,45,40+40*c+12);a=$("#colorsCountRep").get(0),a.value=c},applyAdjustment:function(){var e,t,a=needlework.homepage.utils,n=a.getAdjustmentSettings(),o=$("#adjImgCanvasBuffer").get(0),r=new Image,i=fx.canvas(),s=new Image;r.src=o.toDataURL(),e=i.texture(r),(0!=n.brightnessVal||0!=n.contrastVal)&&(i.draw(e).brightnessContrast(n.brightnessVal,n.contrastVal).update(),r.src=i.toDataURL("image/png"),e=i.texture(r)),(0!=n.hueVal||0!=n.saturationVal)&&(i.draw(e).hueSaturation(n.hueVal,n.saturationVal).update(),r.src=i.toDataURL("image/png"),e=i.texture(r)),0!=n.vibranceVal&&(i.draw(e).vibrance(n.vibranceVal).update(),r.src=i.toDataURL("image/png"),e=i.texture(r)),$("#denoiseCheck").prop("checked")&&(i.draw(e).denoise(n.denoiseVal).update(),r.src=i.toDataURL("image/png"),e=i.texture(r)),0!=n.noiseVal&&(i.draw(e).noise(n.noiseVal).update(),r.src=i.toDataURL("image/png"),e=i.texture(r)),0!=n.sepiaVal&&(i.draw(e).sepia(n.sepiaVal).update(),r.src=i.toDataURL("image/png"),e=i.texture(r)),(0!=n.vigSizeVal||0!=n.vigAmountVal)&&(i.draw(e).vignette(n.vigSizeVal,n.vigAmountVal).update(),r.src=i.toDataURL("image/png"),e=i.texture(r)),s=new Image,s.src=i.toDataURL("image/png"),t=$("#editImgCanvas").get(0),t.getContext("2d").drawImage(s,0,0)},fillDrawFromCanvas:function(e){var t=$("#"+e).get(0),a=new Image,n=needlework.homepage.globals;a.src=t.toDataURL(),n.lc.setImageSize(t.width,t.height),n.lc.saveShape(LC.createShape("Image",{x:0,y:0,image:a}))},fillCropFromCanvas:function(e){var t=$("#"+e).get(0),a=$("#imgCrop").get(0),n=needlework.homepage.globals.crop;void 0==n?a.src=t.toDataURL():(n.cropper("destroy"),a.src=t.toDataURL(),n.cropper())},updSrcImgFromBuffer:function(){var e=$("#srcImgCanvas").get(0),t=$("#drawImgCanvasBuffer").get(0),a=new Image;a.src=t.toDataURL(),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(a,0,0)},saveFromDrawToBuff:function(){var e=$("#drawImgCanvasBuffer").get(0),t=new Image,a=needlework.homepage.globals;t.src=a.lc.getImage().toDataURL(),e.getContext("2d").drawImage(t,0,0)},saveFromEditToBuff:function(){var e=$("#drawImgCanvasBuffer").get(0),t=$("#editImgCanvas").get(0),a=new Image;a.src=t.toDataURL(),e.getContext("2d").drawImage(a,0,0)},saveFromCropToBuff:function(){var e=$("#drawImgCanvasBuffer").get(0),t=$("#imgCrop").get(0);e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0)},displayPattern:function(e){var t=$("#patternImgCanvas").get(0),a=t.getContext("2d");t.width=e.width,t.height=e.height,a.putImageData(e,0,0)}},needlework.homepage=needlework.homepage||{},needlework.homepage.events={initAllOnLoad:function(){var e=this,t=needlework.homepage.drawing,a=needlework.homepage.utils;e.addTabsEvents(),e.DnDInitialize(),a.loadCanvas({canvasId:"srcImgCanvas",canvasDiv:"srcImgCanvasDiv"}),a.loadCanvas({canvasId:"patternImgCanvas",canvasDiv:"patternImgCanvasDiv"}),t.fillCanvasText("srcImgCanvas","src"),t.fillCanvasText("patternImgCanvas","Pattern"),e.fillCanvasWImgFromFileListener(),a.loadPalettes()},addTabsEvents:function(){var e=this,t=needlework.homepage.globals,a=needlework.homepage.drawing,n=needlework.homepage.utils;$("#tabs").tabs({activate:function(o,r){switch($("#tabs").tabs("option","active")){case 0:a.updSrcImgFromBuffer();break;case 1:0==t.adjEventsLoaded&&e.addEditOnloadEvents(),a.fillAdjImgFromBuffer(),a.loadEditCanvas(),n.resetAjdustmentSettings();break;case 2:void 0==t.lc&&e.initDraw(),a.fillDrawFromCanvas("drawImgCanvasBuffer");break;case 3:a.fillCropFromCanvas("drawImgCanvasBuffer"),void 0==t.crop&&e.imgCropInit()}t.prevTab=$("#tabs").tabs("option","active")},beforeActivate:function(){switch(t.prevTab){case 1:a.saveFromEditToBuff();break;case 2:a.saveFromDrawToBuff();break;case 3:a.saveFromCropToBuff()}}})},DnDInitialize:function(){var e=$("#dndHolder").get(0),t=$("#status").get(0);"undefined"==typeof window.FileReader?t.className="fail":(t.className="success",t.innerHTML="File API & FileReader available"),e.ondragover=function(){return this.className="hover",!1},e.ondragend=function(){return this.className="",!1},e.ondrop=function(e){this.className="",e.preventDefault();var t=e.dataTransfer.files[0],a=new FileReader;a.onload=function(e){needlework.homepage.drawing.fillCanvasWImg("srcImgCanvas",e.target.result)},a.readAsDataURL(t),dragBoxText=$("#dragBoxText").get(0)}},fillCanvasWImgFromFileListener:function(){var e=$("#fileImg").get(0);e.addEventListener("change",needlework.homepage.drawing.fillCanvasWImgFromFile)},initDraw:function(){var e=needlework.homepage.globals,t=$("#drawImgCanvasBuffer").get(0);void 0!=e.lc&&e.lc.teardown(),$("#literally").width(t.width+65),$("#literally").height(t.height<550?550:t.height+30),e.lc=LC.init($("#literally").get(0),{imageURLPrefix:"../lib/LiterallyCanvas/img",imageSize:{width:t.width,height:t.height}})},addEditOnloadEvents:function(){var e=needlework.homepage.globals,t=needlework.homepage.drawing;$("#brightnessVal").change(function(e){$("#brightnessShowVal").text($("#brightnessVal").val()),t.applyAdjustment()}),$("#contrastVal").change(function(e){$("#contrastShowVal").text($("#contrastVal").val()),t.applyAdjustment()}),$("#hueVal").change(function(e){$("#hueShowVal").text($("#hueVal").val()),t.applyAdjustment()}),$("#saturationVal").change(function(e){$("#saturationShowVal").text($("#saturationVal").val()),t.applyAdjustment()}),$("#vibranceVal").change(function(e){$("#vibranceShowVal").text($("#vibranceVal").val()),t.applyAdjustment()}),$("#denoiseVal").change(function(e){$("#denoiseShowVal").text($("#denoiseVal").val()),t.applyAdjustment()}),$("#UMRadiusVal").change(function(e){$("#UMRadiusShowVal").text($("#UMRadiusVal").val()),t.applyAdjustment()}),$("#UMStrengthVal").change(function(e){$("#UMRadiusShowVal").text($("#UMStrengthVal").val()),t.applyAdjustment()}),$("#noiseVal").change(function(e){$("#noiseShowVal").text($("#noiseVal").val()),t.applyAdjustment()}),$("#sepiaVal").change(function(e){$("#sepiaShowVal").text($("#sepiaVal").val()),t.applyAdjustment()}),$("#vigSizeVal").change(function(e){$("#vigSizeShowVal").text($("#vigSizeVal").val()),t.applyAdjustment()}),$("#vigAmountVal").change(function(e){$("#vigAmountShowVal").text($("#vigAmountVal").val()),t.applyAdjustment()}),e.adjEventsLoaded=!0},imgCropInit:function(){var e=needlework.homepage.globals;e.crop=$("#imgCrop"),e.crop.cropper("destroy"),e.crop.cropper()}},needlework.homepage=needlework.homepage||{},needlework.homepage.globals={prevTab:0,adjEventsLoaded:!1,lc:void 0,crop:void 0,patternPallet:void 0,workingPallete:void 0},needlework=needlework||{},needlework.homepage={createPattern:function(){var e,t=needlework.homepage.drawing,a=needlework.homepage.algorithm,n=(needlework.homepage.utils,needlework.homepage.globals),o=needlework.homepage.palletes,r=document.getElementById("patAlgo").value,i={};return n.workingPallete=o.anchor,0==n.workingPallete.length?void alert("Palette is empty!"):(i={colCount:document.getElementById("colorsCount").value,scale:document.getElementById("patScale").value,pallete:n.workingPallete},console.log(i),"Contrast"==r&&(e=a.getContrastPattern(i)),"Average"==r&&(e=a.getAvgPattern(i)),t.displayPattern(e.pattern),needlework.homepage.utils.showBlocks("patternImgCanvas"),void t.createReportByCol({colCount:i.colCount,order:e.colReport,pallete:e.usedPallete}))},savePatternFromServer:function(){var e,t=$("#srcImgCanvas").get(0).toDataURL(),a=$("#patternImgCanvas").get(0).toDataURL(),n=$("#colorsReportForPDF").get(0).toDataURL(),o=[],r=[],i=[],s=5e4,l=0;for(l=0;l<t.length;l+=s)o[o.length]=t.substring(l,l+s);for(l=0;l<a.length;l+=s)r[r.length]=a.substring(l,l+s);for(l=0;l<n.length;l+=s)i[i.length]=n.substring(l,l+s);e={srcImgData:o,patternImgData:r,report:i},console.log(e);var c={srcImgData:JSON.stringify(e.srcImgData),patternImgData:JSON.stringify(e.patternImgData),report:JSON.stringify(e.report)};console.log(c),$.ajax({url:"NewPDF/CreatePDF",type:"POST",data:e,success:function(e){alert(e);var t=new Blob([e]),a=document.createElement("a");a.href=window.URL.createObjectURL(t),a.download="testPDFfromServer.pdf",a.click()}})}},$(document).ready(function(){needlework.homepage.events.initAllOnLoad()}),needlework.homepage=needlework.homepage||{},needlework.homepage.palletes={anchor:[[232,219,133,292],[238,216,97,293],[235,200,67,295],[239,180,21,297],[236,164,10,298],[237,213,82,288],[237,213,82,288],[238,206,62,289],[245,195,4,290],[245,196,4,291],[241,231,171,275],[242,222,143,386],[240,212,119,300],[236,192,62,301],[232,151,35,302],[225,118,7,303],[220,80,3,304],[224,171,99,311],[226,144,70,313],[223,96,25,314],[219,58,10,316],[218,44,9,925],[223,96,86,328],[221,71,45,329],[221,57,26,330],[221,42,12,332],[220,34,10,333],[184,3,23,334],[203,2,9,335],[222,88,53,323],[212,52,15,324],[149,24,8,326],[176,68,37,1003],[128,25,9,1004],[222,195,170,1010],[199,113,51,1047],[136,50,15,1048],[114,32,9,1049],[93,20,7,351],[74,14,7,352],[231,179,50,305],[193,123,30,306],[167,90,17,307],[140,64,13,308],[104,38,7,309],[76,24,7,310],[201,152,77,891],[202,152,77,890],[132,64,12,901],[197,169,128,372],[177,137,82,373],[122,71,38,374],[99,65,36,375],[219,186,144,942],[170,118,64,943],[88,43,16,944],[216,171,100,361],[188,123,52,362],[186,108,35,363],[123,51,9,365],[151,87,36,1045],[134,60,15,1046],[195,83,21,1002],[166,62,11,1001],[186,120,76,347],[131,48,21,349],[98,33,13,355],[63,26,14,357],[212,173,124,366],[204,158,102,367],[184,123,77,368],[141,75,35,369],[106,44,16,370],[94,35,14,371],[72,38,19,358],[51,24,12,359],[53,24,12,360],[46,21,12,380],[38,16,10,381],[20,7,5,382],[228,205,182,1011],[218,185,158,1012],[195,132,105,868],[210,125,99,9575],[146,67,46,1013],[124,32,15,5975],[118,15,9,1014],[207,130,103,336],[185,88,61,337],[168,57,31,338],[144,36,15,339],[109,24,9,340],[100,23,10,341],[190,131,106,882],[143,72,48,883],[126,38,16,884],[212,178,154,778],[210,160,138,4146],[171,125,104,1008],[142,89,72,914],[117,66,55,1007],[64,25,15,936],[230,217,186,1009],[209,187,168,880],[208,181,157,881],[200,180,161,933],[174,146,126,376],[127,87,67,378],[109,68,50,379],[214,196,169,276],[193,165,120,1080],[167,143,96,1082],[132,109,69,1084],[67,44,21,1086],[45,24,13,1088],[218,179,184,1020],[210,153,156,1021],[201,111,105,1022],[184,70,67,1023],[173,51,40,1024],[150,9,12,1025],[98,4,7,1015],[235,177,167,6],[228,141,138,8],[219,116,117,9],[213,75,79,10],[212,72,61,11],[148,8,7,13],[221,89,120,31],[219,51,74,33],[216,35,51,35],[178,8,24,1098],[172,3,22,46],[149,4,20,9046],[128,3,25,47],[132,3,26,19],[88,5,20,20],[60,5,16,22],[235,178,186,23],[225,140,154,24],[215,93,124,25],[218,75,113,26],[218,70,108,27],[213,49,85,28],[191,7,28,29],[122,3,25,1006],[100,3,20,1005],[214,121,133,36],[215,45,76,38],[167,11,26,39],[215,46,89,40],[205,23,61,41],[162,7,29,42],[103,4,13,43],[71,3,7,44],[61,3,7,45],[218,95,138,1094],[216,73,122,55],[196,23,73,57],[124,18,22,59],[225,181,196,48],[211,147,167,49],[220,103,146,50],[133,14,79,52],[139,16,82,54],[208,106,148,60],[190,46,105,62],[172,14,62,63],[116,16,42,65],[218,163,183,73],[208,123,151,74],[196,84,121,75],[176,51,86,76],[127,19,62,77],[111,13,48,78],[87,6,37,1028],[212,96,145,66],[177,57,115,68],[111,7,43,69],[53,12,47,70],[47,9,34,72],[213,183,172,892],[205,151,148,893],[194,113,116,894],[189,85,96,895],[136,50,70,1027],[112,29,38,896],[77,8,17,897],[236,214,217,271],[221,197,196,1026],[207,162,170,968],[191,133,155,969],[140,44,77,970],[104,7,49,972],[159,143,156,869],[126,102,133,870],[65,40,66,871],[58,35,61,872],[39,17,33,873],[172,111,132,1016],[162,93,114,1017],[115,55,67,1018],[88,33,37,1019],[183,109,156,85],[167,68,128,86],[162,43,108,87],[134,15,80,88],[140,17,83,89],[77,8,46,1029],[213,174,202,103],[177,84,139,96],[103,27,96,92],[80,12,67,94],[155,88,139,90],[136,68,127,97],[199,143,178,95],[116,53,118,98],[110,43,109,99],[87,27,93,100],[58,18,78,101],[35,14,64,102],[187,166,201,342],[162,139,183,108],[112,89,148,109],[82,57,131,110],[55,27,100,111],[39,20,88,112],[93,126,182,117],[68,76,146,118],[76,63,134,1030],[35,38,117,119],[148,177,211,120],[78,102,159,121],[33,56,112,122],[11,28,78,123],[9,13,32,127],[119,150,197,175],[75,97,156,176],[41,53,120,177],[12,39,102,178],[78,107,151,939],[36,67,135,940],[21,46,107,941],[131,169,207,144],[53,96,156,136],[26,61,134,137],[1,42,108,139],[82,114,174,130],[43,63,133,131],[4,54,131,132],[2,45,118,133],[2,30,87,134],[90,129,182,140],[25,74,149,142],[2,46,122,143],[175,197,221,128],[99,140,188,129],[90,122,176,145],[37,91,163,146],[12,54,127,147],[11,31,81,148],[1,18,66,149],[2,18,56,150],[5,13,38,152],[185,204,212,1031],[164,184,195,1032],[129,153,174,1033],[71,101,124,1034],[17,35,57,1035],[16,35,63,1036],[147,178,195,975],[124,154,176,976],[59,102,156,977],[58,96,144,978],[25,67,119,979],[49,154,212,1090],[12,137,203,433],[6,114,187,1089],[1,95,174,410],[209,211,213,1037],[144,174,194,1096],[122,145,167,343],[112,140,150,920],[63,96,110,921],[37,69,81,922],[121,156,196,159],[50,103,157,161],[1,60,116,162],[1,46,100,164],[118,163,205,160],[135,172,202,9159],[119,157,193,1038],[54,131,156,1039],[161,182,174,158],[140,183,186,928],[97,159,167,167],[53,124,154,168],[1,86,131,169],[1,65,101,170],[172,187,179,847],[150,168,164,274],[132,153,153,848],[133,154,154,849],[67,101,111,850],[39,79,92,779],[66,99,109,851],[143,180,174,1060],[107,160,160,1062],[76,142,137,1064],[22,108,97,1066],[7,81,77,1068],[159,209,206,1092],[130,191,185,185],[79,164,156,186],[34,140,122,187],[2,109,102,188],[2,104,90,189],[133,186,182,1070],[84,163,154,1072],[42,143,123,1074],[3,104,91,1076],[88,141,48,1042],[114,156,127,875],[72,119,97,876],[53,103,85,877],[30,80,53,878],[6,67,45,879],[107,164,120,203],[91,155,113,204],[56,125,80,209],[32,114,72,205],[2,78,53,230],[124,176,141,206],[69,125,82,208],[28,97,48,210],[14,86,47,211],[5,71,33,212],[172,197,171,213],[115,158,118,214],[74,124,87,215],[49,99,76,216],[35,83,57,217],[17,62,37,218],[6,46,25,683],[125,136,105,858],[101,118,78,859],[78,97,59,860],[50,80,38,861],[33,58,31,862],[154,175,114,264],[130,152,78,265],[89,118,41,266],[67,88,21,267],[37,83,26,268],[17,39,8,269],[111,159,92,225],[78,141,71,226],[7,99,42,227],[1,84,27,228],[1,85,27,229],[0,54,14,923],[1,55,15,1043],[198,223,184,240],[90,154,112,241],[102,155,93,242],[92,144,88,243],[52,123,58,244],[1,61,18,246],[2,53,16,1044],[89,142,49,238],[28,99,23,239],[7,86,29,245],[193,209,122,253],[167,185,83,254],[95,125,27,255],[66,111,25,256],[35,95,23,257],[36,95,23,258],[202,219,173,259],[194,197,168,260],[96,134,75,261],[56,78,37,262],[36,61,27,263],[208,203,85,278],[148,159,40,279],[122,114,28,280],[61,81,15,281],[52,65,12,924],[171,174,126,842],[119,124,58,843],[86,86,30,844],[66,71,28,845],[27,37,8,846],[51,69,29,681],[255,255,255,1],[237,236,237,2],[222,210,196,926],[212,191,164,387],[190,170,143,388],[200,183,158,390],[183,162,138,391],[142,124,101,392],[89,74,62,393],[171,149,130,899],[113,95,65,903],[84,64,46,904],[58,40,27,905],[161,162,148,900],[116,121,118,1040],[112,113,102,8581],[48,44,36,273],[35,45,38,1041],[210,198,150,852],[148,144,102,853],[134,119,65,854],[136,120,66,855],[86,85,27,856],[178,170,154,830],[150,137,114,831],[117,100,67,832],[98,75,45,898],[186,179,143,956],[152,140,81,945],[219,206,166,885],[187,178,112,886],[163,151,83,887],[104,77,36,888],[72,39,15,889],[0,0,0,1050],[198,161,101,874],[151,111,19,907],[96,58,17,277],[70,47,24,906],[183,166,162,231],[137,130,129,232],[107,93,98,233],[185,187,184,234],[88,94,109,235],[48,51,60,236],[204,202,190,397],[151,143,144,398],[134,129,133,399],[74,77,92,400],[36,35,38,401],[10,6,8,403]],
dmc:[[255,255,255,"white"],[148,91,128,208],[206,148,186,209],[236,207,225,210],[243,218,228,211],[156,41,74,221],[219,128,115,223],[255,199,176,224],[255,240,228,225],[143,57,38,300],[209,102,84,301],[188,0,97,304],[255,231,109,307],[188,22,65,326],[61,0,103,327],[127,84,130,333],[115,140,170,334],[219,36,79,335],[36,73,103,336],[162,121,164,340],[145,180,197,341],[194,36,67,347],[220,61,91,349],[237,69,90,350],[255,128,135,351],[255,157,144,352],[255,196,184,353],[189,73,47,355],[226,114,91,356],[95,112,91,367],[181,206,162,368],[243,250,209,369],[184,138,87,370],[196,155,100,371],[203,162,107,372],[157,60,39,400],[255,190,164,402],[194,101,76,407],[109,95,95,413],[167,139,136,414],[221,221,218,415],[140,91,43,420],[237,172,123,422],[151,84,20,433],[178,103,70,434],[187,107,57,435],[231,152,115,436],[238,171,121,437],[255,176,0,444],[255,255,190,445],[179,151,143,451],[210,185,175,452],[235,207,185,453],[116,114,92,469],[133,143,108,470],[176,187,140,471],[238,255,182,472],[187,0,97,498],[43,57,41,500],[67,85,73,501],[134,158,134,502],[195,206,183,503],[206,221,193,504],[16,127,135,517],[102,148,154,518],[194,209,207,519],[55,73,18,520],[159,169,142,522],[172,183,142,523],[205,182,158,524],[85,85,89,535],[239,214,188,543],[109,18,97,550],[146,85,130,552],[160,100,146,553],[243,206,225,554],[59,96,76,561],[97,134,97,562],[182,212,180,563],[214,230,204,564],[0,103,0,580],[151,152,49,581],[128,151,132,597],[208,223,205,598],[208,57,106,600],[222,57,105,601],[231,84,122,602],[225,115,140,603],[255,189,202,604],[255,207,214,605],[255,0,0,606],[255,91,0,608],[151,104,84,610],[158,109,91,611],[203,152,103,612],[219,176,122,613],[162,77,52,632],[163,163,157,640],[174,176,170,642],[224,224,215,644],[113,113,113,645],[121,121,121,646],[190,190,185,647],[202,202,202,648],[213,39,86,666],[255,206,158,676],[255,231,182,677],[209,140,103,680],[0,91,6,699],[0,96,47,700],[79,108,69,701],[79,121,66,702],[121,144,76,703],[165,164,103,704],[245,240,219,712],[219,55,121,718],[200,36,43,720],[255,115,97,721],[255,146,109,722],[255,200,124,725],[255,224,128,726],[255,235,168,727],[243,176,128,729],[132,102,0,730],[140,103,0,731],[145,104,0,732],[206,155,97,733],[221,166,107,734],[244,195,139,738],[244,233,202,739],[255,131,19,740],[255,142,4,741],[255,183,85,742],[255,230,146,743],[255,239,170,744],[255,240,197,745],[246,234,219,746],[240,247,239,747],[251,227,209,754],[255,177,147,758],[249,160,146,760],[255,201,188,761],[232,232,229,762],[231,249,203,772],[247,246,248,775],[255,177,174,776],[255,199,184,778],[181,98,46,780],[181,107,56,781],[204,119,66,782],[225,146,85,783],[71,55,93,791],[97,97,128,792],[147,139,164,793],[187,208,218,794],[30,58,95,796],[30,66,99,797],[103,115,141,798],[132,156,182,799],[233,238,233,800],[123,71,20,801],[30,130,133,806],[128,167,160,807],[190,193,205,809],[175,195,205,813],[162,0,88,814],[166,0,91,815],[179,0,91,816],[219,24,85,817],[255,234,235,818],[248,247,221,819],[30,54,85,820],[242,234,219,822],[0,0,73,823],[71,97,116,824],[85,108,128,825],[115,138,153,826],[213,231,232,827],[237,247,238,828],[130,90,8,829],[136,95,18,830],[144,103,18,831],[178,119,55,832],[219,182,128,833],[242,209,142,834],[94,56,27,838],[109,66,39,839],[128,85,30,840],[188,134,107,841],[219,194,164,842],[107,103,102,844],[153,92,48,868],[153,92,48,869],[79,86,76,890],[241,49,84,891],[249,90,97,892],[243,149,157,893],[255,194,191,894],[89,92,78,895],[118,55,19,898],[233,109,115,899],[206,43,0,900],[138,24,77,902],[78,95,57,904],[98,119,57,905],[143,163,89,906],[185,200,102,907],[49,105,85,909],[48,116,91,910],[49,128,97,911],[115,158,115,912],[153,188,149,913],[170,24,91,915],[171,22,95,917],[168,68,76,918],[180,75,82,919],[197,94,88,920],[206,103,91,921],[237,134,115,922],[86,99,100,924],[96,116,115,926],[200,198,194,927],[225,224,216,928],[102,122,140,930],[124,135,145,931],[182,186,194,932],[62,59,40,934],[67,63,47,935],[69,69,49,936],[73,86,55,937],[99,39,16,938],[0,0,49,939],[0,162,117,943],[255,206,164,945],[244,73,0,946],[255,91,0,947],[255,243,231,948],[239,162,127,950],[255,229,188,951],[170,213,164,954],[214,230,204,955],[255,109,115,956],[255,204,208,957],[0,160,130,958],[171,206,177,959],[243,108,123,961],[253,134,141,962],[255,233,233,963],[208,224,210,964],[206,213,176,966],[255,117,24,970],[255,106,0,971],[255,146,0,972],[255,194,67,973],[158,67,18,975],[246,141,57,976],[255,164,73,977],[58,82,65,986],[83,97,73,987],[134,145,110,988],[134,153,110,989],[47,91,73,991],[146,183,165,992],[192,224,200,993],[0,123,134,995],[170,222,225,996],[123,91,64,3011],[170,134,103,3012],[208,195,164,3013],[115,91,93,3021],[172,172,170,3022],[198,190,173,3023],[210,208,205,3024],[84,56,23,3031],[188,156,120,3032],[239,219,190,3033],[190,155,167,3041],[225,205,200,3042],[216,151,105,3045],[229,93,139,3046],[255,236,211,3047],[85,73,0,3051],[137,141,114,3052],[187,179,148,3053],[194,1,76,3064],[233,233,223,3072],[255,255,220,3078],[202,226,229,3325],[255,157,150,3326],[188,64,85,3328],[255,123,103,3340],[255,172,162,3341],[97,100,82,3345],[128,152,115,3347],[225,249,190,3348],[201,79,91,3350],[255,214,209,3354],[96,95,84,3362],[116,127,96,3363],[161,167,135,3364],[83,37,16,3371],[231,79,134,3607],[247,152,182,3608],[255,214,229,3609],[161,53,79,3685],[203,78,97,3687],[250,151,144,3688],[255,213,216,3689],[255,85,91,3705],[255,128,109,3706],[254,212,219,3708],[230,101,107,3712],[253,229,217,3713],[255,211,212,3716],[184,75,77,3721],[184,89,88,3722],[195,118,123,3726],[255,199,196,3727],[209,93,103,3731],[255,154,148,3733],[156,125,133,3740],[235,235,231,3743],[149,102,162,3746],[230,236,232,3747],[12,91,108,3750],[194,209,206,3752],[237,247,247,3753],[158,176,206,3755],[248,248,252,3756],[102,142,152,3760],[227,234,230,3761],[24,128,134,3765],[24,101,111,3766],[92,110,108,3768],[255,250,224,3770],[173,83,62,3772],[231,134,103,3773],[255,220,193,3774],[221,109,91,3776],[191,64,36,3777],[237,122,100,3778],[255,177,152,3779],[113,71,42,3781],[206,175,144,3782],[139,109,115,3787],[140,117,109,3790],[81,76,83,3799]]},needlework.homepage=needlework.homepage||{},needlework.homepage.utils={updateTab:function(){var e=needlework.homepage.globals,t=needlework.homepage.drawing;switch(e.prevTab){case 1:t.fillAdjImgFromBuffer(),t.loadEditCanvas(),needlework.homepage.utils.resetAjdustmentSettings();break;case 2:t.fillDrawFromCanvas("drawImgCanvasBuffer");break;case 3:t.fillCropFromCanvas("drawImgCanvasBuffer")}},loadCanvas:function(e){var t=e.canvasId,a=e.canvasDiv,n=$("#"+t).get(0),o=(n.getContext("2d"),parseInt(getComputedStyle($("#"+a).get(0),null).getPropertyValue("border-Width")));n.width=$("#"+a).get(0).offsetWidth-2*o-30,n.height=$("#"+a).get(0).offsetHeight-2*o-30},showBlocks:function(e){var t=this;switch(t.showDiv("tabs"),e){case"srcImgCanvas":$(".uploadedSection").css({display:"block"}),t.showDiv("patternSettings"),t.showDiv("srcImgCanvasDiv");break;case"patternImgCanvas":$("#rightPatternCreation").css({display:"block"}),t.showDiv("patternImgCanvasDiv"),t.showDiv("patternCreated")}},showDiv:function(e){$("#"+e).css("visibility","visible")},getColDiff:function(e){var t=e.colRGB,a=e.pallete,n=0,o=0;for(o=0;o<a.length;o++)n+=.3*Math.abs(a[o][0]-t[0])+.59*Math.abs(a[o][0]-t[0])+.11*Math.abs(a[o][1]-t[2]);return n},getStitchSize:function(){var e=document.getElementById("srcImgCanvas"),t=Math.trunc(document.getElementById("stitchesCount").value),a=e.width/t%1,n=Math.trunc(.5>a?e.width/t:e.width/t+1);return 0==n?1:n},getAdjustmentSettings:function(){var e={};return e.brightnessVal=$("#brightnessVal").val(),e.contrastVal=$("#contrastVal").val(),e.hueVal=$("#hueVal").val(),e.saturationVal=$("#saturationVal").val(),e.vibranceVal=$("#vibranceVal").val(),e.denoiseVal=$("#denoiseVal").val(),e.UMRadiusVal=$("#UMRadiusVal").val(),e.UMStrengthVal=$("#UMStrengthVal").val(),e.noiseVal=$("#noiseVal").val(),e.sepiaVal=$("#sepiaVal").val(),e.vigSizeVal=$("#vigSizeVal").val(),e.vigAmountVal=$("#vigAmountVal").val(),e},resetAjdustmentSettings:function(){$("#brightnessVal").val(0),$("#contrastVal").val(0),$("#hueVal").val(0),$("#saturationVal").val(0),$("#vibranceVal").val(0),$("#denoiseVal").val(0),$("#UMRadiusVal").val(0),$("#UMStrengthVal").val(0),$("#noiseVal").val(0),$("#sepiaVal").val(0),$("#vigSizeVal").val(0),$("#vigAmountVal").val(0),$("#brightnessShowVal").text(0),$("#contrastShowVal").text(0),$("#hueShowVal").text(0),$("#saturationShowVal").text(0),$("#vibranceShowVal").text(0),$("#denoiseShowVal").text(0),$("#UMRadiusShowVal").text(0),$("#UMRadiusShowVal").text(0),$("#noiseShowVal").text(0),$("#sepiaShowVal").text(0),$("#vigSizeShowVal").text(0),$("#vigAmountShowVal").text(0)},cropImg:function(){var e,t,a,n,o=needlework.homepage.globals,r=o.crop.cropper("getData","true");r.x=r.x<0?0:r.x,r.y=r.y<0?0:r.y,o.crop.cropper("destroy"),e=document.createElement("canvas"),t=e.getContext("2d"),a=$("#imgCrop").get(0),e.width=a.width,e.height=a.height,t.drawImage(a,0,0),n=t.getImageData(r.x,r.y,r.x+r.width,r.x+r.height),e.width=r.width,e.height=r.height,t.putImageData(n,0,0),a.src=e.toDataURL(),needlework.homepage.events.imgCropInit()},resetCropImg:function(){var e=needlework.homepage.globals.crop;e.cropper("destroy"),needlework.homepage.drawing.fillCropFromCanvas("drawImgCanvasBuffer"),e.cropper()},resetAjd:function(){needlework.homepage.utils.resetAjdustmentSettings(),needlework.homepage.drawing.loadEditCanvas()},fullImgReset:function(){var e=needlework.homepage.drawing;e.fillDrawImgBuffer(),e.updSrcImgFromBuffer()},isNumberKey:function(e){var t=e.which?e.which:event.keyCode;return t>31&&(48>t||t>57)?!1:!0},loadPalettes:function(){var e=this;$.ajax({url:"/Palettes/GetPalettes",type:"GET",data:{},dataType:"json",success:function(t){e.fillPalettesList(t)}})},fillPalettesList:function(e){$("#palletteSel").empty();for(var t=0;t<e.Palettes.length;t++)$("#palletteSel").append("<option value='"+e.Palettes[t].Id+"'>"+e.Palettes[t].Name+"</option>")},getPalletefromDB:function(){var e=$("#palletteSel").val();$.ajax({url:"Palettes/GetRGBColors",type:"GET",async:!1,data:{paletteId:e},dataType:"json",success:function(e,t){needlework.homepage.globals.workingPallete=e.RGBColors}})}},$(document).ready(function(){needlework.informationpage.init()}),needlework.informationpage={init:function(){needlework.localization.localizatePage("InformationPage")}};var needlework={};$(document).ready(function(){needlework.layout.init()}),needlework.layout={init:function(){needlework.layout.utils.getUrlVars().code;needlework.layout.bindActions();var e=needlework.layout.utils.getUrlVars();"2007"==e.successCode&&needlework.popups.popUpShow($("#popResetPassword")),"2003"==e.successCode&&(needlework.layout.utils.lock(),needlework.popups.popUpShowInformation(Localization.Messages[2003].Name,Localization.Messages[2003].Definition),setTimeout(function(){needlework.popups.popUpHide($(".openedPopUp"),function(){window.location.href="/"})},3e3))},bindActions:function(){$(".signIn").on("click",function(){needlework.popups.popUpShow($("#popUpLogin"))}),$("#feedback").on("click",function(){needlework.popups.popUpShow($("#popFeedback"))}),$("#changePassword").on("click",function(){needlework.popups.popUpShow($("#popChangePassword"))}),$("#forgotPassword").on("click",function(){needlework.popups.popUpChange($("#popUpLogin"),$("#popForgotPassword"))}),$("#registration").on("click",function(){$("#loginForm").slideUp(function(){$("#registrationForm").slideDown()})}),$("#login").on("click",function(){$("#registrationForm").slideUp(function(){$("#loginForm").slideDown()})}),$("#loginSubmit").on("click",function(){needlework.layout.toggleLoading();var e={email:$("#loginEmail").prop("value"),password:$("#loginPassword").prop("value"),remember:$("#loginRemember").prop("checked")};$.ajax({type:"post",dataType:"json",url:"/Account/Login/",data:e,success:function(e){needlework.layout.toggleLoading(),console.log(e),e=needlework.layout.utils.generateMessage(e),"Success"==e.Status?location.reload():needlework.popups.popUpShowInformation(e.Name,e.Definition)},error:function(e){needlework.layout.toggleLoading(),console.log(e),e=needlework.layout.utils.generateMessage(e),"Success"==e.Status?location.reload():needlework.popups.popUpShowInformation(e.Name,e.Definition)}})}),$("#registrationSubmit").on("click",function(){if(needlework.layout.toggleLoading(),$(".validationError").remove(),!ValidateRegistrationForm())return needlework.layout.toggleLoading(),grecaptcha.reset(),!1;var e={firstName:$("#registrationFirstName").prop("value"),lastName:$("#registrationLastName").prop("value"),email:$("#registrationEmail").prop("value"),password:$("#registrationPassword").prop("value"),captchaResponse:grecaptcha.getResponse()};$.ajax({type:"post",dataType:"json",url:"/Account/Register/",data:e,success:function(e){return needlework.layout.toggleLoading(),grecaptcha.reset(),console.log(e),e=needlework.layout.utils.generateMessage(e),"1001"==e.Code?($("#registrationReCaptcha").after('<div class="validationError">'+Localization.Validations.captcha+"</div>"),!1):(needlework.layout.clearForm("#registrationForm"),void needlework.popups.popUpShowInformation(e.Name,e.Definition))},error:function(e){return needlework.layout.toggleLoading(),grecaptcha.reset(),console.log(e),e=needlework.layout.utils.generateMessage(e),"1001"==e.Code?($("#registrationReCaptcha").after('<div class="validationError">'+Localization.Validations.captcha+"</div>"),!1):(needlework.layout.clearForm("#registrationForm"),void needlework.popups.popUpShowInformation(e.Name,e.Definition))}})}),$(".signOut").on("click",function(){var e={};$.ajax({type:"post",dataType:"json",url:"/Account/LogOff/",data:e,success:function(){location.reload()},error:function(e){location.reload()}})}),$("#feedBackSubmit").on("click",function(){console.log($("#feedBackArea").val()),needlework.layout.toggleLoading();var e={text:$("#feedBackArea").val()};$.ajax({type:"post",dataType:"json",url:"/Feedbacks/CreateFeedBack/",data:e,success:function(e){console.log(e),needlework.layout.toggleLoading(),$("#feedBackArea").val(""),e=needlework.layout.utils.generateMessage(e),needlework.popups.popUpShowInformation(e.Name,e.Definition)},error:function(e){console.log(e),needlework.layout.toggleLoading(),$("#feedBackArea").val(""),e=needlework.layout.utils.generateMessage(e),needlework.popups.popUpShowInformation(e.Name,e.Definition)}})}),$("#forgotPasswordSubmit").on("click",function(){if(needlework.layout.toggleLoading(),$(".validationError").remove(),!ValidateForgotPasswordForm())return needlework.layout.toggleLoading(),!1;var e={email:$("#forgotPasswordEmail").prop("value")};$.ajax({type:"post",dataType:"json",url:"/Account/ForgotPassword/",data:e,success:function(e){needlework.layout.toggleLoading(),console.log(e),e=needlework.layout.utils.generateMessage(e),needlework.layout.clearForm("#popForgotPassword"),needlework.popups.popUpShowInformation(e.Name,e.Definition)},error:function(e){needlework.layout.toggleLoading(),console.log(e),e=needlework.layout.utils.generateMessage(e),needlework.layout.clearForm("#popForgotPassword"),needlework.popups.popUpShowInformation(e.Name,e.Definition)}})}),$("#resetPasswordSubmit").on("click",function(){if(needlework.layout.toggleLoading(),$(".validationError").remove(),!ValidateResetPasswordForm())return needlework.layout.toggleLoading(),!1;var e={email:$("#resetPasswordEmail").prop("value"),password:$("#resetPasswordNewPassword").prop("value"),code:code};$.ajax({type:"post",dataType:"json",url:"/Account/ResetPassword/",data:e,success:function(e){needlework.layout.toggleLoading(),console.log(e),e=needlework.layout.utils.generateMessage(e),needlework.layout.clearForm("#popResetPassword"),needlework.layout.utils.lock(),needlework.popups.popUpShowInformation(e.Name,e.Definition),setTimeout(function(){needlework.popups.popUpHide($(".openedPopUp"),function(){window.location.href="/"})},3e3)},error:function(e){needlework.layout.toggleLoading(),console.log(e),e=needlework.layout.utils.generateMessage(e),needlework.layout.clearForm("#popResetPassword"),needlework.layout.utils.lock(),needlework.popups.popUpShowInformation(e.Name,e.Definition),setTimeout(function(){needlework.popups.popUpHide($(".openedPopUp"),function(){window.location.href="/"})},3e3)}})}),$("#changePasswordSubmit").on("click",function(){if(needlework.layout.toggleLoading(),$(".validationError").remove(),!ValidateChangePasswordForm())return needlework.layout.toggleLoading(),!1;var e={oldPassword:$("#changePasswordOldPassword").prop("value"),newPassword:$("#changePasswordNewPassword").prop("value")};$.ajax({type:"post",dataType:"json",url:"/Account/ChangePassword/",data:e,success:function(e){needlework.layout.toggleLoading(),console.log(e),e=needlework.layout.utils.generateMessage(e),needlework.layout.clearForm("#popChangePassword"),needlework.popups.popUpShowInformation(e.Name,e.Definition)},error:function(e){needlework.layout.toggleLoading(),console.log(e),e=needlework.layout.utils.generateMessage(e),needlework.layout.clearForm("#popChangePassword"),needlework.popups.popUpShowInformation(e.Name,e.Definition)}})})},toggleLoading:function(){"table"==$("#loading").css("display")?$("#loading").css("display","none"):$("#loading").css("display","table")},clearForm:function(e){$(e+" input[type^=text], "+e+" input[type^=password]").prop("value","")}},needlework.layout.utils={getUrlVars:function(){{var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,a,n){e[a]=n})}return e},generateMessage:function(e){var t={};return t.Code=e.Code,t.Status=e.Status,"Exception"==e.Status?(t.Name=e.Name,t.Definition=e.Definition):(t.Name=Localization.Messages[e.Code].Name,t.Definition=Localization.Messages[e.Code].Definition),t},lock:function(){$(".popUpBack").off()}},$(document).ready(function(){needlework.localization.init()}),needlework.localization={init:function(){needlework.localization.bindActions()},bindActions:function(){$(".langChange").on("click",function(){needlework.layout.toggleLoading();var e={lang:$(this).prop("id")};$.ajax({type:"post",dataType:"json",url:"/Home/ChangeCulture",data:e,success:function(e){needlework.layout.toggleLoading(),console.log(e),location.reload()},error:function(e){needlework.layout.toggleLoading(),console.log(e)}})})},localizatePage:function(e){function t(e){for(var t in e)e[t]instanceof Array?($("#"+t).html(""),e[t].forEach(function(e,a,n){$("#"+t).html($("#"+t).html()+"</br>"+e)})):$("#"+t).is("input[type^=text], input[type^=password]")?$("#"+t).prop("placeholder",e[t]):$("#"+t).is("input[type^=button], input[type^=submit]")?$("#"+t).prop("value",e[t]):$("#"+t).is("input[type^=checkbox]")?$("#"+t).after(e[t]):$("#"+t).html(e[t])}t(Localization[e]),t(Localization.Layout);for(var a in Localization.PopUps)t(Localization.PopUps[a])}},$(document).ready(function(){needlework.popups.init()}),needlework.popups={init:function(){needlework.popups.bindActions()},bindActions:function(){$(".popUpBack").on("click",function(e){e.target==this&&(console.log(this),needlework.popups.popUpHide($(this).children(".popUp")))}),$(window).keydown(function(e){27==e.which&&$(".popUpBack").click()}),$("#showMenu").on("click",function(){MenuToggle()})},popUpHide:function(e,t){$(e).removeClass("openedPopUp"),$(e).slideUp(function(){$(e).parent().css("display","none"),"function"==typeof t&&t()})},popUpShow:function(e){e.addClass("openedPopUp"),e.parent().css("display","block"),e.slideDown()},popUpChange:function(e,t){needlework.popups.popUpHide(e,function(){needlework.popups.popUpShow(t)})},popUpShowInformation:function(e,t){$("#informationTitle").html(e),$("#informationMessage").html(t),$(".openedPopUp").length?needlework.popups.popUpHide($(".openedPopUp"),function(){needlework.popups.popUpShow($("#popInformation"))}):needlework.popups.popUpShow($("#popInformation"))}},needlework.validations={emailIsValid:function(e){var t=/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,12}$/;return t.test(e)},passwordIsValid:function(e){var t=/[a-z]{1,}/;return e.length<6?!1:t.test(e)?(t=/[A-Z]{1,}/,t.test(e)?(t=/[\W]{1,}/,t.test(e)?!0:!1):!1):!1},nameIsValid:function(e){var t=/^[a-zA-Z]{2,20}$/;return t.test(e)},passwordIsConfirm:function(e,t){return e===t},checkName:function(e){var t=/^[0-9a-zA-Zа-яА-Я]{3,30}$/;return t.test($(e).val())?($(e).next().text("Success").css({color:"green"}),$(e).val()):void $(e).next().text("Incorrect name").css({color:"red"})},checkRGB:function(){var e=/^([0-9]{1,3}),([0-9]{1,3}),([0-9]{1,3})$/,t=e.exec($("#inputColorRGB").val());if(null!==t&&t[1]<=255&&t[2]<=255&&t[3]<=255){if($("#inputColorRGB").next().text("Success").css({color:"green"}),""==$("#inputColorHex").val()){var a=rgbToHex(t[1],t[2],t[3]);return $("#inputColorHex").val("#"+a)}return $("#inputColorRGB").val()}return""==$("#inputColorRGB").val()&&needlework.validation.checkHEX()?!0:void $("#inputColorRGB").next().text("Incorrect number").css({color:"red"})},checkHEX:function(){var e=/^#[0-9a-fA-F]{0,6}$/;return e.test($("#inputColorHex").val())&&7==$("#inputColorHex").val().length?($("#inputColorHex").next().text("Success").css({color:"green"}),$("#inputColorHex").val()):void(7!=$("#inputColorHex").val().length?$("#inputColorHex").next().text("Incorrect length").css({color:"red"}):$("#inputColorHex").next().text("Incorrect char").css({color:"red"}))}}(function(e){e(document).ready(function(){function e(){if(document.URL.indexOf("google.com/reader/view")>-1&&(b=!0),C)for(var e=C.split(/[,\n] ?/),t=e.length;t--;)if(document.URL.indexOf(e[t])>-1){c("mousewheel",n),b=!0;break}}function t(){if(document.body){var t=document.body,a=document.documentElement,n=window.innerHeight,r=t.scrollHeight;if(f=document.compatMode.indexOf("CSS")>=0?a:t,g=t,e(),I=!0,top!=self)$=!0;else if(r>n&&(t.offsetHeight<=n||a.offsetHeight<=n)&&(f.style.height="auto",f.offsetHeight<=n)){var i=document.createElement("div");i.style.clear="both",t.appendChild(i)}if(document.URL.indexOf("mail.google.com")>-1){var s=document.createElement("style");s.innerHTML=".iu { visibility: hidden }",(document.getElementsByTagName("head")[0]||a).appendChild(s)}N||(t.style.backgroundAttachment="scroll"),b&&c("keydown",o)}}function a(e,t,a,n){if(n||(n=1e3),u(t,a),R.push({x:t,y:a,lastX:0>t?.99:-.99,lastY:0>a?.99:-.99,start:+new Date}),!L){var o=function(){for(var r=+new Date,i=0,s=0,l=0;l<R.length;l++){var c=R[l],d=r-c.start,u=d>=v,p=u?1:d/v;y&&(p=h(p));var g=c.x*p-c.lastX>>0,f=c.y*p-c.lastY>>0;i+=g,s+=f,c.lastX+=g,c.lastY+=f,u&&(R.splice(l,1),l--)}if(t){var w=e.scrollLeft;e.scrollLeft+=i,i&&e.scrollLeft===w&&(t=0)}if(a){var P=e.scrollTop;e.scrollTop+=s,s&&e.scrollTop===P&&(a=0)}t||a||(R=[]),R.length?setTimeout(o,n/m+1):L=!1};setTimeout(o,0),L=!0}}function n(e){I||t();var n=e.target,o=s(n);if(!o||e.defaultPrevented||d(g,"embed")||d(n,"embed")&&/\.pdf/i.test(n.src))return!0;var r=e.wheelDeltaX||0,i=e.wheelDeltaY||0;r||i||(i=e.wheelDelta||0),Math.abs(r)>1.2&&(r*=w/120),Math.abs(i)>1.2&&(i*=w/120),a(o,-r,-i),e.preventDefault()}function o(e){var t=e.target,n=e.ctrlKey||e.altKey||e.metaKey;if(/input|textarea|embed/i.test(t.nodeName)||t.isContentEditable||e.defaultPrevented||n)return!0;if(d(t,"button")&&e.keyCode===E.spacebar)return!0;var o,r=0,i=0,l=s(g),c=l.clientHeight;switch(l==document.body&&(c=window.innerHeight),e.keyCode){case E.up:i=-k;break;case E.down:i=k;break;case E.spacebar:o=e.shiftKey?1:-1,i=-o*c*.9;break;case E.pageup:i=.9*-c;break;case E.pagedown:i=.9*c;break;case E.home:i=-l.scrollTop;break;case E.end:var u=l.scrollHeight-l.scrollTop-c;i=u>0?u+10:0;break;case E.left:r=-k;break;case E.right:r=k;break;default:return!0}a(l,r,i),e.preventDefault()}function r(e){g=e.target}function i(e,t){for(var a=e.length;a--;)T[D(e[a])]=t;return t}function s(e){var t=[],a=f.scrollHeight;do{var n=T[D(e)];if(n)return i(t,n);if(t.push(e),a===e.scrollHeight){if(!$||f.clientHeight+10<a)return i(t,document.body)}else if(e.clientHeight+10<e.scrollHeight&&(overflow=getComputedStyle(e,"").getPropertyValue("overflow"),"scroll"===overflow||"auto"===overflow))return i(t,e)}while(e=e.parentNode)}function l(e,t,a){window.addEventListener(e,t,a||!1)}function c(e,t,a){window.removeEventListener(e,t,a||!1)}function d(e,t){return e.nodeName.toLowerCase()===t.toLowerCase()}function u(e,t){e=e>0?1:-1,t=t>0?1:-1,(S.x!==e||S.y!==t)&&(S.x=e,S.y=t,R=[])}function p(e){var t,a,n;return e*=P,1>e?t=e-(1-Math.exp(-e)):(a=Math.exp(-1),e-=1,n=1-Math.exp(-e),t=a+n*(1-a)),t*x}function h(e){return e>=1?1:0>=e?0:(1==x&&(x/=p(1)),p(e))}var g,f,m=150,v=600,w=150,y=!0,P=5,x=1,b=!1,k=50,C="",$=!1,S={x:0,y:0},I=!1,N=!0,E={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36},R=[],L=!1,T={};setInterval(function(){T={}},1e4);var D=function(){var e=0;return function(t){return t.uniqueID||(t.uniqueID=e++)}}();/chrome/.test(navigator.userAgent.toLowerCase())&&(l("mousedown",r),l("mousewheel",n),l("keydown",o),l("load",t))})})(jQuery),!function(e){var t,a,n="0.4.2",o="hasOwnProperty",r=/[\.\/]/,i=/\s*,\s*/,s="*",l=function(e,t){return e-t},c={n:{}},d=function(){for(var e=0,t=this.length;t>e;e++)if("undefined"!=typeof this[e])return this[e]},u=function(){for(var e=this.length;--e;)if("undefined"!=typeof this[e])return this[e]},p=function(e,n){e=String(e);var o,r=a,i=Array.prototype.slice.call(arguments,2),s=p.listeners(e),c=0,h=[],g={},f=[],m=t;f.firstDefined=d,f.lastDefined=u,t=e,a=0;for(var v=0,w=s.length;w>v;v++)"zIndex"in s[v]&&(h.push(s[v].zIndex),s[v].zIndex<0&&(g[s[v].zIndex]=s[v]));for(h.sort(l);h[c]<0;)if(o=g[h[c++]],f.push(o.apply(n,i)),a)return a=r,f;for(v=0;w>v;v++)if(o=s[v],"zIndex"in o)if(o.zIndex==h[c]){if(f.push(o.apply(n,i)),a)break;do if(c++,o=g[h[c]],o&&f.push(o.apply(n,i)),a)break;while(o)}else g[o.zIndex]=o;else if(f.push(o.apply(n,i)),a)break;return a=r,t=m,f};p._events=c,p.listeners=function(e){var t,a,n,o,i,l,d,u,p=e.split(r),h=c,g=[h],f=[];for(o=0,i=p.length;i>o;o++){for(u=[],l=0,d=g.length;d>l;l++)for(h=g[l].n,a=[h[p[o]],h[s]],n=2;n--;)t=a[n],t&&(u.push(t),f=f.concat(t.f||[]));g=u}return f},p.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var a=e.split(i),n=0,o=a.length;o>n;n++)!function(e){for(var a,n=e.split(r),o=c,i=0,s=n.length;s>i;i++)o=o.n,o=o.hasOwnProperty(n[i])&&o[n[i]]||(o[n[i]]={n:{}});for(o.f=o.f||[],i=0,s=o.f.length;s>i;i++)if(o.f[i]==t){a=!0;break}!a&&o.f.push(t)}(a[n]);return function(e){+e==+e&&(t.zIndex=+e)}},p.f=function(e){var t=[].slice.call(arguments,1);return function(){p.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},p.stop=function(){a=1},p.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},p.nts=function(){return t.split(r)},p.off=p.unbind=function(e,t){if(!e)return void(p._events=c={n:{}});var a=e.split(i);if(a.length>1)for(var n=0,l=a.length;l>n;n++)p.off(a[n],t);else{a=e.split(r);var d,u,h,n,l,g,f,m=[c];for(n=0,l=a.length;l>n;n++)for(g=0;g<m.length;g+=h.length-2){if(h=[g,1],d=m[g].n,a[n]!=s)d[a[n]]&&h.push(d[a[n]]);else for(u in d)d[o](u)&&h.push(d[u]);m.splice.apply(m,h)}for(n=0,l=m.length;l>n;n++)for(d=m[n];d.n;){if(t){if(d.f){for(g=0,f=d.f.length;f>g;g++)if(d.f[g]==t){d.f.splice(g,1);break}!d.f.length&&delete d.f}for(u in d.n)if(d.n[o](u)&&d.n[u].f){var v=d.n[u].f;for(g=0,f=v.length;f>g;g++)if(v[g]==t){v.splice(g,1);break}!v.length&&delete d.n[u].f}}else{delete d.f;for(u in d.n)d.n[o](u)&&d.n[u].f&&delete d.n[u].f}d=d.n}}},p.once=function(e,t){var a=function(){return p.unbind(e,a),t.apply(this,arguments)};return p.on(e,a)},p.version=n,p.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=p:"function"==typeof define&&define.amd?define("eve",[],function(){return p}):e.eve=p}(this),function(e,t){"function"==typeof define&&define.amd?define(["eve"],function(a){return t(e,a)}):t(e,e.eve)}(this,function(e,t){var a=function(t){var a={},n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},o=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},r=0,i="M"+(+new Date).toString(36),s=function(){return i+(r++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var a=t.s-e;t.b+=t.dur*a,t.B+=t.dur*a,t.s=e},d=function(e){var t=this;return null==e?t.spd:void(t.spd=e)},u=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},p=function(){var e=this;delete a[e.id],e.update(),t("mina.stop."+e.id,e)},h=function(){var e=this;e.pdif||(delete a[e.id],e.update(),e.pdif=e.get()-e.b)},g=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,a[e.id]=e)},f=function(){var e,t=this;if(o(t.start)){e=[];for(var a=0,n=t.start.length;n>a;a++)e[a]=+t.start[a]+(t.end[a]-t.start[a])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)},m=function(){var e=0;for(var o in a)if(a.hasOwnProperty(o)){var r=a[o],i=r.get();e++,r.s=(i-r.b)/(r.dur/r.spd),r.s>=1&&(delete a[o],r.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(r)),r.update()}e&&n(m)},v=function(e,t,o,r,i,l,w){var y={id:s(),start:e,end:t,b:o,s:0,dur:r-o,spd:1,get:i,set:l,easing:w||v.linear,status:c,speed:d,duration:u,stop:p,pause:h,resume:g,update:f};a[y.id]=y;var P,x=0;for(P in a)if(a.hasOwnProperty(P)&&(x++,2==x))break;return 1==x&&n(m),y};return v.time=l,v.getById=function(e){return a[e]||null},v.linear=function(e){return e},v.easeout=function(e){return Math.pow(e,1.7)},v.easein=function(e){return Math.pow(e,.48)},v.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,a=Math.sqrt(.1734+t*t),n=a-t,o=Math.pow(Math.abs(n),1/3)*(0>n?-1:1),r=-a-t,i=Math.pow(Math.abs(r),1/3)*(0>r?-1:1),s=o+i+.5;return 3*(1-s)*s*s+s*s*s},v.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},v.backout=function(e){if(0==e)return 0;e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},v.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},v.bounce=function(e){var t,a=7.5625,n=2.75;return 1/n>e?t=a*e*e:2/n>e?(e-=1.5/n,t=a*e*e+.75):2.5/n>e?(e-=2.25/n,t=a*e*e+.9375):(e-=2.625/n,t=a*e*e+.984375),t},e.mina=v,v}("undefined"==typeof t?function(){}:t),n=function(){function n(e,t){if(e){if(e.tagName)return C(e);if(r(e,"array")&&n.set)return n.set.apply(n,e);if(e instanceof P)return e;if(null==t)return e=$.doc.querySelector(e),C(e)}return e=null==e?"100%":e,t=null==t?"100%":t,new k(e,t)}function o(e,t){if(t){if("#text"==e&&(e=$.doc.createTextNode(t.text||"")),"string"==typeof e&&(e=o(e)),"string"==typeof t)return"xlink:"==t.substring(0,6)?e.getAttributeNS(Y,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(W,t.substring(4)):e.getAttribute(t);for(var a in t)if(t[S](a)){var n=I(t[a]);n?"xlink:"==a.substring(0,6)?e.setAttributeNS(Y,a.substring(6),n):"xml:"==a.substring(0,4)?e.setAttributeNS(W,a.substring(4),n):e.setAttribute(a,n):e.removeAttribute(a)}}else e=$.doc.createElementNS(W,e);return e}function r(e,t){return t=I.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):"array"==t&&(e instanceof Array||Array.isArray&&Array.isArray(e))?!0:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||j.call(e).slice(8,-1).toLowerCase()==t}function i(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var a in e)e[S](a)&&(t[a]=i(e[a]));return t}function s(e,t){for(var a=0,n=e.length;n>a;a++)if(e[a]===t)return e.push(e.splice(a,1)[0])}function l(e,t,a){function n(){var o=Array.prototype.slice.call(arguments,0),r=o.join("␀"),i=n.cache=n.cache||{},l=n.count=n.count||[];return i[S](r)?(s(l,r),a?a(i[r]):i[r]):(l.length>=1e3&&delete i[l.shift()],l.push(r),i[r]=e.apply(t,o),a?a(i[r]):i[r])}return n}function c(e,t,a,n,o,r){if(null==o){var i=e-a,s=t-n;return i||s?(180+180*R.atan2(-s,-i)/F+360)%360:0}return c(e,t,o,r)-c(a,n,o,r)}function d(e){return e%360*F/180}function u(e){return 180*e/F%360}function p(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,a,n){return n=n.split(/\s*,\s*|\s+/),
"rotate"==a&&1==n.length&&n.push(0,0),"scale"==a&&(n.length>2?n=n.slice(0,2):2==n.length&&n.push(0,0),1==n.length&&n.push(n[0],0,0)),t.push("skewX"==a?["m",1,0,R.tan(d(n[0])),1,0,0]:"skewY"==a?["m",1,R.tan(d(n[0])),0,1,0,0]:[a.charAt(0)].concat(n)),e}),t}function h(e,t){var a=oe(e),o=new n.Matrix;if(a)for(var r=0,i=a.length;i>r;r++){var s,l,c,d,u,p=a[r],h=p.length,g=I(p[0]).toLowerCase(),f=p[0]!=g,m=f?o.invert():0;"t"==g&&2==h?o.translate(p[1],0):"t"==g&&3==h?f?(s=m.x(0,0),l=m.y(0,0),c=m.x(p[1],p[2]),d=m.y(p[1],p[2]),o.translate(c-s,d-l)):o.translate(p[1],p[2]):"r"==g?2==h?(u=u||t,o.rotate(p[1],u.x+u.width/2,u.y+u.height/2)):4==h&&(f?(c=m.x(p[2],p[3]),d=m.y(p[2],p[3]),o.rotate(p[1],c,d)):o.rotate(p[1],p[2],p[3])):"s"==g?2==h||3==h?(u=u||t,o.scale(p[1],p[h-1],u.x+u.width/2,u.y+u.height/2)):4==h?f?(c=m.x(p[2],p[3]),d=m.y(p[2],p[3]),o.scale(p[1],p[1],c,d)):o.scale(p[1],p[1],p[2],p[3]):5==h&&(f?(c=m.x(p[3],p[4]),d=m.y(p[3],p[4]),o.scale(p[1],p[2],c,d)):o.scale(p[1],p[2],p[3],p[4])):"m"==g&&7==h&&o.add(p[1],p[2],p[3],p[4],p[5],p[6])}return o}function f(e,t){if(null==t){var a=!0;if(t=e.node.getAttribute("linearGradient"==e.type||"radialGradient"==e.type?"gradientTransform":"pattern"==e.type?"patternTransform":"transform"),!t)return new n.Matrix;t=p(t)}else t=n._.rgTransform.test(t)?I(t).replace(/\.{3}|\u2026/g,e._.transform||B):p(t),r(t,"array")&&(t=n.path?n.path.toString.call(t):I(t)),e._.transform=t;var o=h(t,e.getBBox(1));return a?o:void(e.matrix=o)}function m(e){var t=e.node.ownerSVGElement&&C(e.node.ownerSVGElement)||e.node.parentNode&&C(e.node.parentNode)||n.select("svg")||n(0,0),a=t.select("defs"),o=null==a?!1:a.node;return o||(o=b("defs",t.node).node),o}function v(e){return e.node.ownerSVGElement&&C(e.node.ownerSVGElement)||n.select("svg")}function w(e,t,a){function n(e){if(null==e)return B;if(e==+e)return e;o(c,{width:e});try{return c.getBBox().width}catch(t){return 0}}function r(e){if(null==e)return B;if(e==+e)return e;o(c,{height:e});try{return c.getBBox().height}catch(t){return 0}}function i(n,o){null==t?l[n]=o(e.attr(n)||0):n==t&&(l=o(null==a?e.attr(n)||0:a))}var s=v(e).node,l={},c=s.querySelector(".svg---mgr");switch(c||(c=o("rect"),o(c,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),s.appendChild(c)),e.type){case"rect":i("rx",n),i("ry",r);case"image":i("width",n),i("height",r);case"text":i("x",n),i("y",r);break;case"circle":i("cx",n),i("cy",r),i("r",n);break;case"ellipse":i("cx",n),i("cy",r),i("rx",n),i("ry",r);break;case"line":i("x1",n),i("x2",n),i("y1",r),i("y2",r);break;case"marker":i("refX",n),i("markerWidth",n),i("refY",r),i("markerHeight",r);break;case"radialGradient":i("fx",n),i("fy",r);break;case"tspan":i("dx",n),i("dy",r);break;default:i(t,n)}return s.removeChild(c),l}function y(e){r(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,a=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);var o=n.childNodes;for(t=0;t<o.length;t++)this[a++]=C(o[t]);return this}function P(e){if(e.snap in J)return J[e.snap];var t,a=this.id=X();try{t=e.ownerSVGElement}catch(n){}if(this.node=e,t&&(this.paper=new k(t)),this.type=e.tagName,this.anims={},this._={transform:[]},e.snap=a,J[a]=this,"g"==this.type&&(this.add=y),this.type in{g:1,mask:1,pattern:1})for(var o in k.prototype)k.prototype[S](o)&&(this[o]=k.prototype[o])}function x(e){this.node=e}function b(e,t){var a=o(e);t.appendChild(a);var n=C(a);return n}function k(e,t){var a,n,r,i=k.prototype;if(e&&"svg"==e.tagName){if(e.snap in J)return J[e.snap];var s=e.ownerDocument;a=new P(e),n=e.getElementsByTagName("desc")[0],r=e.getElementsByTagName("defs")[0],n||(n=o("desc"),n.appendChild(s.createTextNode("Created with Snap")),a.node.appendChild(n)),r||(r=o("defs"),a.node.appendChild(r)),a.defs=r;for(var l in i)i[S](l)&&(a[l]=i[l]);a.paper=a.root=a}else a=b("svg",$.doc.body),o(a.node,{height:t,version:1.1,width:e,xmlns:W});return a}function C(e){return e?e instanceof P||e instanceof x?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new k(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new k(e.contentDocument.getElementsByTagName("svg")[0]):new P(e):e}n.version="0.3.0",n.toString=function(){return"Snap v"+this.version},n._={};var $={win:e,doc:e.document};n._.glob=$;var S="hasOwnProperty",I=String,N=parseFloat,E=parseInt,R=Math,L=R.max,T=R.min,D=R.abs,F=(R.pow,R.PI),B=(R.round,""),A=" ",j=Object.prototype.toString,U=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,M="	\n\f\r   ᠎             　\u2028\u2029",V=(n._.separator=new RegExp("[,"+M+"]+"),new RegExp("["+M+"]","g"),new RegExp("["+M+"]*,["+M+"]*")),z={hs:1,rg:1},G=new RegExp("([a-z])["+M+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+M+"]*,?["+M+"]*)+)","ig"),O=new RegExp("([rstm])["+M+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+M+"]*,?["+M+"]*)+)","ig"),H=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+M+"]*,?["+M+"]*","ig"),_=0,q="S"+(+new Date).toString(36),X=function(){return q+(_++).toString(36)},Y="http://www.w3.org/1999/xlink",W="http://www.w3.org/2000/svg",J={},Q=n.url=function(e){return"url('#"+e+"')"};n._.$=o,n._.id=X,n.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,a=function(e,a,n){var o=n;return a.replace(t,function(e,t,a,n,r){t=t||n,o&&(t in o&&(o=o[t]),"function"==typeof o&&r&&(o=o()))}),o=(null==o||o==n?e:o)+""};return function(t,n){return I(t).replace(e,function(e,t){return a(e,t,n)})}}(),n._.clone=i,n._.cacher=l,n.rad=d,n.deg=u,n.angle=c,n.is=r,n.snapTo=function(e,t,a){if(a=r(a,"finite")?a:10,r(e,"array")){for(var n=e.length;n--;)if(D(e[n]-t)<=a)return e[n]}else{e=+e;var o=t%e;if(a>o)return t-o;if(o>e-a)return t-o+e}return t},n.getRGB=l(function(e){if(!e||(e=I(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:te};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:te};if(!(z[S](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=Z(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:te};var t,a,o,i,s,l,c=e.match(U);return c?(c[2]&&(o=E(c[2].substring(5),16),a=E(c[2].substring(3,5),16),t=E(c[2].substring(1,3),16)),c[3]&&(o=E((s=c[3].charAt(3))+s,16),a=E((s=c[3].charAt(2))+s,16),t=E((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4].split(V),t=N(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),a=N(l[1]),"%"==l[1].slice(-1)&&(a*=2.55),o=N(l[2]),"%"==l[2].slice(-1)&&(o*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(i=N(l[3])),l[3]&&"%"==l[3].slice(-1)&&(i/=100)),c[5]?(l=c[5].split(V),t=N(l[0]),"%"==l[0].slice(-1)&&(t/=100),a=N(l[1]),"%"==l[1].slice(-1)&&(a/=100),o=N(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(i=N(l[3])),l[3]&&"%"==l[3].slice(-1)&&(i/=100),n.hsb2rgb(t,a,o,i)):c[6]?(l=c[6].split(V),t=N(l[0]),"%"==l[0].slice(-1)&&(t/=100),a=N(l[1]),"%"==l[1].slice(-1)&&(a/=100),o=N(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(i=N(l[3])),l[3]&&"%"==l[3].slice(-1)&&(i/=100),n.hsl2rgb(t,a,o,i)):(t=T(R.round(t),255),a=T(R.round(a),255),o=T(R.round(o),255),i=T(L(i,0),1),c={r:t,g:a,b:o,toString:te},c.hex="#"+(16777216|o|a<<8|t<<16).toString(16).slice(1),c.opacity=r(i,"finite")?i:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:te}},n),n.hsb=l(function(e,t,a){return n.hsb2rgb(e,t,a).hex}),n.hsl=l(function(e,t,a){return n.hsl2rgb(e,t,a).hex}),n.rgb=l(function(e,t,a,n){if(r(n,"finite")){var o=R.round;return"rgba("+[o(e),o(t),o(a),+n.toFixed(2)]+")"}return"#"+(16777216|a|t<<8|e<<16).toString(16).slice(1)});var Z=function(e){var t=$.doc.getElementsByTagName("head")[0]||$.doc.getElementsByTagName("svg")[0],a="rgb(255, 0, 0)";return(Z=l(function(e){if("red"==e.toLowerCase())return a;t.style.color=a,t.style.color=e;var n=$.doc.defaultView.getComputedStyle(t,B).getPropertyValue("color");return n==a?null:n}))(e)},K=function(){return"hsb("+[this.h,this.s,this.b]+")"},ee=function(){return"hsl("+[this.h,this.s,this.l]+")"},te=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},ae=function(e,t,a){if(null==t&&r(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(a=e.b,t=e.g,e=e.r),null==t&&r(e,string)){var o=n.getRGB(e);e=o.r,t=o.g,a=o.b}return(e>1||t>1||a>1)&&(e/=255,t/=255,a/=255),[e,t,a]},ne=function(e,t,a,o){e=R.round(255*e),t=R.round(255*t),a=R.round(255*a);var i={r:e,g:t,b:a,opacity:r(o,"finite")?o:1,hex:n.rgb(e,t,a),toString:te};return r(o,"finite")&&(i.opacity=o),i};n.color=function(e){var t;return r(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):r(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(r(e,"string")&&(e=n.getRGB(e)),r(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=te,e},n.hsb2rgb=function(e,t,a,n){r(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(a=e.b,t=e.s,e=e.h,n=e.o),e*=360;var o,i,s,l,c;return e=e%360/60,c=a*t,l=c*(1-D(e%2-1)),o=i=s=a-c,e=~~e,o+=[c,l,0,0,l,c][e],i+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],ne(o,i,s,n)},n.hsl2rgb=function(e,t,a,n){r(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(a=e.l,t=e.s,e=e.h),(e>1||t>1||a>1)&&(e/=360,t/=100,a/=100),e*=360;var o,i,s,l,c;return e=e%360/60,c=2*t*(.5>a?a:1-a),l=c*(1-D(e%2-1)),o=i=s=a-c/2,e=~~e,o+=[c,l,0,0,l,c][e],i+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],ne(o,i,s,n)},n.rgb2hsb=function(e,t,a){a=ae(e,t,a),e=a[0],t=a[1],a=a[2];var n,o,r,i;return r=L(e,t,a),i=r-T(e,t,a),n=0==i?null:r==e?(t-a)/i:r==t?(a-e)/i+2:(e-t)/i+4,n=(n+360)%6*60/360,o=0==i?0:i/r,{h:n,s:o,b:r,toString:K}},n.rgb2hsl=function(e,t,a){a=ae(e,t,a),e=a[0],t=a[1],a=a[2];var n,o,r,i,s,l;return i=L(e,t,a),s=T(e,t,a),l=i-s,n=0==l?null:i==e?(t-a)/l:i==t?(a-e)/l+2:(e-t)/l+4,n=(n+360)%6*60/360,r=(i+s)/2,o=0==l?0:.5>r?l/(2*r):l/(2-2*r),{h:n,s:o,l:r,toString:ee}},n.parsePathString=function(e){if(!e)return null;var t=n.path(e);if(t.arr)return n.path.clone(t.arr);var a={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return r(e,"array")&&r(e[0],"array")&&(o=n.path.clone(e)),o.length||I(e).replace(G,function(e,t,n){var r=[],i=t.toLowerCase();if(n.replace(H,function(e,t){t&&r.push(+t)}),"m"==i&&r.length>2&&(o.push([t].concat(r.splice(0,2))),i="l",t="m"==t?"l":"L"),"o"==i&&1==r.length&&o.push([t,r[0]]),"r"==i)o.push([t].concat(r));else for(;r.length>=a[i]&&(o.push([t].concat(r.splice(0,a[i]))),a[i]););}),o.toString=n.path.toString,t.arr=n.path.clone(o),o};var oe=n.parseTransformString=function(e){if(!e)return null;var t=[];return r(e,"array")&&r(e[0],"array")&&(t=n.path.clone(e)),t.length||I(e).replace(O,function(e,a,n){var o=[];a.toLowerCase(),n.replace(H,function(e,t){t&&o.push(+t)}),t.push([a].concat(o))}),t.toString=n.path.toString,t};n._.svgTransform2string=p,n._.rgTransform=new RegExp("^[a-z]["+M+"]*-?\\.?\\d","i"),n._.transform2matrix=h,n._unit2px=w,$.doc.contains||$.doc.compareDocumentPosition?function(e,t){var a=9==e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e==n||!(!n||1!=n.nodeType||!(a.contains?a.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t;)if(t=t.parentNode,t==e)return!0;return!1},n._.getSomeDefs=m,n._.getSomeSVG=v,n.select=function(e){return C($.doc.querySelector(e))},n.selectAll=function(e){for(var t=$.doc.querySelectorAll(e),a=(n.set||Array)(),o=0;o<t.length;o++)a.push(C(t[o]));return a},setInterval(function(){for(var e in J)if(J[S](e)){var t=J[e],a=t.node;("svg"!=t.type&&!a.ownerSVGElement||"svg"==t.type&&(!a.parentNode||"ownerSVGElement"in a.parentNode&&!a.ownerSVGElement))&&delete J[e]}},1e4),function(e){function i(e){function t(e,t){var a=o(e.node,t);a=a&&a.match(i),a=a&&a[2],a&&"#"==a.charAt()&&(a=a.substring(1),a&&(l[a]=(l[a]||[]).concat(function(a){var n={};n[t]=Q(a),o(e.node,n)})))}function a(e){var t=o(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1),t&&(l[t]=(l[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)})))}for(var n,r=e.selectAll("*"),i=/^\s*url\(("|'|)(.*)\1\)\s*$/,s=[],l={},c=0,d=r.length;d>c;c++){n=r[c],t(n,"fill"),t(n,"stroke"),t(n,"filter"),t(n,"mask"),t(n,"clip-path"),a(n);var u=o(n.node,"id");u&&(o(n.node,{id:n.id}),s.push({old:u,id:n.id}))}for(c=0,d=s.length;d>c;c++){var p=l[s[c].old];if(p)for(var h=0,g=p.length;g>h;h++)p[h](s[c].id)}}function s(e,t,a){return function(n){var o=n.slice(e,t);return 1==o.length&&(o=o[0]),a?a(o):o}}function l(e){return function(){var t=e?"<"+this.type:"",a=this.node.attributes,n=this.node.childNodes;if(e)for(var o=0,r=a.length;r>o;o++)t+=" "+a[o].name+'="'+a[o].value.replace(/"/g,'\\"')+'"';if(n.length){for(e&&(t+=">"),o=0,r=n.length;r>o;o++)3==n[o].nodeType?t+=n[o].nodeValue:1==n[o].nodeType&&(t+=C(n[o]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}e.attr=function(e,a){var n=this;if(n.node,!e)return n;if(r(e,"string")){if(!(arguments.length>1))return t("snap.util.getattr."+e,n).firstDefined();var o={};o[e]=a,e=o}for(var i in e)e[S](i)&&t("snap.util.attr."+i,n,e[i]);return n},e.getBBox=function(e){if(!n.Matrix||!n.path)return this.node.getBBox();var t=this,a=new n.Matrix;if(t.removed)return n._.box();for(;"use"==t.type;)if(e||(a=a.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original)t=t.original;else{var o=t.attr("xlink:href");t=t.original=t.node.ownerDocument.getElementById(o.substring(o.indexOf("#")+1))}var r=t._,i=n.path.get[t.type]||n.path.get.deflt;try{return e?(r.bboxwt=i?n.path.getBBox(t.realPath=i(t)):n._.box(t.node.getBBox()),n._.box(r.bboxwt)):(t.realPath=i(t),t.matrix=t.transform().localMatrix,r.bbox=n.path.getBBox(n.path.map(t.realPath,a.add(t.matrix))),n._.box(r.bbox))}catch(s){return n._.box()}};var c=function(){return this.string};e.transform=function(e){var t=this._;if(null==e){for(var a,r=this,i=new n.Matrix(this.node.getCTM()),s=f(this),l=[s],d=new n.Matrix,u=s.toTransformString(),p=I(s)==I(this.matrix)?I(t.transform):u;"svg"!=r.type&&(r=r.parent());)l.push(f(r));for(a=l.length;a--;)d.add(l[a]);return{string:p,globalMatrix:i,totalMatrix:d,localMatrix:s,diffMatrix:i.clone().add(s.invert()),global:i.toTransformString(),total:d.toTransformString(),local:u,toString:c}}return e instanceof n.Matrix?this.matrix=e:f(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?o(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?o(this.node,{patternTransform:this.matrix}):o(this.node,{transform:this.matrix})),this},e.parent=function(){return C(this.node.parentNode)},e.append=e.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=C(e),this.node.appendChild(e.node),e.paper=this.paper}return this},e.appendTo=function(e){return e&&(e=C(e),e.append(this)),this},e.prepend=function(e){if(e){if("set"==e.type){var t,a=this;return e.forEach(function(e){t?t.after(e):a.prepend(e),t=e}),this}e=C(e);var n=e.parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),n&&n.add()}return this},e.prependTo=function(e){return e=C(e),e.prepend(this),this},e.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var a=e.parent();t.node.parentNode.insertBefore(e.node,t.node),a&&a.add()}),this.parent().add(),this}e=C(e);var a=e.parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),a&&a.add(),e.paper=this.paper,this},e.after=function(e){e=C(e);var t=e.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},e.insertBefore=function(e){e=C(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.insertAfter=function(e){e=C(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},e.select=function(e){return C(this.node.querySelector(e))},e.selectAll=function(e){for(var t=this.node.querySelectorAll(e),a=(n.set||Array)(),o=0;o<t.length;o++)a.push(C(t[o]));return a},e.asPX=function(e,t){return null==t&&(t=this.attr(e)),+w(this,e,t)},e.use=function(){var e,t=this.node.id;return t||(t=this.id,o(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?b(this.type,this.node.parentNode):b("use",this.node.parentNode),o(e.node,{"xlink:href":"#"+t}),e.original=this,e};var d=/\S+/g;e.addClass=function(e){var t,a,n,o,r=(e||"").match(d)||[],i=this.node,s=i.className.baseVal,l=s.match(d)||[];if(r.length){for(t=0;n=r[t++];)a=l.indexOf(n),~a||l.push(n);o=l.join(" "),s!=o&&(i.className.baseVal=o)}return this},e.removeClass=function(e){var t,a,n,o,r=(e||"").match(d)||[],i=this.node,s=i.className.baseVal,l=s.match(d)||[];if(l.length){for(t=0;n=r[t++];)a=l.indexOf(n),~a&&l.splice(a,1);o=l.join(" "),s!=o&&(i.className.baseVal=o)}return this},e.hasClass=function(e){var t=this.node,a=t.className.baseVal,n=a.match(d)||[];return!!~n.indexOf(e)},e.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);var a,n,o,r,i=(e||"").match(d)||[],s=this.node,l=s.className.baseVal,c=l.match(d)||[];for(a=0;o=i[a++];)n=c.indexOf(o),~n?c.splice(n,1):c.push(o);return r=c.join(" "),l!=r&&(s.className.baseVal=r),this},e.clone=function(){var e=C(this.node.cloneNode(!0));return o(e.node,"id")&&o(e.node,{id:e.id}),i(e),e.insertAfter(this),e},e.toDefs=function(){var e=m(this);return e.appendChild(this.node),this},e.pattern=e.toPattern=function(e,t,a,n){var i=b("pattern",m(this));return null==e&&(e=this.getBBox()),r(e,"object")&&"x"in e&&(t=e.y,a=e.width,n=e.height,e=e.x),o(i.node,{x:e,y:t,width:a,height:n,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[e,t,a,n].join(" ")}),i.node.appendChild(this.node),i},e.marker=function(e,t,a,n,i,s){var l=b("marker",m(this));return null==e&&(e=this.getBBox()),r(e,"object")&&"x"in e&&(t=e.y,a=e.width,n=e.height,i=e.refX||e.cx,s=e.refY||e.cy,e=e.x),o(l.node,{viewBox:[e,t,a,n].join(A),markerWidth:a,markerHeight:n,orient:"auto",refX:i||0,refY:s||0,id:l.id}),l.node.appendChild(this.node),l};var u=function(e,t,n,o){"function"!=typeof n||n.length||(o=n,n=a.linear),this.attr=e,this.dur=t,n&&(this.easing=n),o&&(this.callback=o)};n._.Animation=u,n.animation=function(e,t,a,n){return new u(e,t,a,n)},e.inAnim=function(){var e=this,t=[];for(var a in e.anims)e.anims[S](a)&&!function(e){t.push({anim:new u(e._attrs,e.dur,e.easing,e._callback),mina:e,curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[a]);return t},n.animate=function(e,n,o,r,i,s){"function"!=typeof i||i.length||(s=i,i=a.linear);var l=a.time(),c=a(e,n,l,l+r,a.time,o,i);return s&&t.once("mina.finish."+c.id,s),c},e.stop=function(){for(var e=this.inAnim(),t=0,a=e.length;a>t;t++)e[t].stop();return this},e.animate=function(e,n,o,i){"function"!=typeof o||o.length||(i=o,o=a.linear),e instanceof u&&(i=e.callback,o=e.easing,n=o.dur,e=e.attr);var l,c,d,p,h=[],g=[],f={},m=this;for(var v in e)if(e[S](v)){m.equal?(p=m.equal(v,I(e[v])),l=p.from,c=p.to,d=p.f):(l=+m.attr(v),c=+e[v]);var w=r(l,"array")?l.length:1;f[v]=s(h.length,h.length+w,d),h=h.concat(l),g=g.concat(c)}var y=a.time(),P=a(h,g,y,y+n,a.time,function(e){var t={};for(var a in f)f[S](a)&&(t[a]=f[a](e));m.attr(t)},o);return m.anims[P.id]=P,P._attrs=e,P._callback=i,t("snap.animcreated."+m.id,P),t.once("mina.finish."+P.id,function(){delete m.anims[P.id],i&&i.call(m)}),t.once("mina.stop."+P.id,function(){delete m.anims[P.id]}),m};var p={};e.data=function(e,a){var o=p[this.id]=p[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,o,null),o;if(1==arguments.length){if(n.is(e,"object")){for(var r in e)e[S](r)&&this.data(r,e[r]);return this}return t("snap.data.get."+this.id,this,o[e],e),o[e]}return o[e]=a,t("snap.data.set."+this.id,this,a,e),this},e.removeData=function(e){return null==e?p[this.id]={}:p[this.id]&&delete p[this.id][e],this},e.outerSVG=e.toString=l(1),e.innerSVG=l()}(P.prototype),n.parse=function(e){var t=$.doc.createDocumentFragment(),a=!0,n=$.doc.createElement("div");if(e=I(e),e.match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",a=!1),n.innerHTML=e,e=n.getElementsByTagName("svg")[0])if(a)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return n.innerHTML=B,new x(t)},x.prototype.select=P.prototype.select,x.prototype.selectAll=P.prototype.selectAll,n.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=$.doc.createDocumentFragment(),a=0,o=e.length;o>a;a++){var r=e[a];r.node&&r.node.nodeType&&t.appendChild(r.node),r.nodeType&&t.appendChild(r),"string"==typeof r&&t.appendChild(n.parse(r).node)}return new x(t)},n._.make=b,n._.wrap=C,k.prototype.el=function(e,t){var a=b(e,this.node);return t&&a.attr(t),a},t.on("snap.util.getattr",function(){var e=t.nt();e=e.substring(e.lastIndexOf(".")+1);var a=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return re[S](a)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):o(this.node,e)});var re={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var a=t.nt(),n={};a=a.substring(a.lastIndexOf(".")+1),n[a]=e;var r=a.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),i=a.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});re[S](i)?this.node.style[r]=null==e?B:e:o(this.node,n)}),function(){}(k.prototype),n.ajax=function(e,a,n,o){var i=new XMLHttpRequest,s=X();if(i){if(r(a,"function"))o=n,n=a,a=null;else if(r(a,"object")){var l=[];for(var c in a)a.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));a=l.join("&")}return i.open(a?"POST":"GET",e,!0),a&&(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded")),n&&(t.once("snap.ajax."+s+".0",n),t.once("snap.ajax."+s+".200",n),t.once("snap.ajax."+s+".304",n)),i.onreadystatechange=function(){4==i.readyState&&t("snap.ajax."+s+"."+i.status,o,i)},4==i.readyState?i:(i.send(a),i)}},n.load=function(e,t,a){n.ajax(e,function(e){var o=n.parse(e.responseText);a?t.call(a,o):t(o)})};var ie=function(e){var t=e.getBoundingClientRect(),a=e.ownerDocument,n=a.body,o=a.documentElement,r=o.clientTop||n.clientTop||0,i=o.clientLeft||n.clientLeft||0,s=t.top+(g.win.pageYOffset||o.scrollTop||n.scrollTop)-r,l=t.left+(g.win.pageXOffset||o.scrollLeft||n.scrollLeft)-i;return{y:s,x:l}};return n.getElementByPoint=function(e,t){var a=this,n=(a.canvas,$.doc.elementFromPoint(e,t));if($.win.opera&&"svg"==n.tagName){var o=ie(n),r=n.createSVGRect();r.x=e-o.x,r.y=t-o.y,r.width=r.height=1;var i=n.getIntersectionList(r,null);i.length&&(n=i[i.length-1])}return n?C(n):null},n.plugin=function(e){e(n,P,k,$,x)},$.win.Snap=n,n}();return n.plugin(function(e){function t(e,t,n,o,r,i){return null==t&&"[object SVGMatrix]"==a.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+o,this.e=+r,this.f=+i):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var a=Object.prototype.toString,n=String,o=Math,r="";!function(a){function i(e){return e[0]*e[0]+e[1]*e[1]}function s(e){var t=o.sqrt(i(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}a.add=function(e,a,n,o,r,i){var s,l,c,d,u=[[],[],[]],p=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,n,r],[a,o,i],[0,0,1]];for(e&&e instanceof t&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),s=0;3>s;s++)for(l=0;3>l;l++){for(d=0,c=0;3>c;c++)d+=p[s][c]*h[c][l];u[s][l]=d}return this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2],this},a.invert=function(){var e=this,a=e.a*e.d-e.b*e.c;return new t(e.d/a,-e.b/a,-e.c/a,e.a/a,(e.c*e.f-e.d*e.e)/a,(e.b*e.e-e.a*e.f)/a)},a.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},a.translate=function(e,t){return this.add(1,0,0,1,e,t)},a.scale=function(e,t,a,n){return null==t&&(t=e),(a||n)&&this.add(1,0,0,1,a,n),this.add(e,0,0,t,0,0),(a||n)&&this.add(1,0,0,1,-a,-n),this},a.rotate=function(t,a,n){t=e.rad(t),a=a||0,n=n||0;var r=+o.cos(t).toFixed(9),i=+o.sin(t).toFixed(9);return this.add(r,i,-i,r,a,n),this.add(1,0,0,1,-a,-n)},a.x=function(e,t){return e*this.a+t*this.c+this.e},a.y=function(e,t){return e*this.b+t*this.d+this.f},a.get=function(e){return+this[n.fromCharCode(97+e)].toFixed(4)},a.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},a.determinant=function(){return this.a*this.d-this.b*this.c},a.split=function(){var t={};t.dx=this.e,t.dy=this.f;var a=[[this.a,this.c],[this.b,this.d]];t.scalex=o.sqrt(i(a[0])),s(a[0]),t.shear=a[0][0]*a[1][0]+a[0][1]*a[1][1],a[1]=[a[1][0]-a[0][0]*t.shear,a[1][1]-a[0][1]*t.shear],t.scaley=o.sqrt(i(a[1])),s(a[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var n=-a[0][1],r=a[1][1];return 0>r?(t.rotate=e.deg(o.acos(r)),0>n&&(t.rotate=360-t.rotate)):t.rotate=e.deg(o.asin(n)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},a.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:r)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:r)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:r))}}(t.prototype),e.Matrix=t,e.matrix=function(e,a,n,o,r,i){return new t(e,a,n,o,r,i)}}),n.plugin(function(e,a,n,o,r){function i(n){return function(o){if(t.stop(),o instanceof r&&1==o.node.childNodes.length&&("radialGradient"==o.node.firstChild.tagName||"linearGradient"==o.node.firstChild.tagName||"pattern"==o.node.firstChild.tagName)&&(o=o.node.firstChild,h(this).appendChild(o),o=u(o)),o instanceof a)if("radialGradient"==o.type||"linearGradient"==o.type||"pattern"==o.type){o.node.id||f(o.node,{id:o.id});var i=m(o.node.id)}else i=o.attr(n);else if(i=e.color(o),i.error){var s=e(h(this).ownerSVGElement).gradient(o);s?(s.node.id||f(s.node,{id:s.id}),i=m(s.node.id)):i=o}else i=v(i);var l={};l[n]=i,f(this.node,l),this.node.style[n]=y}}function s(e){t.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function l(e){for(var t=[],a=e.childNodes,n=0,o=a.length;o>n;n++){var r=a[n];3==r.nodeType&&t.push(r.nodeValue),"tspan"==r.tagName&&t.push(1==r.childNodes.length&&3==r.firstChild.nodeType?r.firstChild.nodeValue:l(r))}return t}function c(){return t.stop(),this.node.style.fontSize}var d=e._.make,u=e._.wrap,p=e.is,h=e._.getSomeDefs,g=/^url\(#?([^)]+)\)$/,f=e._.$,m=e.url,v=String,w=e._.separator,y="";t.on("snap.util.attr.mask",function(e){if(e instanceof a||e instanceof r){if(t.stop(),e instanceof r&&1==e.node.childNodes.length&&(e=e.node.firstChild,h(this).appendChild(e),e=u(e)),"mask"==e.type)var n=e;else n=d("mask",h(this)),n.node.appendChild(e.node);!n.node.id&&f(n.node,{id:n.id}),f(this.node,{mask:m(n.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof a||e instanceof r){if(t.stop(),"clipPath"==e.type)var n=e;else n=d("clipPath",h(this)),n.node.appendChild(e.node),!n.node.id&&f(n.node,{id:n.id});f(this.node,{"clip-path":m(n.id)})}}),t.on("snap.util.attr.fill",i("fill")),t.on("snap.util.attr.stroke",i("stroke"));var P=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){e=v(e);var t=e.match(P);if(!t)return null;var a=t[1],n=t[2],o=t[3];return n=n.split(/\s*,\s*/).map(function(e){return+e==e?+e:e}),1==n.length&&0==n[0]&&(n=[]),o=o.split("-"),o=o.map(function(e){e=e.split(":");var t={color:e[0]};return e[1]&&(t.offset=parseFloat(e[1])),t}),{type:a,params:n,stops:o}}),t.on("snap.util.attr.d",function(a){t.stop(),p(a,"array")&&p(a[0],"array")&&(a=e.path.toString.call(a)),a=v(a),a.match(/[ruo]/i)&&(a=e.path.toAbsolute(a)),f(this.node,{d:a})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=v(e);for(var a=o.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.class",function(e){t.stop(),this.node.className.baseVal=e})(-1),t.on("snap.util.attr.viewBox",function(e){var a;a=p(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):p(e,"array")?e.join(" "):e,f(this.node,{viewBox:a}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),f(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var n,o,r;if(!e&&this.textPath){for(o=this.textPath;o.node.firstChild;)this.node.appendChild(o.node.firstChild);return o.remove(),void delete this.textPath}if(p(e,"string")){var i=h(this),s=u(i.parentNode).path(e);i.appendChild(s.node),n=s.id,s.attr({id:n})}else e=u(e),e instanceof a&&(n=e.attr("id"),n||(n=e.id,e.attr({id:n})));if(n)if(o=this.textPath,r=this.node,o)o.attr({"xlink:href":"#"+n});else{for(o=f("textPath",{"xlink:href":"#"+n});r.firstChild;)o.appendChild(r.firstChild);r.appendChild(o),this.textPath=u(o)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var a=this.node,n=function(e){var t=f("tspan");if(p(e,"array"))for(var a=0;a<e.length;a++)t.appendChild(n(e[a]));else t.appendChild(o.doc.createTextNode(e));return t.normalize&&t.normalize(),t};a.firstChild;)a.removeChild(a.firstChild);for(var r=n(e);r.firstChild;)a.appendChild(r.firstChild)}t.stop()})(-1),t.on("snap.util.attr.fontSize",s)(-1),t.on("snap.util.attr.font-size",s)(-1),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function a(a){return function(){t.stop();var n=o.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+a);return"none"==n?n:e(o.doc.getElementById(n.match(g)[1]))}}function n(e){return function(a){t.stop();var n="marker"+e.charAt(0).toUpperCase()+e.substring(1);

if(""==a||!a)return void(this.node.style[n]="none");if("marker"==a.type){var o=a.node.id;return o||f(a.node,{id:a.id}),void(this.node.style[n]=m(o))}}}t.on("snap.util.getattr.marker-end",a("end"))(-1),t.on("snap.util.getattr.markerEnd",a("end"))(-1),t.on("snap.util.getattr.marker-start",a("start"))(-1),t.on("snap.util.getattr.markerStart",a("start"))(-1),t.on("snap.util.getattr.marker-mid",a("mid"))(-1),t.on("snap.util.getattr.markerMid",a("mid"))(-1),t.on("snap.util.attr.marker-end",n("end"))(-1),t.on("snap.util.attr.markerEnd",n("end"))(-1),t.on("snap.util.attr.marker-start",n("start"))(-1),t.on("snap.util.attr.markerStart",n("start"))(-1),t.on("snap.util.attr.marker-mid",n("mid"))(-1),t.on("snap.util.attr.markerMid",n("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){return"rect"==this.type&&f(this.node,"rx")==f(this.node,"ry")?(t.stop(),f(this.node,"rx")):void 0})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=l(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var a=f(this.node,"viewBox");return a?(a=a.split(w),e._.box(+a[0],+a[1],+a[2],+a[3])):void 0})(-1),t.on("snap.util.getattr.points",function(){var e=f(this.node,"points");return t.stop(),e?e.split(w):void 0})(-1),t.on("snap.util.getattr.path",function(){var e=f(this.node,"d");return t.stop(),e})(-1),t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),t.on("snap.util.getattr.fontSize",c)(-1),t.on("snap.util.getattr.font-size",c)(-1)}),n.plugin(function(){function e(e){return e}function a(e){return function(t){return+t.toFixed(3)+e}}var n={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},o=String,r=/[a-z]+$/i,i=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;t.on("snap.util.attr",function(e){var a=o(e).match(i);if(a){var s=t.nt(),l=s.substring(s.lastIndexOf(".")+1),c=this.attr(l),d={};t.stop();var u=a[3]||"",p=c.match(r),h=n[a[1]];if(p&&p==u?e=h(parseFloat(c),+a[2]):(c=this.asPX(l),e=h(this.asPX(l),this.asPX(l,a[2]+u))),isNaN(c)||isNaN(e))return;d[l]=e,this.attr(d)}})(-10),t.on("snap.util.equal",function(s,l){var c=o(this.attr(s)||""),d=o(l).match(i);if(d){t.stop();var u=d[3]||"",p=c.match(r),h=n[d[1]];return p&&p==u?{from:parseFloat(c),to:h(parseFloat(c),+d[2]),f:a(p)}:(c=this.asPX(s),{from:c,to:h(c,this.asPX(s,d[2]+u)),f:e})}})(-10)}),n.plugin(function(e,a,n,o){var r=n.prototype,i=e.is;r.rect=function(e,t,a,n,o,r){var s;return null==r&&(r=o),i(e,"object")&&"[object Object]"==e?s=e:null!=e&&(s={x:e,y:t,width:a,height:n},null!=o&&(s.rx=o,s.ry=r)),this.el("rect",s)},r.circle=function(e,t,a){var n;return i(e,"object")&&"[object Object]"==e?n=e:null!=e&&(n={cx:e,cy:t,r:a}),this.el("circle",n)};var s=function(){function e(){this.parentNode.removeChild(this)}return function(t,a){var n=o.doc.createElement("img"),r=o.doc.body;n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){a.call(n),n.onload=n.onerror=null,r.removeChild(n)},n.onerror=e,r.appendChild(n),n.src=t}}();r.image=function(t,a,n,o,r){var l=this.el("image");if(i(t,"object")&&"src"in t)l.attr(t);else if(null!=t){var c={"xlink:href":t,preserveAspectRatio:"none"};null!=a&&null!=n&&(c.x=a,c.y=n),null!=o&&null!=r?(c.width=o,c.height=r):s(t,function(){e._.$(l.node,{width:this.offsetWidth,height:this.offsetHeight})}),e._.$(l.node,c)}return l},r.ellipse=function(e,t,a,n){var o;return i(e,"object")&&"[object Object]"==e?o=e:null!=e&&(o={cx:e,cy:t,rx:a,ry:n}),this.el("ellipse",o)},r.path=function(e){var t;return i(e,"object")&&!i(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},r.group=r.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},r.svg=function(e,t,a,n,o,r,s,l){var c={};return i(e,"object")&&null==t?c=e:(null!=e&&(c.x=e),null!=t&&(c.y=t),null!=a&&(c.width=a),null!=n&&(c.height=n),null!=o&&null!=r&&null!=s&&null!=l&&(c.viewBox=[o,r,s,l])),this.el("svg",c)},r.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},r.ptrn=function(e,t,a,n,o,r,s,l){if(i(e,"object"))var c=e;else arguments.length?(c={},null!=e&&(c.x=e),null!=t&&(c.y=t),null!=a&&(c.width=a),null!=n&&(c.height=n),null!=o&&null!=r&&null!=s&&null!=l&&(c.viewBox=[o,r,s,l])):c={patternUnits:"userSpaceOnUse"};return this.el("pattern",c)},r.use=function(e){return null!=e?(make("use",this.node),e instanceof a&&(e.attr("id")||e.attr({id:ID()}),e=e.attr("id")),this.el("use",{"xlink:href":e})):a.prototype.use.call(this)},r.text=function(e,t,a){var n={};return i(e,"object")?n=e:null!=e&&(n={x:e,y:t,text:a||""}),this.el("text",n)},r.line=function(e,t,a,n){var o={};return i(e,"object")?o=e:null!=e&&(o={x1:e,x2:a,y1:t,y2:n}),this.el("line",o)},r.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return i(e,"object")&&!i(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},r.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return i(e,"object")&&!i(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},function(){function a(){return this.selectAll("stop")}function n(t,a){var n=c("stop"),o={offset:+a+"%"};return t=e.color(t),o["stop-color"]=t.hex,t.opacity<1&&(o["stop-opacity"]=t.opacity),c(n,o),this.node.appendChild(n),this}function o(){if("linearGradient"==this.type){var t=c(this.node,"x1")||0,a=c(this.node,"x2")||1,n=c(this.node,"y1")||0,o=c(this.node,"y2")||0;return e._.box(t,n,math.abs(a-t),math.abs(o-n))}var r=this.node.cx||.5,i=this.node.cy||.5,s=this.node.r||0;return e._.box(r-s,i-s,2*s,2*s)}function i(e,a){function n(e,t){for(var a=(t-u)/(e-p),n=p;e>n;n++)i[n].offset=+(+u+a*(n-p)).toFixed(2);p=e,u=t}var o,r=t("snap.util.grad.parse",null,a).firstDefined();if(!r)return null;r.params.unshift(e),o="l"==r.type.toLowerCase()?s.apply(0,r.params):l.apply(0,r.params),r.type!=r.type.toLowerCase()&&c(o.node,{gradientUnits:"userSpaceOnUse"});var i=r.stops,d=i.length,u=0,p=0;d--;for(var h=0;d>h;h++)"offset"in i[h]&&n(h,i[h].offset);for(i[d].offset=i[d].offset||100,n(d,i[d].offset),h=0;d>=h;h++){var g=i[h];o.addStop(g.color,g.offset)}return o}function s(t,r,i,s,l){var d=e._.make("linearGradient",t);return d.stops=a,d.addStop=n,d.getBBox=o,null!=r&&c(d.node,{x1:r,y1:i,x2:s,y2:l}),d}function l(t,r,i,s,l,d){var u=e._.make("radialGradient",t);return u.stops=a,u.addStop=n,u.getBBox=o,null!=r&&c(u.node,{cx:r,cy:i,r:s}),null!=l&&null!=d&&c(u.node,{fx:l,fy:d}),u}var c=e._.$;r.gradient=function(e){return i(this.defs,e)},r.gradientLinear=function(e,t,a,n){return s(this.defs,e,t,a,n)},r.gradientRadial=function(e,t,a,n,o){return l(this.defs,e,t,a,n,o)},r.toString=function(){var t,a=this.node.ownerDocument,n=a.createDocumentFragment(),o=a.createElement("div"),r=this.node.cloneNode(!0);return n.appendChild(o),o.appendChild(r),e._.$(r,{xmlns:"http://www.w3.org/2000/svg"}),t=o.innerHTML,n.removeChild(n.firstChild),t},r.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):r.clear.call({node:t}),t=e}}()}),n.plugin(function(e,t){function a(e){var t=a.ps=a.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var a in t)t[A](a)&&a!=e&&(t[a].sleep--,!t[a].sleep&&delete t[a])}),t[e]}function n(e,t,a,n){return null==e&&(e=t=a=n=0),null==t&&(t=e.y,a=e.width,n=e.height,e=e.x),{x:e,y:t,width:a,w:a,height:n,h:n,x2:e+a,y2:t+n,cx:e+a/2,cy:t+n/2,r1:M.min(a,n)/2,r2:M.max(a,n)/2,r0:M.sqrt(a*a+n*n)/2,path:b(e,t,a,n),vb:[e,t,a,n].join(" ")}}function o(){return this.join(",").replace(j,"$1")}function r(e){var t=B(e);return t.toString=o,t}function i(e,t,a,n,o,r,i,s,c){return null==c?h(e,t,a,n,o,r,i,s):l(e,t,a,n,o,r,i,s,g(e,t,a,n,o,r,i,s,c))}function s(a,n){function o(e){return+(+e).toFixed(3)}return e._.cacher(function(e,r,s){e instanceof t&&(e=e.attr("d")),e=R(e);for(var c,d,u,p,h,g="",f={},m=0,v=0,w=e.length;w>v;v++){if(u=e[v],"M"==u[0])c=+u[1],d=+u[2];else{if(p=i(c,d,u[1],u[2],u[3],u[4],u[5],u[6]),m+p>r){if(n&&!f.start){if(h=i(c,d,u[1],u[2],u[3],u[4],u[5],u[6],r-m),g+=["C"+o(h.start.x),o(h.start.y),o(h.m.x),o(h.m.y),o(h.x),o(h.y)],s)return g;f.start=g,g=["M"+o(h.x),o(h.y)+"C"+o(h.n.x),o(h.n.y),o(h.end.x),o(h.end.y),o(u[5]),o(u[6])].join(),m+=p,c=+u[5],d=+u[6];continue}if(!a&&!n)return h=i(c,d,u[1],u[2],u[3],u[4],u[5],u[6],r-m)}m+=p,c=+u[5],d=+u[6]}g+=u.shift()+u}return f.end=g,h=a?m:n?f:l(c,d,u[0],u[1],u[2],u[3],u[4],u[5],1)},null,e._.clone)}function l(e,t,a,n,o,r,i,s,l){var c=1-l,d=O(c,3),u=O(c,2),p=l*l,h=p*l,g=d*e+3*u*l*a+3*c*l*l*o+h*i,f=d*t+3*u*l*n+3*c*l*l*r+h*s,m=e+2*l*(a-e)+p*(o-2*a+e),v=t+2*l*(n-t)+p*(r-2*n+t),w=a+2*l*(o-a)+p*(i-2*o+a),y=n+2*l*(r-n)+p*(s-2*r+n),P=c*e+l*a,x=c*t+l*n,b=c*o+l*i,k=c*r+l*s,C=90-180*M.atan2(m-w,v-y)/V;return{x:g,y:f,m:{x:m,y:v},n:{x:w,y:y},start:{x:P,y:x},end:{x:b,y:k},alpha:C}}function c(t,a,o,r,i,s,l,c){e.is(t,"array")||(t=[t,a,o,r,i,s,l,c]);var d=E.apply(null,t);return n(d.min.x,d.min.y,d.max.x-d.min.x,d.max.y-d.min.y)}function d(e,t,a){return t>=e.x&&t<=e.x+e.width&&a>=e.y&&a<=e.y+e.height}function u(e,t){return e=n(e),t=n(t),d(t,e.x,e.y)||d(t,e.x2,e.y)||d(t,e.x,e.y2)||d(t,e.x2,e.y2)||d(e,t.x,t.y)||d(e,t.x2,t.y)||d(e,t.x,t.y2)||d(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function p(e,t,a,n,o){var r=-3*t+9*a-9*n+3*o,i=e*r+6*t-12*a+6*n;return e*i-3*t+3*a}function h(e,t,a,n,o,r,i,s,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var c=l/2,d=12,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],g=0,f=0;d>f;f++){var m=c*u[f]+c,v=p(m,e,a,o,i),w=p(m,t,n,r,s),y=v*v+w*w;g+=h[f]*M.sqrt(y)}return c*g}function g(e,t,a,n,o,r,i,s,l){if(!(0>l||h(e,t,a,n,o,r,i,s)<l)){var c,d=1,u=d/2,p=d-u,g=.01;for(c=h(e,t,a,n,o,r,i,s,p);H(c-l)>g;)u/=2,p+=(l>c?1:-1)*u,c=h(e,t,a,n,o,r,i,s,p);return p}}function f(e,t,a,n,o,r,i,s){if(!(G(e,a)<z(o,i)||z(e,a)>G(o,i)||G(t,n)<z(r,s)||z(t,n)>G(r,s))){var l=(e*n-t*a)*(o-i)-(e-a)*(o*s-r*i),c=(e*n-t*a)*(r-s)-(t-n)*(o*s-r*i),d=(e-a)*(r-s)-(t-n)*(o-i);if(d){var u=l/d,p=c/d,h=+u.toFixed(2),g=+p.toFixed(2);if(!(h<+z(e,a).toFixed(2)||h>+G(e,a).toFixed(2)||h<+z(o,i).toFixed(2)||h>+G(o,i).toFixed(2)||g<+z(t,n).toFixed(2)||g>+G(t,n).toFixed(2)||g<+z(r,s).toFixed(2)||g>+G(r,s).toFixed(2)))return{x:u,y:p}}}}function m(e,t,a){var n=c(e),o=c(t);if(!u(n,o))return a?0:[];for(var r=h.apply(0,e),i=h.apply(0,t),s=~~(r/8),d=~~(i/8),p=[],g=[],m={},v=a?0:[],w=0;s+1>w;w++){var y=l.apply(0,e.concat(w/s));p.push({x:y.x,y:y.y,t:w/s})}for(w=0;d+1>w;w++)y=l.apply(0,t.concat(w/d)),g.push({x:y.x,y:y.y,t:w/d});for(w=0;s>w;w++)for(var P=0;d>P;P++){var x=p[w],b=p[w+1],k=g[P],C=g[P+1],$=H(b.x-x.x)<.001?"y":"x",S=H(C.x-k.x)<.001?"y":"x",I=f(x.x,x.y,b.x,b.y,k.x,k.y,C.x,C.y);if(I){if(m[I.x.toFixed(4)]==I.y.toFixed(4))continue;m[I.x.toFixed(4)]=I.y.toFixed(4);var N=x.t+H((I[$]-x[$])/(b[$]-x[$]))*(b.t-x.t),E=k.t+H((I[S]-k[S])/(C[S]-k[S]))*(C.t-k.t);N>=0&&1>=N&&E>=0&&1>=E&&(a?v++:v.push({x:I.x,y:I.y,t1:N,t2:E}))}}return v}function v(e,t){return y(e,t)}function w(e,t){return y(e,t,1)}function y(e,t,a){e=R(e),t=R(t);for(var n,o,r,i,s,l,c,d,u,p,h=a?0:[],g=0,f=e.length;f>g;g++){var v=e[g];if("M"==v[0])n=s=v[1],o=l=v[2];else{"C"==v[0]?(u=[n,o].concat(v.slice(1)),n=u[6],o=u[7]):(u=[n,o,n,o,s,l,s,l],n=s,o=l);for(var w=0,y=t.length;y>w;w++){var P=t[w];if("M"==P[0])r=c=P[1],i=d=P[2];else{"C"==P[0]?(p=[r,i].concat(P.slice(1)),r=p[6],i=p[7]):(p=[r,i,r,i,c,d,c,d],r=c,i=d);var x=m(u,p,a);if(a)h+=x;else{for(var b=0,k=x.length;k>b;b++)x[b].segment1=g,x[b].segment2=w,x[b].bez1=u,x[b].bez2=p;h=h.concat(x)}}}}}return h}function P(e,t,a){var n=x(e);return d(n,t,a)&&y(e,[["M",t,a],["H",n.x2+10]],1)%2==1}function x(e){var t=a(e);if(t.bbox)return B(t.bbox);if(!e)return n();e=R(e);for(var o,r=0,i=0,s=[],l=[],c=0,d=e.length;d>c;c++)if(o=e[c],"M"==o[0])r=o[1],i=o[2],s.push(r),l.push(i);else{var u=E(r,i,o[1],o[2],o[3],o[4],o[5],o[6]);s=s.concat(u.min.x,u.max.x),l=l.concat(u.min.y,u.max.y),r=o[5],i=o[6]}var p=z.apply(0,s),h=z.apply(0,l),g=G.apply(0,s),f=G.apply(0,l),m=n(p,h,g-p,f-h);return t.bbox=B(m),m}function b(e,t,a,n,r){if(r)return[["M",+e+ +r,t],["l",a-2*r,0],["a",r,r,0,0,1,r,r],["l",0,n-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-a,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-n],["a",r,r,0,0,1,r,-r],["z"]];var i=[["M",e,t],["l",a,0],["l",0,n],["l",-a,0],["z"]];return i.toString=o,i}function k(e,t,a,n,r){if(null==r&&null==n&&(n=a),e=+e,t=+t,a=+a,n=+n,null!=r)var i=Math.PI/180,s=e+a*Math.cos(-n*i),l=e+a*Math.cos(-r*i),c=t+a*Math.sin(-n*i),d=t+a*Math.sin(-r*i),u=[["M",s,c],["A",a,a,0,+(r-n>180),0,l,d]];else u=[["M",e,t],["m",0,-n],["a",a,n,0,1,1,0,2*n],["a",a,n,0,1,1,0,-2*n],["z"]];return u.toString=o,u}function C(t){var n=a(t),i=String.prototype.toLowerCase;if(n.rel)return r(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var s=[],l=0,c=0,d=0,u=0,p=0;"M"==t[0][0]&&(l=t[0][1],c=t[0][2],d=l,u=c,p++,s.push(["M",l,c]));for(var h=p,g=t.length;g>h;h++){var f=s[h]=[],m=t[h];if(m[0]!=i.call(m[0]))switch(f[0]=i.call(m[0]),f[0]){case"a":f[1]=m[1],f[2]=m[2],f[3]=m[3],f[4]=m[4],f[5]=m[5],f[6]=+(m[6]-l).toFixed(3),f[7]=+(m[7]-c).toFixed(3);break;case"v":f[1]=+(m[1]-c).toFixed(3);break;case"m":d=m[1],u=m[2];default:for(var v=1,w=m.length;w>v;v++)f[v]=+(m[v]-(v%2?l:c)).toFixed(3)}else{f=s[h]=[],"m"==m[0]&&(d=m[1]+l,u=m[2]+c);for(var y=0,P=m.length;P>y;y++)s[h][y]=m[y]}var x=s[h].length;switch(s[h][0]){case"z":l=d,c=u;break;case"h":l+=+s[h][x-1];break;case"v":c+=+s[h][x-1];break;default:l+=+s[h][x-2],c+=+s[h][x-1]}}return s.toString=o,n.rel=r(s),s}function $(t){var n=a(t);if(n.abs)return r(n.abs);if(F(t,"array")&&F(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var i,s=[],l=0,c=0,d=0,u=0,p=0;"M"==t[0][0]&&(l=+t[0][1],c=+t[0][2],d=l,u=c,p++,s[0]=["M",l,c]);for(var h,g,f=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),m=p,v=t.length;v>m;m++){if(s.push(h=[]),g=t[m],i=g[0],i!=i.toUpperCase())switch(h[0]=i.toUpperCase(),h[0]){case"A":h[1]=g[1],h[2]=g[2],h[3]=g[3],h[4]=g[4],h[5]=g[5],h[6]=+g[6]+l,h[7]=+g[7]+c;break;case"V":h[1]=+g[1]+c;break;case"H":h[1]=+g[1]+l;break;case"R":for(var w=[l,c].concat(g.slice(1)),y=2,P=w.length;P>y;y++)w[y]=+w[y]+l,w[++y]=+w[y]+c;s.pop(),s=s.concat(T(w,f));break;case"O":s.pop(),w=k(l,c,g[1],g[2]),w.push(w[0]),s=s.concat(w);break;case"U":s.pop(),s=s.concat(k(l,c,g[1],g[2],g[3])),h=["U"].concat(s[s.length-1].slice(-2));break;case"M":d=+g[1]+l,u=+g[2]+c;default:for(y=1,P=g.length;P>y;y++)h[y]=+g[y]+(y%2?l:c)}else if("R"==i)w=[l,c].concat(g.slice(1)),s.pop(),s=s.concat(T(w,f)),h=["R"].concat(g.slice(-2));else if("O"==i)s.pop(),w=k(l,c,g[1],g[2]),w.push(w[0]),s=s.concat(w);else if("U"==i)s.pop(),s=s.concat(k(l,c,g[1],g[2],g[3])),h=["U"].concat(s[s.length-1].slice(-2));else for(var x=0,b=g.length;b>x;x++)h[x]=g[x];if(i=i.toUpperCase(),"O"!=i)switch(h[0]){case"Z":l=+d,c=+u;break;case"H":l=h[1];break;case"V":c=h[1];break;case"M":d=h[h.length-2],u=h[h.length-1];default:l=h[h.length-2],c=h[h.length-1]}}return s.toString=o,n.abs=r(s),s}function S(e,t,a,n){return[e,t,a,n,a,n]}function I(e,t,a,n,o,r){var i=1/3,s=2/3;return[i*e+s*a,i*t+s*n,i*o+s*a,i*r+s*n,o,r]}function N(t,a,n,o,r,i,s,l,c,d){var u,p=120*V/180,h=V/180*(+r||0),g=[],f=e._.cacher(function(e,t,a){var n=e*M.cos(a)-t*M.sin(a),o=e*M.sin(a)+t*M.cos(a);return{x:n,y:o}});if(d)C=d[0],$=d[1],b=d[2],k=d[3];else{u=f(t,a,-h),t=u.x,a=u.y,u=f(l,c,-h),l=u.x,c=u.y;var m=(M.cos(V/180*r),M.sin(V/180*r),(t-l)/2),v=(a-c)/2,w=m*m/(n*n)+v*v/(o*o);w>1&&(w=M.sqrt(w),n=w*n,o=w*o);var y=n*n,P=o*o,x=(i==s?-1:1)*M.sqrt(H((y*P-y*v*v-P*m*m)/(y*v*v+P*m*m))),b=x*n*v/o+(t+l)/2,k=x*-o*m/n+(a+c)/2,C=M.asin(((a-k)/o).toFixed(9)),$=M.asin(((c-k)/o).toFixed(9));C=b>t?V-C:C,$=b>l?V-$:$,0>C&&(C=2*V+C),0>$&&($=2*V+$),s&&C>$&&(C-=2*V),!s&&$>C&&($-=2*V)}var S=$-C;if(H(S)>p){var I=$,E=l,R=c;$=C+p*(s&&$>C?1:-1),l=b+n*M.cos($),c=k+o*M.sin($),g=N(l,c,n,o,r,0,s,E,R,[$,I,b,k])}S=$-C;var L=M.cos(C),T=M.sin(C),D=M.cos($),F=M.sin($),B=M.tan(S/4),A=4/3*n*B,j=4/3*o*B,U=[t,a],z=[t+A*T,a-j*L],G=[l+A*F,c-j*D],O=[l,c];if(z[0]=2*U[0]-z[0],z[1]=2*U[1]-z[1],d)return[z,G,O].concat(g);g=[z,G,O].concat(g).join().split(",");for(var _=[],q=0,X=g.length;X>q;q++)_[q]=q%2?f(g[q-1],g[q],h).y:f(g[q],g[q+1],h).x;return _}function E(e,t,a,n,o,r,i,s){for(var l,c,d,u,p,h,g,f,m=[],v=[[],[]],w=0;2>w;++w)if(0==w?(c=6*e-12*a+6*o,l=-3*e+9*a-9*o+3*i,d=3*a-3*e):(c=6*t-12*n+6*r,l=-3*t+9*n-9*r+3*s,d=3*n-3*t),H(l)<1e-12){if(H(c)<1e-12)continue;u=-d/c,u>0&&1>u&&m.push(u)}else g=c*c-4*d*l,f=M.sqrt(g),0>g||(p=(-c+f)/(2*l),p>0&&1>p&&m.push(p),h=(-c-f)/(2*l),h>0&&1>h&&m.push(h));for(var y,P=m.length,x=P;P--;)u=m[P],y=1-u,v[0][P]=y*y*y*e+3*y*y*u*a+3*y*u*u*o+u*u*u*i,v[1][P]=y*y*y*t+3*y*y*u*n+3*y*u*u*r+u*u*u*s;return v[0][x]=e,v[1][x]=t,v[0][x+1]=i,v[1][x+1]=s,v[0].length=v[1].length=x+2,{min:{x:z.apply(0,v[0]),y:z.apply(0,v[1])},max:{x:G.apply(0,v[0]),y:G.apply(0,v[1])}}}function R(e,t){var n=!t&&a(e);if(!t&&n.curve)return r(n.curve);for(var o=$(e),i=t&&$(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=(function(e,t,a){var n,o;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(N.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==a||"S"==a?(n=2*t.x-t.bx,o=2*t.y-t.by):(n=t.x,o=t.y),e=["C",n,o].concat(e.slice(1));break;case"T":"Q"==a||"T"==a?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(I(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(I(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(S(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(S(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(S(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(S(t.x,t.y,t.X,t.Y))}return e}),d=function(e,t){if(e[t].length>7){e[t].shift();for(var a=e[t];a.length;)p[t]="A",i&&(h[t]="A"),e.splice(t++,0,["C"].concat(a.splice(0,6)));e.splice(t,1),v=G(o.length,i&&i.length||0)}},u=function(e,t,a,n,r){e&&t&&"M"==e[r][0]&&"M"!=t[r][0]&&(t.splice(r,0,["M",n.x,n.y]),a.bx=0,a.by=0,a.x=e[r][1],a.y=e[r][2],v=G(o.length,i&&i.length||0))},p=[],h=[],g="",f="",m=0,v=G(o.length,i&&i.length||0);v>m;m++){o[m]&&(g=o[m][0]),"C"!=g&&(p[m]=g,m&&(f=p[m-1])),o[m]=c(o[m],s,f),"A"!=p[m]&&"C"==g&&(p[m]="C"),d(o,m),i&&(i[m]&&(g=i[m][0]),"C"!=g&&(h[m]=g,m&&(f=h[m-1])),i[m]=c(i[m],l,f),"A"!=h[m]&&"C"==g&&(h[m]="C"),d(i,m)),u(o,i,s,l,m),u(i,o,l,s,m);var w=o[m],y=i&&i[m],P=w.length,x=i&&y.length;s.x=w[P-2],s.y=w[P-1],s.bx=U(w[P-4])||s.x,s.by=U(w[P-3])||s.y,l.bx=i&&(U(y[x-4])||l.x),l.by=i&&(U(y[x-3])||l.y),l.x=i&&y[x-2],l.y=i&&y[x-1]}return i||(n.curve=r(o)),i?[o,i]:o}function L(e,t){if(!t)return e;var a,n,o,r,i,s,l;for(e=R(e),o=0,i=e.length;i>o;o++)for(l=e[o],r=1,s=l.length;s>r;r+=2)a=t.x(l[r],l[r+1]),n=t.y(l[r],l[r+1]),l[r]=a,l[r+1]=n;return e}function T(e,t){for(var a=[],n=0,o=e.length;o-2*!t>n;n+=2){var r=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?o-4==n?r[3]={x:+e[0],y:+e[1]}:o-2==n&&(r[2]={x:+e[0],y:+e[1]},r[3]={x:+e[2],y:+e[3]}):r[0]={x:+e[o-2],y:+e[o-1]}:o-4==n?r[3]=r[2]:n||(r[0]={x:+e[n],y:+e[n+1]}),a.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return a}var D=t.prototype,F=e.is,B=e._.clone,A="hasOwnProperty",j=/,?([a-z]),?/gi,U=parseFloat,M=Math,V=M.PI,z=M.min,G=M.max,O=M.pow,H=M.abs,_=s(1),q=s(),X=s(0,1),Y=e._unit2px,W={path:function(e){return e.attr("path")},circle:function(e){var t=Y(e);return k(t.cx,t.cy,t.r)},ellipse:function(e){var t=Y(e);return k(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=Y(e);return b(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=Y(e);return b(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return b(t.x,t.y,t.width,t.height)}};e.path=a,e.path.getTotalLength=_,e.path.getPointAtLength=q,e.path.getSubpath=function(e,t,a){if(this.getTotalLength(e)-a<1e-6)return X(e,t).end;var n=X(e,a,1);return t?X(n,t).end:n},D.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},D.getPointAtLength=function(e){return q(this.attr("d"),e)},D.getSubpath=function(t,a){return e.path.getSubpath(this.attr("d"),t,a)},e._.box=n,e.path.findDotsAtSegment=l,e.path.bezierBBox=c,e.path.isPointInsideBBox=d,e.path.isBBoxIntersect=u,e.path.intersection=v,e.path.intersectionNumber=w,e.path.isPointInside=P,e.path.getBBox=x,e.path.get=W,e.path.toRelative=C,e.path.toAbsolute=$,e.path.toCubic=R,e.path.map=L,e.path.toString=o,e.path.clone=r}),n.plugin(function(e){var n=Math.max,o=Math.min,r=function(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,a=e.length;a>t;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},i=r.prototype;i.push=function(){for(var e,t,a=0,n=arguments.length;n>a;a++)e=arguments[a],e&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},i.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},i.forEach=function(e,t){for(var a=0,n=this.items.length;n>a;a++)if(e.call(t,this.items[a],a)===!1)return this;return this},i.animate=function(n,o,r,i){"function"!=typeof r||r.length||(i=r,r=a.linear),n instanceof e._.Animation&&(i=n.callback,r=n.easing,o=r.dur,n=n.attr);var s=arguments;if(e.is(n,"array")&&e.is(s[s.length-1],"array"))var l=!0;var c,d=function(){c?this.b=c:c=this.b},u=0,p=i&&function(){u++==this.length&&i.call(this)};return this.forEach(function(e,a){t.once("snap.animcreated."+e.id,d),l?s[a]&&e.animate.apply(e,s[a]):e.animate(n,o,r,p)})},i.remove=function(){for(;this.length;)this.pop().remove();return this},i.bind=function(e,t,a){var n={};if("function"==typeof t)this.bindings[e]=t;else{var o=a||e;this.bindings[e]=function(e){n[o]=e,t.attr(n)}}return this},i.attr=function(e){var t={};for(var a in e)this.bindings[a]?this.bindings[a](e[a]):t[a]=e[a];for(var n=0,o=this.items.length;o>n;n++)this.items[n].attr(t);return this},i.clear=function(){for(;this.length;)this.pop()},i.splice=function(e,t){e=0>e?n(this.length+e,0):e,t=n(0,o(this.length-e,t));var a,i=[],s=[],l=[];for(a=2;a<arguments.length;a++)l.push(arguments[a]);for(a=0;t>a;a++)s.push(this[e+a]);for(;a<this.length-e;a++)i.push(this[e+a]);var c=l.length;for(a=0;a<c+i.length;a++)this.items[e+a]=this[e+a]=c>a?l[a]:i[a-c];for(a=this.items.length=this.length-=t-c;this[a];)delete this[a++];return new r(s)},i.exclude=function(e){for(var t=0,a=this.length;a>t;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},i.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},i.getBBox=function(){for(var e=[],t=[],a=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var s=this.items[i].getBBox();e.push(s.x),t.push(s.y),a.push(s.x+s.width),r.push(s.y+s.height)}return e=o.apply(0,e),t=o.apply(0,t),a=n.apply(0,a),r=n.apply(0,r),{x:e,y:t,x2:a,y2:r,width:a-e,height:r-t,cx:e+(a-e)/2,cy:t+(r-t)/2}},i.clone=function(e){e=new r;for(var t=0,a=this.items.length;a>t;t++)e.push(this.items[t].clone());return e},i.toString=function(){return"Snap‘s set"},i.type="set",e.set=function(){var e=new r;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),n.plugin(function(e,a){function n(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function o(t,a,o){a=p(a).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],a=e.parseTransformString(a)||[];for(var r,i,s,d,u=Math.max(t.length,a.length),h=[],g=[],f=0;u>f;f++){if(s=t[f]||n(a[f]),d=a[f]||n(s),s[0]!=d[0]||"r"==s[0].toLowerCase()&&(s[2]!=d[2]||s[3]!=d[3])||"s"==s[0].toLowerCase()&&(s[3]!=d[3]||s[4]!=d[4])){t=e._.transform2matrix(t,o()),a=e._.transform2matrix(a,o()),h=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],g=[["m",a.a,a.b,a.c,a.d,a.e,a.f]];break}for(h[f]=[],g[f]=[],r=0,i=Math.max(s.length,d.length);i>r;r++)r in s&&(h[f][r]=s[r]),r in d&&(g[f][r]=d[r])}return{from:c(h),to:c(g),f:l(h)}}function r(e){return e}function i(e){return function(t){return+t.toFixed(3)+e}}function s(t){return e.rgb(t[0],t[1],t[2])}function l(e){var t,a,n,o,r,i,s=0,l=[];for(t=0,a=e.length;a>t;t++){for(r="[",i=['"'+e[t][0]+'"'],n=1,o=e[t].length;o>n;n++)i[n]="val["+s++ +"]";r+=i+"]",l[t]=r}return Function("val","return Snap.path.toString.call(["+l+"])")}function c(e){for(var t=[],a=0,n=e.length;n>a;a++)for(var o=1,r=e[a].length;r>o;o++)t.push(e[a][o]);return t}var d={},u=/[a-z]+$/i,p=String;d.stroke=d.fill="colour",a.prototype.equal=function(e,a){return t("snap.util.equal",this,e,a).firstDefined()},t.on("snap.util.equal",function(t,a){var n,h,g=p(this.attr(t)||""),f=this;if(g==+g&&a==+a)return{from:+g,to:+a,f:r};if("colour"==d[t])return n=e.color(g),h=e.color(a),{from:[n.r,n.g,n.b,n.opacity],to:[h.r,h.g,h.b,h.opacity],f:s};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return a instanceof e.Matrix&&(a=a.toTransformString()),e._.rgTransform.test(a)||(a=e._.svgTransform2string(a)),o(g,a,function(){return f.getBBox(1)});if("d"==t||"path"==t)return n=e.path.toCubic(g,a),{from:c(n[0]),to:c(n[1]),f:l(n[0])};if("points"==t)return n=p(g).split(e._.separator),h=p(a).split(e._.separator),{from:n,to:h,f:function(e){return e}};aUnit=g.match(u);var m=p(a).match(u);return aUnit&&aUnit==m?{from:parseFloat(g),to:parseFloat(a),f:i(aUnit)}:{from:this.asPX(t),to:this.asPX(t,a),f:r}})}),n.plugin(function(e,a,n,o){for(var r=a.prototype,i="hasOwnProperty",s=("createTouch"in o.doc),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=(function(e,t){var a="y"==e?"scrollTop":"scrollLeft",n=t&&t.node?t.node.ownerDocument:o.doc;return n[a in n.documentElement?"documentElement":"body"][a]}),u=function(){this.returnValue=!1},p=function(){return this.originalEvent.preventDefault()},h=function(){this.cancelBubble=!0},g=function(){return this.originalEvent.stopPropagation()},f=function(){return o.doc.addEventListener?function(e,t,a,n){var o=s&&c[t]?c[t]:t,r=function(o){var r=d("y",n),l=d("x",n);if(s&&c[i](t))for(var u=0,h=o.targetTouches&&o.targetTouches.length;h>u;u++)if(o.targetTouches[u].target==e||e.contains(o.targetTouches[u].target)){var f=o;o=o.targetTouches[u],o.originalEvent=f,o.preventDefault=p,o.stopPropagation=g;break}var m=o.clientX+l,v=o.clientY+r;return a.call(n,o,m,v)};return t!==o&&e.addEventListener(t,r,!1),e.addEventListener(o,r,!1),function(){return t!==o&&e.removeEventListener(t,r,!1),e.removeEventListener(o,r,!1),!0}}:o.doc.attachEvent?function(e,t,a,n){var o=function(e){e=e||n.node.ownerDocument.window.event;var t=d("y",n),o=d("x",n),r=e.clientX+o,i=e.clientY+t;return e.preventDefault=e.preventDefault||u,e.stopPropagation=e.stopPropagation||h,a.call(n,e,r,i)};e.attachEvent("on"+t,o);var r=function(){return e.detachEvent("on"+t,o),!0};return r}:void 0}(),m=[],v=function(e){for(var a,n=e.clientX,o=e.clientY,r=d("y"),i=d("x"),l=m.length;l--;){if(a=m[l],s){for(var c,u=e.touches&&e.touches.length;u--;)if(c=e.touches[u],c.identifier==a.el._drag.id||a.el.node.contains(c.target)){n=c.clientX,o=c.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var p=a.el.node;p.nextSibling,p.parentNode,p.style.display,n+=i,o+=r,t("snap.drag.move."+a.el.id,a.move_scope||a.el,n-a.el._drag.x,o-a.el._drag.y,n,o,e)}},w=function(a){e.unmousemove(v).unmouseup(w);for(var n,o=m.length;o--;)n=m[o],n.el._drag={},t("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,a);m=[]},y=l.length;y--;)!function(t){e[t]=r[t]=function(a,n){return e.is(a,"function")&&(this.events=this.events||[],this.events.push({name:t,f:a,unbind:f(this.node||document,t,a,n||this)})),this},e["un"+t]=r["un"+t]=function(e){for(var a=this.events||[],n=a.length;n--;)if(a[n].name==t&&(a[n].f==e||!e))return a[n].unbind(),a.splice(n,1),!a.length&&delete this.events,this;return this}}(l[y]);r.hover=function(e,t,a,n){return this.mouseover(e,a).mouseout(t,n||a)},r.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var P=[];r.drag=function(a,n,o,r,i,s){function l(l,c,d){(l.originalEvent||l).preventDefault(),this._drag.x=c,this._drag.y=d,this._drag.id=l.identifier,!m.length&&e.mousemove(v).mouseup(w),m.push({el:this,move_scope:r,start_scope:i,end_scope:s}),n&&t.on("snap.drag.start."+this.id,n),a&&t.on("snap.drag.move."+this.id,a),o&&t.on("snap.drag.end."+this.id,o),t("snap.drag.start."+this.id,i||r||this,c,d,l)}if(!arguments.length){var c;return this.drag(function(e,t){this.attr({transform:c+(c?"T":"t")+[e,t]})},function(){c=this.transform().local})}return this._drag={},P.push({el:this,start:l}),this.mousedown(l),this},r.undrag=function(){for(var a=P.length;a--;)P[a].el==this&&(this.unmousedown(P[a].start),P.splice(a,1),t.unbind("snap.drag.*."+this.id));return!P.length&&e.unmousemove(v).unmouseup(w),this}}),n.plugin(function(e,a,n){var o=(a.prototype,n.prototype),r=/^\s*url\((.+)\)/,i=String,s=e._.$;e.filter={},o.filter=function(t){var n=this;"svg"!=n.type&&(n=n.paper);var o=e.parse(i(t)),r=e._.id(),l=(n.node.offsetWidth,n.node.offsetHeight,s("filter"));return s(l,{id:r,filterUnits:"userSpaceOnUse"}),l.appendChild(o.node),n.defs.appendChild(l),new a(l)},t.on("snap.util.getattr.filter",function(){t.stop();var a=s(this.node,"filter");if(a){var n=i(a).match(r);return n&&e.select(n[1])}}),t.on("snap.util.attr.filter",function(n){if(n instanceof a&&"filter"==n.type){t.stop();var o=n.node.id;o||(s(n.node,{id:n.id}),o=n.id),s(this.node,{filter:e.url(o)})}n&&"none"!=n||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,a){null==t&&(t=2);var n=null==a?t:[t,a];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:n})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,a,n,o,r){return"string"==typeof n&&(o=n,r=o,n=4),"string"!=typeof o&&(r=o,o="#000"),o=o||"#000",null==n&&(n=4),null==r&&(r=1),null==t&&(t=0,a=2),null==a&&(a=t),o=e.color(o),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:o,dx:t,dy:a,blur:n,opacity:r})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){
return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),n});var s={Messages:{666:{Status:"Error",Name:"Undefined error",Definition:"Unknown error."},1000:{Status:"Error",Name:"Registration was failed",Definition:"When creating a user error has occurred."},1001:{Status:"Error",Name:"CAPTCHA is invalid",Definition:"User has not passed CAPTCHA."},1002:{Status:"Error",Name:"Email unconfirmed",Definition:"You need to go on the mail and confirm the registration."},1003:{Status:"Error",Name:"The data was not entered",Definition:"Please enter your login details."},1004:{Status:"Error",Name:"Wrong password",Definition:"Please enter correct password."},1005:{Status:"Error",Name:"Not registered",Definition:"You are not registered, please register."},1006:{Status:"Error",Name:"Wrong email code or userId",Definition:"Your email identity code or userId are wrong."},1007:{Status:"Error",Name:"Data was not enter",Definition:"Please enter first name and last name."},1008:{Status:"Error",Name:"Email was not enter",Definition:"Please enter your email."},1009:{Status:"Error",Name:"Is registered",Definition:"User with the same name already exists."},1010:{Status:"Error",Name:"User was not found",Definition:"User with this id was not found."},1011:{Status:"Error",Name:"Password is too short",Definition:"Passwords must be at least 6 characters."},1012:{Status:"Error",Name:"Password without non digit character",Definition:"Passwords must have at least one non letter and non digit character."},1015:{Status:"Error",Name:"Password is rquired",Definition:"Passwords is required field."},1016:{Status:"Error",Name:"Incorrect e-mail",Definition:"Please enter correct e-mail."},1017:{Status:"Error",Name:"E-mail was not entered",Definition:"E-mail is required field."},1018:{Status:"Error",Name:"Incorrect first name",Definition:"Please enter correct first name."},1019:{Status:"Error",Name:"Incorrect last name",Definition:"Please enter correct last name."},1050:{Status:"Error",Name:"User is not logged in",Definition:"Please login first to get access to this function"},1051:{Status:"Error",Name:"Cannot get access to the palette",Definition:"It seems that you are trying to get access to palette which is not exist"},1052:{Status:"Error",Name:"Cannot get access to the color",Definition:"It seems that you are trying to get access to color which is not exist"},1053:{Status:"Error",Name:"Returned object format is not valid",Definition:"Please check all data fields and try again"},2000:{Status:"Success",Name:"Success",Definition:"Successful operation."},2001:{Status:"Success",Name:"Success LogIn",Definition:"You have successfully LogIn."},2002:{Status:"Success",Name:"Registration was successful",Definition:"For 20 minutes on your mail will get a message to confirm your registration."},2003:{Status:"Success",Name:"Success E-mail confirm",Definition:"You e-mail successfully confirmed."},2006:{Status:"Success",Name:"Reset password was successful",Definition:"For 20 minutes on your mail will get a message to change your password."},2007:{Status:"Success",Name:"Password is changed",Definition:"Successful operation. Set new password."},2008:{Status:"Success",Name:"Feedback sent",Definition:"Your feedback successfully sent."},2009:{Status:"Success",Name:"Successful editing",Definition:"Editing was successful."},2010:{Status:"Success",Name:"Successful language change",Definition:"Language was successfully changed."}},Validations:{name:"name is incorrect",password:"password is incorrect",email:"email is incorrect",captcha:"captcha is invalid",passwordConfirm:"please, confirm your password"},InformationPage:{IPFirstBlockText:["Embroidery is the handicraft of decorating fabric or other materials with needle and thread or yarn. Embroidery may also incorporate other materials such as metal strips, pearls, beads, quills, and sequins. Embroidery is most often used on caps, hats, coats, blankets, dress shirts, denim, stockings, and golf shirts. Embroidery is available with a wide variety of thread or yarn color.","Our site helps to make amazing embroidery patterns.","gsdgdfgdf"],IPSecondBlockText:["You can:","- upload your picture from PC or via URL","- input count of stitches in width","- select palette","- finaly create embroidery pattern"],IPThirdBlockText:["Also you can make your personal custom palettes. To do it you must be loggeed in. So, please login or register to make your custom paletts or give your feedback.","Thanks for using our system."]},PopUps:{PopUpLogin:{PULoginTitle:"Login",loginEmail:"email",loginPassword:"password",loginRemember:"Remember me",loginSubmit:"submit",forgotPassword:"forgot password",registration:"registration"},PopUpRegistration:{PURegistrationTitle:"Registration",registrationFirstName:"first name",registrationLastName:"last name",registrationEmail:"email",registrationPassword:"password",registrationConfirmPassword:"confirm password",registrationSubmit:"submit",login:"login"},PopFeedback:{writeFeedback:"Write your feedback",feedBackSubmit:"submit"},PopChangePassword:{titleChangePassword:"Change password",changePasswordOldPassword:"old password",changePasswordNewPassword:"new password",changePasswordNewPasswordConfirm:"confirm new password",changePasswordSubmit:"submit"},PopForgotPassword:{titleForgotPassword:"Forgot password",forgotPasswordEmail:"email",forgotPasswordSubmit:"submit"},PopResetPassword:{titleResetPassword:"Reset password",resetPasswordEmail:"email",resetPasswordNewPassword:"new password",resetPasswordNewPasswordConfirm:"confirm new password",resetPasswordSubmit:"submit"}},Layout:{homePage:"Home page",editPalettes:"Edit palettes",aboutUs:"About Us",adminPage:"Admin Page",signIn:"Sign In",signOut:"Sign Out",feedback:"Feedback",language:"Language",fcM:"© 2016 All rights reserved",ourContacts:"Our contacts:",phone:"Phone: +44 (0) 20 7229 64 12",email:"Email: needlework2016@gmail.com",changePassword:"Change password"},HomePage:{homePageTop:"Home page",editPalettesTop:"Edit palettes",aboutUsTop:"About Us",adminPageTop:"Admin Page",signInTop:"Sign In",signOutTop:"Sign Out",dragBoxText1:"Drag ",dragBoxText2:" over here.",imageSpan:"image",status:"File API & FileReader API not supported",imageURL:"Enter image url: ",imgUrl:"Enter image url",uplImgByUrl:"Upload",chooseSpan:"Choose file",patternCreation:"Pattern creation",imageAdjustment:"Image adjustment",imageDraw:"Draw on image",imageCropTab:"Crop image",numberStitches:"Enter number of stitches: ",countColors:"Enter colors count: ",paletteSkin:"Enter pattern scale: ",selectedPalette:"Select palette: ",selectedAlg:"Select algorithm: ",stitchesCount:"Enter number of stitches",colorsCount:"Enter number of colors",firstPalette:"First palette",secondPalette:"Second palette",avgColors:"Average colors",contrastColor:"Contrast colors",crtPattern:"Create pattern",fullResetBtn:"Full reset",userColors:"Used colors:",countUsersColors:"Count of used colors:  ",colorsCountRep:"Colors count will be shown here",savePatternFromServer:"Save pattern as PDF",savePDFPattern:"Save pattern as PDF",contrasts:"Contrast: ",hue:"Hue: ",saturation:"Saturation: ",vibrance:"Vibrance: ",denoise:"Denoise: ",unsharp:"Unsharp mask: ",noise:"Noise: ",sepia:"Sepia: ",vignette:"Vignette: ",resetAdjButton:"Reset",cropButton:"Crop image",cropButtonReset:"Reset image",brightnessTitle:"Brightness: "},AdminPage:{makeNew:"Make new ",palette:"palette",yourWork:" for your work",textPalette:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Velit, odit, maxime. Molestiae ducimus odio itaque beatae sint, saepe molestias, et sed qui, a incidunt, sit sequi! Voluptas ullam dolore adipisci. Lorem ipsum dolor sit amet, consectetur adipisicing elit."}},testColor=[34,80,150],DMC123=[[154,216,235,"Синий"],[180,202,210,"серый"],[255,173,202,"Розовый"],[185,224,162,"Пашти желтый"]],testPalette6=[[104,9,9,"col1"],[104,68,37,"col2"],[104,139,56,"col3"],[104,61,136,"col4"],[104,183,80,"col5"],[104,241,38,"col6"],[104,62,172,"col7"],[104,59,243,"col8"],[104,140,252,"col9"],[104,234,234,"col10"],[104,246,193,"col11"],[104,152,147,"col12"],[104,114,180,"col13"]],testPalette1=[[209,9,9],[123,68,37],[124,139,56],[42,61,136],[236,183,80],[200,241,38],[40,62,233],[13,0,0],[108,140,252],[243,234,234],[24,246,193],[190,152,147],[123,114,180]],DMC=[[255,255,255],[148,91,128,208],[206,148,186,209],[236,207,225,210],[243,218,228,211],[156,41,74,221],[219,128,115,223],[255,199,176,224],[255,240,228,225],[143,57,38,300],[209,102,84,301],[188,0,97,304],[255,231,109,307],[188,22,65,326],[61,0,103,327],[127,84,130,333],[115,140,170,334],[219,36,79,335],[36,73,103,336],[162,121,164,340],[145,180,197,341],[194,36,67,347],[220,61,91,349],[237,69,90,350],[255,128,135,351],[255,157,144,352],[255,196,184,353],[189,73,47,355],[226,114,91,356],[95,112,91,367],[181,206,162,368],[243,250,209,369],[184,138,87,370],[196,155,100,371],[203,162,107,372],[157,60,39,400],[255,190,164,402],[194,101,76,407],[109,95,95,413],[167,139,136,414],[221,221,218,415],[140,91,43,420],[237,172,123,422],[151,84,20,433],[178,103,70,434],[187,107,57,435],[231,152,115,436],[238,171,121,437],[255,176,0,444],[255,255,190,445],[179,151,143,451],[210,185,175,452],[235,207,185,453],[116,114,92,469],[133,143,108,470],[176,187,140,471],[238,255,182,472],[187,0,97,498],[43,57,41,500],[67,85,73,501],[134,158,134,502],[195,206,183,503],[206,221,193,504],[16,127,135,517],[102,148,154,518],[194,209,207,519],[55,73,18,520],[159,169,142,522],[172,183,142,523],[205,182,158,524],[85,85,89,535],[239,214,188,543],[109,18,97,550],[146,85,130,552],[160,100,146,553],[243,206,225,554],[59,96,76,561],[97,134,97,562],[182,212,180,563],[214,230,204,564],[0,240,240,580],[151,152,49,581],[128,151,132,597],[208,223,205,598],[208,57,106,600],[222,57,105,601],[231,84,122,602],[225,115,140,603],[255,189,202,604],[255,207,214,605],[255,0,0,606],[255,91,0,608],[151,104,84,610],[158,109,91,611],[203,152,103,612],[219,176,122,613],[162,77,52,632],[163,163,157,640],[174,176,170,642],[224,224,215,644],[113,113,113,645],[121,121,121,646],[190,190,185,647],[202,202,202,648],[213,39,86,666],[255,206,158,676],[255,231,182,677],[209,140,103,680],[0,91,123,699],[0,96,0,700],[79,108,69,701],[79,121,66,702],[121,144,76,703],[165,164,103,704],[245,240,219,712],[219,55,121,718],[200,36,43,720],[255,115,97,721],[255,146,109,722],[255,200,124,725],[255,224,128,726],[255,235,168,727],[243,176,128,729],[132,102,0,730],[140,103,0,731],[145,104,0,732],[206,155,97,733],[221,166,107,734],[244,195,139,738],[244,233,202,739],[255,131,19,740],[255,142,4,741],[255,183,85,742],[255,230,146,743],[255,239,170,744],[255,240,197,745],[246,234,219,746],[240,247,239,747],[251,227,209,754],[255,177,147,758],[249,160,146,760],[255,201,188,761],[232,232,229,762],[231,249,203,772],[247,246,248,775],[255,177,174,776],[255,199,184,778],[181,98,46,780],[181,107,56,781],[204,119,66,782],[225,146,85,783],[71,55,93,791],[97,97,128,792],[147,139,164,793],[187,208,218,794],[30,58,95,796],[30,66,99,797],[103,115,141,798],[132,156,182,799],[233,238,233,800],[123,71,20,801],[30,130,133,806],[128,167,160,807],[190,193,205,809],[175,195,205,813],[162,0,88,814],[166,0,91,815],[179,0,91,816],[219,24,85,817],[255,234,235,818],[248,247,221,819],[30,54,85,820],[242,234,219,822],[0,0,73,823],[71,97,116,824],[85,108,128,825],[115,138,153,826],[213,231,232,827],[237,247,238,828],[130,90,8,829],[136,95,18,830],[144,103,18,831],[178,119,55,832],[219,182,128,833],[242,209,142,834],[94,56,27,838],[109,66,39,839],[128,85,30,840],[188,134,107,841],[219,194,164,842],[107,103,102,844],[153,92,48,868],[153,92,48,869],[79,86,76,890],[241,49,84,891],[249,90,97,892],[243,149,157,893],[255,194,191,894],[89,92,78,895],[118,55,19,898],[233,109,115,899],[206,43,0,900],[138,24,77,902],[78,95,57,904],[98,119,57,905],[143,163,89,906],[185,200,102,907],[49,105,85,909],[48,116,91,910],[49,128,97,911],[115,158,115,912],[153,188,149,913],[170,24,91,915],[171,22,95,917],[168,68,76,918],[180,75,82,919],[197,94,88,920],[206,103,91,921],[237,134,115,922],[86,99,100,924],[96,116,115,926],[200,198,194,927],[225,224,216,928],[102,122,140,930],[124,135,145,931],[182,186,194,932],[62,59,40,934],[67,63,47,935],[69,69,49,936],[73,86,55,937],[99,39,16,938],[0,0,49,939],[0,162,117,943],[255,206,164,945],[244,73,0,946],[255,91,0,947],[255,243,231,948],[239,162,127,950],[255,229,188,951],[170,213,164,954],[214,230,204,955],[255,109,115,956],[255,204,208,957],[0,160,130,958],[171,206,177,959],[243,108,123,961],[253,134,141,962],[255,233,233,963],[208,224,210,964],[206,213,176,966],[255,117,24,970],[255,106,0,971],[255,146,0,972],[255,194,67,973],[158,67,18,975],[246,141,57,976],[255,164,73,977],[58,82,65,986],[83,97,73,987],[134,145,110,988],[134,153,110,989],[47,91,73,991],[146,183,165,992],[192,224,200,993],[0,123,0,995],[170,222,225,996],[123,91,64,3011],[170,134,103,3012],[208,195,164,3013],[115,91,93,3021],[172,172,170,3022],[198,190,173,3023],[210,208,205,3024],[84,56,23,3031],[188,156,120,3032],[239,219,190,3033],[190,155,167,3041],[225,205,200,3042],[216,151,105,3045],[229,93,139,3046],[255,236,211,3047],[85,73,0,3051],[137,141,114,3052],[187,179,148,3053],[194,1,76,3064],[233,233,223,3072],[255,255,220,3078],[202,226,229,3325],[255,157,150,3326],[188,64,85,3328],[255,123,103,3340],[255,172,162,3341],[97,100,82,3345],[128,152,115,3347],[225,249,190,3348],[201,79,91,3350],[255,214,209,3354],[96,95,84,3362],[116,127,96,3363],[161,167,135,3364],[83,37,16,3371],[231,79,134,3607],[247,152,182,3608],[255,214,229,3609],[161,53,79,3685],[203,78,97,3687],[250,151,144,3688],[255,213,216,3689],[255,85,91,3705],[255,128,109,3706],[254,212,219,3708],[230,101,107,3712],[253,229,217,3713],[255,211,212,3716],[184,75,77,3721],[184,89,88,3722],[195,118,123,3726],[255,199,196,3727],[209,93,103,3731],[255,154,148,3733],[156,125,133,3740],[235,235,231,3743],[149,102,162,3746],[230,236,232,3747],[12,91,108,3750],[194,209,206,3752],[237,247,247,3753],[158,176,206,3755],[248,248,252,3756],[102,142,152,3760],[227,234,230,3761],[24,128,134,3765],[24,101,111,3766],[92,110,108,3768],[255,250,224,3770],[173,83,62,3772],[231,134,103,3773],[255,220,193,3774],[221,109,91,3776],[191,64,36,3777],[237,122,100,3778],[255,177,152,3779],[113,71,42,3781],[206,175,144,3782],[139,109,115,3787],[140,117,109,3790],[255,255,255],[148,91,128,208],[206,148,186,209],[236,207,225,210],[243,218,228,211],[156,41,74,221],[219,128,115,223],[255,199,176,224],[255,240,228,225],[143,57,38,300],[209,102,84,301],[188,0,97,304],[255,231,109,307],[188,22,65,326],[61,0,103,327],[127,84,130,333],[115,140,170,334],[219,36,79,335],[36,73,103,336],[162,121,164,340],[145,180,197,341],[194,36,67,347],[220,61,91,349],[237,69,90,350],[255,128,135,351],[255,157,144,352],[255,196,184,353],[189,73,47,355],[226,114,91,356],[95,112,91,367],[181,206,162,368],[243,250,209,369],[184,138,87,370],[196,155,100,371],[203,162,107,372],[157,60,39,400],[255,190,164,402],[194,101,76,407],[109,95,95,413],[167,139,136,414],[221,221,218,415],[140,91,43,420],[237,172,123,422],[151,84,20,433],[178,103,70,434],[187,107,57,435],[231,152,115,436],[238,171,121,437],[255,176,0,444],[255,255,190,445],[179,151,143,451],[210,185,175,452],[235,207,185,453],[116,114,92,469],[133,143,108,470],[176,187,140,471],[238,255,182,472],[187,0,97,498],[43,57,41,500],[67,85,73,501],[134,158,134,502],[195,206,183,503],[206,221,193,504],[16,127,135,517],[102,148,154,518],[194,209,207,519],[55,73,18,520],[159,169,142,522],[172,183,142,523],[205,182,158,524],[85,85,89,535],[239,214,188,543],[109,18,97,550],[146,85,130,552],[160,100,146,553],[243,206,225,554],[59,96,76,561],[97,134,97,562],[182,212,180,563],[214,230,204,564],[0,240,240,580],[151,152,49,581],[128,151,132,597],[208,223,205,598],[208,57,106,600],[222,57,105,601],[231,84,122,602],[225,115,140,603],[255,189,202,604],[255,207,214,605],[255,0,0,606],[255,91,0,608],[151,104,84,610],[158,109,91,611],[203,152,103,612],[219,176,122,613],[162,77,52,632],[163,163,157,640],[174,176,170,642],[224,224,215,644],[113,113,113,645],[121,121,121,646],[190,190,185,647],[202,202,202,648],[213,39,86,666],[255,206,158,676],[255,231,182,677],[209,140,103,680],[0,91,123,699],[0,96,0,700],[79,108,69,701],[79,121,66,702],[121,144,76,703],[165,164,103,704],[245,240,219,712],[219,55,121,718],[200,36,43,720],[255,115,97,721],[255,146,109,722],[255,200,124,725],[255,224,128,726],[255,235,168,727],[243,176,128,729],[132,102,0,730],[140,103,0,731],[145,104,0,732],[206,155,97,733],[221,166,107,734],[244,195,139,738],[244,233,202,739],[255,131,19,740],[255,142,4,741],[255,183,85,742],[255,230,146,743],[255,239,170,744],[255,240,197,745],[246,234,219,746],[240,247,239,747],[251,227,209,754],[255,177,147,758],[249,160,146,760],[255,201,188,761],[232,232,229,762],[231,249,203,772],[247,246,248,775],[255,177,174,776],[255,199,184,778],[181,98,46,780],[181,107,56,781],[204,119,66,782],[225,146,85,783],[71,55,93,791],[97,97,128,792],[147,139,164,793],[187,208,218,794],[30,58,95,796],[30,66,99,797],[103,115,141,798],[132,156,182,799],[233,238,233,800],[123,71,20,801],[30,130,133,806],[128,167,160,807],[190,193,205,809],[175,195,205,813],[162,0,88,814],[166,0,91,815],[179,0,91,816],[219,24,85,817],[255,234,235,818],[248,247,221,819],[30,54,85,820],[242,234,219,822],[0,0,73,823],[71,97,116,824],[85,108,128,825],[115,138,153,826],[213,231,232,827],[237,247,238,828],[130,90,8,829],[136,95,18,830],[144,103,18,831],[178,119,55,832],[219,182,128,833],[242,209,142,834],[94,56,27,838],[109,66,39,839],[128,85,30,840],[188,134,107,841],[219,194,164,842],[107,103,102,844],[153,92,48,868],[153,92,48,869],[79,86,76,890],[241,49,84,891],[249,90,97,892],[243,149,157,893],[255,194,191,894],[89,92,78,895],[118,55,19,898],[233,109,115,899],[206,43,0,900],[138,24,77,902],[78,95,57,904],[98,119,57,905],[143,163,89,906],[185,200,102,907],[49,105,85,909],[48,116,91,910],[49,128,97,911],[115,158,115,912],[153,188,149,913],[170,24,91,915],[171,22,95,917],[168,68,76,918],[180,75,82,919],[197,94,88,920],[206,103,91,921],[237,134,115,922],[86,99,100,924],[96,116,115,926],[200,198,194,927],[225,224,216,928],[102,122,140,930],[124,135,145,931],[182,186,194,932],[62,59,40,934],[67,63,47,935],[69,69,49,936],[73,86,55,937],[99,39,16,938],[0,0,49,939],[0,162,117,943],[255,206,164,945],[244,73,0,946],[255,91,0,947],[255,243,231,948],[239,162,127,950],[255,229,188,951],[170,213,164,954],[214,230,204,955],[255,109,115,956],[255,204,208,957],[0,160,130,958],[171,206,177,959],[243,108,123,961],[253,134,141,962],[255,233,233,963],[208,224,210,964],[206,213,176,966],[255,117,24,970],[255,106,0,971],[255,146,0,972],[255,194,67,973],[158,67,18,975],[246,141,57,976],[255,164,73,977],[58,82,65,986],[83,97,73,987],[134,145,110,988],[134,153,110,989],[47,91,73,991],[146,183,165,992],[192,224,200,993],[0,123,0,995],[170,222,225,996],[123,91,64,3011],[170,134,103,3012],[208,195,164,3013],[115,91,93,3021],[172,172,170,3022],[198,190,173,3023],[210,208,205,3024],[84,56,23,3031],[188,156,120,3032],[239,219,190,3033],[190,155,167,3041],[225,205,200,3042],[216,151,105,3045],[229,93,139,3046],[255,236,211,3047],[85,73,0,3051],[137,141,114,3052],[187,179,148,3053],[194,1,76,3064],[233,233,223,3072],[255,255,220,3078],[202,226,229,3325],[255,157,150,3326],[188,64,85,3328],[255,123,103,3340],[255,172,162,3341],[97,100,82,3345],[128,152,115,3347],[225,249,190,3348],[201,79,91,3350],[255,214,209,3354],[96,95,84,3362],[116,127,96,3363],[161,167,135,3364],[83,37,16,3371],[231,79,134,3607],[247,152,182,3608],[255,214,229,3609],[161,53,79,3685],[203,78,97,3687],[250,151,144,3688],[255,213,216,3689],[255,85,91,3705],[255,128,109,3706],[254,212,219,3708],[230,101,107,3712],[253,229,217,3713],[255,211,212,3716],[184,75,77,3721],[184,89,88,3722],[195,118,123,3726],[255,199,196,3727],[209,93,103,3731],[255,154,148,3733],[156,125,133,3740],[235,235,231,3743],[149,102,162,3746],[230,236,232,3747],[12,91,108,3750],[194,209,206,3752],[237,247,247,3753],[158,176,206,3755],[248,248,252,3756],[102,142,152,3760],[227,234,230,3761],[24,128,134,3765],[24,101,111,3766],[92,110,108,3768],[255,250,224,3770],[173,83,62,3772],[231,134,103,3773],[255,220,193,3774],[221,109,91,3776],[191,64,36,3777],[237,122,100,3778],[255,177,152,3779],[113,71,42,3781],[206,175,144,3782],[139,109,115,3787],[140,117,109,3790],[255,255,255],[148,91,128,208],[206,148,186,209],[236,207,225,210],[243,218,228,211],[156,41,74,221],[219,128,115,223],[255,199,176,224],[255,240,228,225],[143,57,38,300],[209,102,84,301],[188,0,97,304],[255,231,109,307],[188,22,65,326],[61,0,103,327],[127,84,130,333],[115,140,170,334],[219,36,79,335],[36,73,103,336],[162,121,164,340],[145,180,197,341],[194,36,67,347],[220,61,91,349],[237,69,90,350],[255,128,135,351],[255,157,144,352],[255,196,184,353],[189,73,47,355],[226,114,91,356],[95,112,91,367],[181,206,162,368],[243,250,209,369],[184,138,87,370],[196,155,100,371],[203,162,107,372],[157,60,39,400],[255,190,164,402],[194,101,76,407],[109,95,95,413],[167,139,136,414],[221,221,218,415],[140,91,43,420],[237,172,123,422],[151,84,20,433],[178,103,70,434],[187,107,57,435],[231,152,115,436],[238,171,121,437],[255,176,0,444],[255,255,190,445],[179,151,143,451],[210,185,175,452],[235,207,185,453],[116,114,92,469],[133,143,108,470],[176,187,140,471],[238,255,182,472],[187,0,97,498],[43,57,41,500],[67,85,73,501],[134,158,134,502],[195,206,183,503],[206,221,193,504],[16,127,135,517],[102,148,154,518],[194,209,207,519],[55,73,18,520],[159,169,142,522],[172,183,142,523],[205,182,158,524],[85,85,89,535],[239,214,188,543],[109,18,97,550],[146,85,130,552],[160,100,146,553],[243,206,225,554],[59,96,76,561],[97,134,97,562],[182,212,180,563],[214,230,204,564],[0,240,240,580],[151,152,49,581],[128,151,132,597],[208,223,205,598],[208,57,106,600],[222,57,105,601],[231,84,122,602],[225,115,140,603],[255,189,202,604],[255,207,214,605],[255,0,0,606],[255,91,0,608],[151,104,84,610],[158,109,91,611],[203,152,103,612],[219,176,122,613],[162,77,52,632],[163,163,157,640],[174,176,170,642],[224,224,215,644],[113,113,113,645],[121,121,121,646],[190,190,185,647],[202,202,202,648],[213,39,86,666],[255,206,158,676],[255,231,182,677],[209,140,103,680],[0,91,123,699],[0,96,0,700],[79,108,69,701],[79,121,66,702],[121,144,76,703],[165,164,103,704],[245,240,219,712],[219,55,121,718],[200,36,43,720],[255,115,97,721],[255,146,109,722],[255,200,124,725],[255,224,128,726],[255,235,168,727],[243,176,128,729],[132,102,0,730],[140,103,0,731],[145,104,0,732],[206,155,97,733],[221,166,107,734],[244,195,139,738],[244,233,202,739],[255,131,19,740],[255,142,4,741],[255,183,85,742],[255,230,146,743],[255,239,170,744],[255,240,197,745],[246,234,219,746],[240,247,239,747],[251,227,209,754],[255,177,147,758],[249,160,146,760],[255,201,188,761],[232,232,229,762],[231,249,203,772],[247,246,248,775],[255,177,174,776],[255,199,184,778],[181,98,46,780],[181,107,56,781],[204,119,66,782],[225,146,85,783],[71,55,93,791],[97,97,128,792],[147,139,164,793],[187,208,218,794],[30,58,95,796],[30,66,99,797],[103,115,141,798],[132,156,182,799],[233,238,233,800],[123,71,20,801],[30,130,133,806],[128,167,160,807],[190,193,205,809],[175,195,205,813],[162,0,88,814],[166,0,91,815],[179,0,91,816],[219,24,85,817],[255,234,235,818],[248,247,221,819],[30,54,85,820],[242,234,219,822],[0,0,73,823],[71,97,116,824],[85,108,128,825],[115,138,153,826],[213,231,232,827],[237,247,238,828],[130,90,8,829],[136,95,18,830],[144,103,18,831],[178,119,55,832],[219,182,128,833],[242,209,142,834],[94,56,27,838],[109,66,39,839],[128,85,30,840],[188,134,107,841],[219,194,164,842],[107,103,102,844],[153,92,48,868],[153,92,48,869],[79,86,76,890],[241,49,84,891],[249,90,97,892],[243,149,157,893],[255,194,191,894],[89,92,78,895],[118,55,19,898],[233,109,115,899],[206,43,0,900],[138,24,77,902],[78,95,57,904],[98,119,57,905],[143,163,89,906],[185,200,102,907],[49,105,85,909],[48,116,91,910],[49,128,97,911],[115,158,115,912],[153,188,149,913],[170,24,91,915],[171,22,95,917],[168,68,76,918],[180,75,82,919],[197,94,88,920],[206,103,91,921],[237,134,115,922],[86,99,100,924],[96,116,115,926],[200,198,194,927],[225,224,216,928],[102,122,140,930],[124,135,145,931],[182,186,194,932],[62,59,40,934],[67,63,47,935],[69,69,49,936],[73,86,55,937],[99,39,16,938],[0,0,49,939],[0,162,117,943],[255,206,164,945],[244,73,0,946],[255,91,0,947],[255,243,231,948],[239,162,127,950],[255,229,188,951],[170,213,164,954],[214,230,204,955],[255,109,115,956],[255,204,208,957],[0,160,130,958],[171,206,177,959],[243,108,123,961],[253,134,141,962],[255,233,233,963],[208,224,210,964],[206,213,176,966],[255,117,24,970],[255,106,0,971],[255,146,0,972],[255,194,67,973],[158,67,18,975],[246,141,57,976],[255,164,73,977],[58,82,65,986],[83,97,73,987],[134,145,110,988],[134,153,110,989],[47,91,73,991],[146,183,165,992],[192,224,200,993],[0,123,0,995],[170,222,225,996],[123,91,64,3011],[170,134,103,3012],[208,195,164,3013],[115,91,93,3021],[172,172,170,3022],[198,190,173,3023],[210,208,205,3024],[84,56,23,3031],[188,156,120,3032],[239,219,190,3033],[190,155,167,3041],[225,205,200,3042],[216,151,105,3045],[229,93,139,3046],[255,236,211,3047],[85,73,0,3051],[137,141,114,3052],[187,179,148,3053],[194,1,76,3064],[233,233,223,3072],[255,255,220,3078],[202,226,229,3325],[255,157,150,3326],[188,64,85,3328],[255,123,103,3340],[255,172,162,3341],[97,100,82,3345],[128,152,115,3347],[225,249,190,3348],[201,79,91,3350],[255,214,209,3354],[96,95,84,3362],[116,127,96,3363],[161,167,135,3364],[83,37,16,3371],[231,79,134,3607],[247,152,182,3608],[255,214,229,3609],[161,53,79,3685],[203,78,97,3687],[250,151,144,3688],[255,213,216,3689],[255,85,91,3705],[255,128,109,3706],[254,212,219,3708],[230,101,107,3712],[253,229,217,3713],[255,211,212,3716],[184,75,77,3721],[184,89,88,3722],[195,118,123,3726],[255,199,196,3727],[209,93,103,3731],[255,154,148,3733],[156,125,133,3740],[235,235,231,3743],[149,102,162,3746],[230,236,232,3747],[12,91,108,3750],[194,209,206,3752],[237,247,247,3753],[158,176,206,3755],[248,248,252,3756],[102,142,152,3760],[227,234,230,3761],[24,128,134,3765],[24,101,111,3766],[92,110,108,3768],[255,250,224,3770],[173,83,62,3772],[231,134,103,3773],[255,220,193,3774],[221,109,91,3776],[191,64,36,3777],[237,122,100,3778],[255,177,152,3779],[113,71,42,3781],[206,175,144,3782],[139,109,115,3787],[140,117,109,3790],[81,76,83,3799]];